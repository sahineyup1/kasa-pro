(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,136,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(19455),t=e.i(93479),r=e.i(67489),i=e.i(84774),c=e.i(55146),n=e.i(69457),d=e.i(10204),o=e.i(24687),m=e.i(57428),x=e.i(76639),u=e.i(77572),h=e.i(31278),p=e.i(7233),j=e.i(27612),g=e.i(88844),b=e.i(21557),v=e.i(78894),N=e.i(69638);let y={"Et ve Et Urunleri":{rate:9.5,description:"Dana, kuzu, sigir, tavuk vb. et urunleri"},Sarkuteri:{rate:9.5,description:"Sosis, sucuk, salam, jambon vb."},"Sut Urunleri":{rate:9.5,description:"Sut, peynir, yogurt, tereyagi vb."},"Ekmek ve Firin Urunleri":{rate:9.5,description:"Ekmek, pasta, kek, unlu mamuller"},"Meyve ve Sebze":{rate:9.5,description:"Taze, dondurulmus, konserve meyve/sebze"},"Baklagiller ve Tahillar":{rate:9.5,description:"Mercimek, nohut, pirinc, bulgur vb."},"Yaglar ve Soslar":{rate:9.5,description:"Zeytinyagi, aycicek yagi, sos, ketcap vb."},"Sekersiz Icecekler":{rate:9.5,description:"Su, mineralli su, meyve suyu (sekersiz)"},"Tarimsal Urunler":{rate:9.5,description:"Tohum, gubre, tarim ekipmanlari"},"Hasta Mamasi ve Diyet Urunleri":{rate:9.5,description:"Bebek mamasi, tibbi gidalar"},"Temel Gidalar":{rate:9.5,description:"Temel gida maddeleri, un, seker"},"Alkollu Icecekler":{rate:22,description:"Bira, sarap, votka, raki vb."},"Sekerli Icecekler":{rate:22,description:"Kola, gazoz, enerji icecegi"},"Temizlik Urunleri":{rate:22,description:"Deterjan, sabun, sampuan"},Kirtasiye:{rate:22,description:"Defter, kalem, dosya, ofis malzemeleri"},Elektronik:{rate:22,description:"Telefon, bilgisayar, TV, beyaz esya"},Giyim:{rate:22,description:"Kiyafet, ayakkabi, aksesuar"},"Ev Esyalari":{rate:22,description:"Mobilya, dekorasyon, mutfak esyalari"},Kozmetik:{rate:22,description:"Makyaj malzemeleri, parfum"},"Oyuncak ve Hobiler":{rate:22,description:"Oyuncaklar, spor malzemeleri"},Diger:{rate:22,description:"Diger standart DDV'ye tabi urunler"},"Kitap ve Yayinlar":{rate:5,description:"Basili kitaplar, e-kitaplar, gazeteler"},"Egitim Materyalleri":{rate:5,description:"Ders kitaplari, egitim yazilimlari"},"Ilac ve Tibbi Malzemeler":{rate:0,description:"Receteli ilaclar, tibbi cihazlar"},"Ihracat ve AB Ici Tedarik":{rate:0,description:"Disa satis, AB ici ticaret"}},f=[{value:"adet",label:"Adet"},{value:"kg",label:"Kilogram (kg)"},{value:"g",label:"Gram (g)"},{value:"lt",label:"Litre (lt)"},{value:"ml",label:"Mililitre (ml)"},{value:"paket",label:"Paket"},{value:"kutu",label:"Kutu"},{value:"m",label:"Metre (m)"}],k=[{value:"both",label:"Her Ikisi"},{value:"market",label:"Market"},{value:"kasap",label:"Kasap"}];function S(e,a,s,l){if(!e)return l;let t=e;for(let e of a)if(t&&"object"==typeof t&&e in t)t=t[e];else{t=void 0;break}if(null!=t)return t;let r=e[s];return null!=r?r:l}function T({errors:e,warnings:s}){return 0===e.length&&0===s.length?(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,a.jsx)(N.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-sm text-green-700",children:"Hazir"})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[e.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded-lg",children:[(0,a.jsx)(v.AlertTriangle,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)("span",{className:"text-sm text-red-700",children:e})]},`err-${s}`)),s.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,a.jsx)(v.AlertTriangle,{className:"h-4 w-4 text-amber-600"}),(0,a.jsx)("span",{className:"text-sm text-amber-700",children:e})]},`warn-${s}`))]})}function C({open:e,onOpenChange:i,product:c,onSave:v}){let N=!!c,[C,w]=(0,s.useState)(""),[F,I]=(0,s.useState)(""),[B,D]=(0,s.useState)(""),[P,U]=(0,s.useState)(""),[E,M]=(0,s.useState)(""),[z,K]=(0,s.useState)("both"),[A,L]=(0,s.useState)(""),[H,R]=(0,s.useState)(""),[O,V]=(0,s.useState)(!0),[$,G]=(0,s.useState)(""),[Q,q]=(0,s.useState)({}),[Y,W]=(0,s.useState)(""),[_,J]=(0,s.useState)("alternative"),[X,Z]=(0,s.useState)(!1),[ee,ea]=(0,s.useState)(""),[es,el]=(0,s.useState)("12"),[et,er]=(0,s.useState)(""),[ei,ec]=(0,s.useState)("9.5"),[en,ed]=(0,s.useState)("EUR"),[eo,em]=(0,s.useState)(40),[ex,eu]=(0,s.useState)({}),[eh,ep]=(0,s.useState)("adet"),[ej,eg]=(0,s.useState)({}),[eb,ev]=(0,s.useState)(""),[eN,ey]=(0,s.useState)(""),[ef,ek]=(0,s.useState)(""),[eS,eT]=(0,s.useState)("2"),[eC,ew]=(0,s.useState)("10"),[eF,eI]=(0,s.useState)(!1),[eB,eD]=(0,s.useState)(!1),[eP,eU]=(0,s.useState)("Slovenia"),[eE,eM]=(0,s.useState)(""),[ez,eK]=(0,s.useState)(""),[eA,eL]=(0,s.useState)(""),[eH,eR]=(0,s.useState)(""),[eO,eV]=(0,s.useState)(!1),[e$,eG]=(0,s.useState)(!1),[eQ,eq]=(0,s.useState)(!1),[eY,eW]=(0,s.useState)([]),[e_,eJ]=(0,s.useState)([]),[eX,eZ]=(0,s.useState)([]),[e0,e2]=(0,s.useState)(!1),[e1,e4]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=(0,n.subscribeToFirestore)("suppliers",e=>{eW(e||[])}),a=(0,n.subscribeToFirestore)("branches",e=>{eJ(e||[])}),s=(0,n.subscribeToFirestore)("subcategories",e=>{if(P&&e){let a=e.find(e=>e.id===P||e.categoryName===P);a?.subcategories?eZ(a.subcategories):eZ([])}});return()=>{e(),a(),s()}},[P]),(0,s.useEffect)(()=>{if(e_.length>0&&0===Object.keys(ex).length){let e={},a={};e_.forEach(s=>{"warehouse"!==s.type&&(e[s.id]={unitPrice:"",casePrice:""}),a[s.id]={currentStock:"0",minStock:"10",location:""}}),eu(e),eg(a)}},[e_]),(0,s.useEffect)(()=>{P&&y[P]&&ec(y[P].rate.toString())},[P]);let e5=(0,s.useMemo)(()=>{let e=[],a=[];return C.trim()||e.push("Urun adi zorunlu"),P||e.push("Kategori secilmeli"),$.trim()||e.push("Ana barkod zorunlu"),(!et||0>=parseFloat(et))&&e.push("Maliyet fiyati 0'dan buyuk olmali"),["Et ve Et Urunleri","Sarkuteri"].includes(P)&&(eP.trim()||a.push("Et urunleri icin mensei onerilir"),eF||a.push("Helal sertifikasi onerilir")),{errors:e,warnings:a,isValid:0===e.length}},[C,P,$,et,eP,eF]),e3=(0,s.useMemo)(()=>{let e=parseFloat(et)||0;return e<=0?0:e/(1-eo/100)},[et,eo]),e6=(0,s.useMemo)(()=>e3-(parseFloat(et)||0),[e3,et]);(0,s.useEffect)(()=>{if(e)if(c){w(S(c,["basic","name"],"name","")),I(S(c,["basic","sku"],"sku","")),D(S(c,["basic","description"],"description","")),U(S(c,["basic","category"],"category","")),M(S(c,["basic","subcategory"],"subcategory","")),K(S(c,["basic","targetCustomer"],"targetCustomer","both")),L(S(c,["basic","brand"],"brand","")),R(S(c,["basic","manufacturer"],"manufacturer","")),V(S(c,["audit","isActive"],"isActive",!0)),G(S(c,["barcodes","mainBarcode"],"barcode","")),q(S(c,["barcodes","alternativeBarcodes"],"alternativeBarcodes",{}));let e=S(c,["barcodes","caseBarcode"],"caseBarcode",{enabled:!1});Z(e?.enabled||!1),ea(e?.barcode||""),el(String(e?.caseQuantity||12)),er(String(S(c,["pricing","baseCost"],"cost","")||"")),ec(String(S(c,["pricing","vatRate"],"vatRate",9.5))),ed(S(c,["pricing","currency"],"currency","EUR")),ep(S(c,["stock","unit"],"unit","adet")),ev(S(c,["supplier","supplierId"],"supplierId","")),ey(S(c,["supplier","supplierName"],"supplierName","")),ek(S(c,["supplier","supplierSKU"],"supplierSKU","")),eT(String(S(c,["supplier","leadTime"],"leadTime",2))),ew(String(S(c,["supplier","minOrderQty"],"minOrderQty",10))),eI(S(c,["compliance","halalCertified"],"halalCertified",!1)),eD(S(c,["compliance","animalWelfare"],"animalWelfare",!1)),eU(S(c,["compliance","origin"],"origin","Slovenia")),eM(S(c,["compliance","slaughterhouseId"],"slaughterhouseId","")),eK(S(c,["compliance","veterinaryCertificate"],"veterinaryCertificate","")),eL(S(c,["declaration","si"],"declarationSI","")),eR(S(c,["declaration","en"],"declarationEN","")),eV(S(c,["tracking","allowNegativeStock"],"allowNegativeStock",!1)),eG(S(c,["tracking","trackLots"],"trackLots",!1)),eq(S(c,["tracking","trackExpiry"],"trackExpiry",!1));let a=S(c,["pricing","branchPricing"],"branchPricing",{}),s=S(c,["stock","branchStock"],"branchStock",{}),l={},t={};Object.entries(a).forEach(([e,a])=>{l[e]={unitPrice:String(a?.unitPrice||""),casePrice:String(a?.casePrice||"")}}),Object.entries(s).forEach(([e,a])=>{t[e]={currentStock:String(a?.currentStock||0),minStock:String(a?.minStock||10),location:a?.location||""}}),Object.keys(l).length>0&&eu(l),Object.keys(t).length>0&&eg(t)}else w(""),I(""),D(""),U(""),M(""),K("both"),L(""),R(""),V(!0),G(""),q({}),W(""),Z(!1),ea(""),el("12"),er(""),ec("9.5"),ed("EUR"),em(40),eu({}),ep("adet"),eg({}),ev(""),ey(""),ek(""),eT("2"),ew("10"),eI(!1),eD(!1),eU("Slovenia"),eM(""),eK(""),eL(""),eR(""),eV(!1),eG(!1),eq(!1),e4(!1)},[e,c]);let e8=async()=>{if(!e5.isValid)return void alert("Lutfen tum zorunlu alanlari doldurun!");e2(!0);try{let e={};Object.entries(ex).forEach(([a,s])=>{let l=parseFloat(s.unitPrice)||0,t=parseFloat(s.casePrice)||0,r=parseFloat(et)||0;e[a]={unitPrice:l,casePrice:t,markup:parseFloat((r>0?l/r:1).toFixed(2)),promotionPrice:null,promotionActive:!1}});let a={},s=0;Object.entries(ej).forEach(([e,l])=>{let t=parseFloat(l.currentStock)||0,r=parseFloat(l.minStock)||10;s+=t,a[e]={currentStock:t,minStock:r,maxStock:10*r,location:l.location,lastUpdate:new Date().toISOString(),reorderPoint:r,reorderQty:2*r}});let l={basic:{name:C.trim(),sku:F.trim()||$.trim(),description:B.trim(),category:P,subcategory:E,targetCustomer:z,brand:A.trim(),manufacturer:H.trim()},barcodes:{mainBarcode:$.trim(),alternativeBarcodes:Q,caseBarcode:X?{barcode:ee.trim(),caseQuantity:parseInt(es)||12,enabled:!0}:{enabled:!1}},pricing:{baseCost:parseFloat(et)||0,vatRate:parseFloat(ei)||9.5,currency:en,branchPricing:e},stock:{unit:eh,totalStock:s,branchStock:a},supplier:{supplierId:eb,supplierName:eN.trim(),supplierSKU:ef.trim(),leadTime:parseInt(eS)||2,minOrderQty:parseInt(eC)||10,lastPurchasePrice:parseFloat(et)||0,lastPurchaseDate:new Date().toISOString(),preferredSupplier:!0},compliance:{halalCertified:eF,animalWelfare:eB,origin:eP.trim(),slaughterhouseId:eE.trim(),veterinaryCertificate:ez.trim(),allergens:[]},declaration:{si:eA.trim(),en:eH.trim()},tracking:{trackInventory:!0,batchTracking:e$,expiryTracking:eQ,serialTracking:!1,allowNegativeStock:eO,allowBackorder:!1},audit:{isActive:O,updatedAt:new Date().toISOString()}};N&&c?.id?await (0,n.updateFirestoreData)("products",c.id,l):await (0,n.addFirestoreData)("products",{...l,audit:{...l.audit,createdAt:new Date().toISOString()}}),i(!1),v?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{e2(!1)}},e9=Object.keys(y),e7=e_.find(e=>"warehouse"===e.type),ae=e_.filter(e=>"warehouse"!==e.type);return(0,a.jsx)(x.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)(x.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)(x.DialogHeader,{className:"border-b pb-4",children:[(0,a.jsx)(x.DialogTitle,{className:"text-xl font-semibold",children:N?"Urun Duzenle":"Yeni Urun Ekle"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:N?"Urun bilgilerini guncelleyin":"Yeni urun eklemek icin formu doldurun"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,a.jsxs)(u.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,a.jsxs)(u.TabsList,{className:"grid w-full grid-cols-4 mb-4",children:[(0,a.jsx)(u.TabsTrigger,{value:"basic",children:"Temel Bilgiler"}),(0,a.jsx)(u.TabsTrigger,{value:"pricing",children:"Fiyat & Stok"}),(0,a.jsx)(u.TabsTrigger,{value:"supplier",children:"Tedarik & Barkod"}),(0,a.jsx)(u.TabsTrigger,{value:"compliance",children:"Uyumluluk"})]}),(0,a.jsx)(u.TabsContent,{value:"basic",className:"space-y-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"name",children:"Urun Adi *"}),(0,a.jsx)(t.Input,{id:"name",value:C,onChange:e=>w(e.target.value),placeholder:"Orn: Kuzu Kiyma",className:C.trim()?"":"border-red-300"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"category",children:"Ust Kategori *"}),(0,a.jsxs)(r.Select,{value:P,onValueChange:U,children:[(0,a.jsx)(r.SelectTrigger,{className:P?"":"border-red-300",children:(0,a.jsx)(r.SelectValue,{placeholder:"Kategori secin"})}),(0,a.jsx)(r.SelectContent,{className:"max-h-[300px]",children:e9.map(e=>{let s=y[e];return(0,a.jsx)(r.SelectItem,{value:e,children:(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsx)("span",{children:e}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["%",s.rate]})]})},e)})})]}),P&&(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["DDV: %",y[P]?.rate," - ",y[P]?.description]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"subcategory",children:"Alt Kategori"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(r.Select,{value:E,onValueChange:M,disabled:!P,children:[(0,a.jsx)(r.SelectTrigger,{className:"flex-1",children:(0,a.jsx)(r.SelectValue,{placeholder:"Alt kategori secin"})}),(0,a.jsx)(r.SelectContent,{children:eX.map(e=>(0,a.jsx)(r.SelectItem,{value:e,children:e},e))})]}),(0,a.jsx)(l.Button,{variant:"outline",size:"icon",disabled:!P,children:(0,a.jsx)(p.Plus,{className:"h-4 w-4"})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{children:"Hedef Musteri"}),(0,a.jsx)("div",{className:"flex gap-2",children:k.map(e=>(0,a.jsxs)(l.Button,{type:"button",variant:z===e.value?"default":"outline",size:"sm",onClick:()=>K(e.value),className:"flex-1",children:["market"===e.value&&"ðŸª ","kasap"===e.value&&"ðŸ¥© ","both"===e.value&&"ðŸ”„ ",e.label]},e.value))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"sku",children:"SKU / Stok Kodu"}),(0,a.jsx)(t.Input,{id:"sku",value:F,onChange:e=>I(e.target.value),placeholder:"Orn: KM-001"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"brand",children:"Marka"}),(0,a.jsx)(t.Input,{id:"brand",value:A,onChange:e=>L(e.target.value),placeholder:"Marka adi"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"manufacturer",children:"Uretici"}),(0,a.jsx)(t.Input,{id:"manufacturer",value:H,onChange:e=>R(e.target.value),placeholder:"Uretici firma"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"description",children:"Aciklama"}),(0,a.jsx)(o.Textarea,{id:"description",value:B,onChange:e=>D(e.target.value),placeholder:"Urun hakkinda ek bilgiler...",rows:3})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,a.jsx)(m.Checkbox,{id:"isActive",checked:O,onCheckedChange:e=>V(e)}),(0,a.jsx)(d.Label,{htmlFor:"isActive",className:"font-normal",children:"Aktif Urun"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)(d.Label,{children:"Urun Fotografi"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,a.jsx)(g.Package,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Foto yukleme icin tiklayiniz"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"PNG, JPG (max 2MB)"})]})]})]})}),(0,a.jsxs)(u.TabsContent,{value:"pricing",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"ðŸ’°"})," Fiyatlandirma"]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"baseCost",children:"Maliyet Fiyati (EUR) *"}),(0,a.jsx)(t.Input,{id:"baseCost",type:"number",step:"0.01",value:et,onChange:e=>er(e.target.value),placeholder:"0.00",className:!et||0>=parseFloat(et)?"border-red-300":""})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"vatRate",children:"DDV Orani"}),(0,a.jsxs)(r.Select,{value:ei,onValueChange:ec,children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"0",children:"%0 (Muaf)"}),(0,a.jsx)(r.SelectItem,{value:"5",children:"%5 (Super Indirimli)"}),(0,a.jsx)(r.SelectItem,{value:"9.5",children:"%9.5 (Indirimli)"}),(0,a.jsx)(r.SelectItem,{value:"22",children:"%22 (Standart)"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"currency",children:"Para Birimi"}),(0,a.jsxs)(r.Select,{value:en,onValueChange:ed,children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"EUR",children:"EUR (â‚¬)"}),(0,a.jsx)(r.SelectItem,{value:"USD",children:"USD ($)"}),(0,a.jsx)(r.SelectItem,{value:"TRY",children:"TRY (â‚º)"})]})]})]})]}),(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("h5",{className:"font-medium text-amber-800 flex items-center gap-2",children:[(0,a.jsx)(b.Calculator,{className:"h-4 w-4"}),"Akilli Fiyat Hesaplayici"]}),(0,a.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>e4(!e1),children:e1?"Gizle":"Goster"})]}),e1&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)(d.Label,{children:["Kar Marji: %",eo]})}),(0,a.jsx)("input",{type:"range",min:"10",max:"100",value:eo,onChange:e=>em(parseInt(e.target.value)),className:"w-full"}),(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"%10 (Dusuk)"}),(0,a.jsx)("span",{children:"%40 (Orta)"}),(0,a.jsx)("span",{children:"%100 (Yuksek)"})]})]}),parseFloat(et)>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Maliyet:"}),(0,a.jsxs)("span",{children:["â‚¬",parseFloat(et).toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsxs)("span",{children:["Kar Marji (",eo,"%):"]}),(0,a.jsxs)("span",{className:"text-green-600",children:["â‚¬",e6.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[(0,a.jsx)("span",{children:"Onerilen Satis Fiyati:"}),(0,a.jsxs)("span",{className:"text-amber-600 text-lg",children:["â‚¬",e3.toFixed(2)]})]}),(0,a.jsx)(l.Button,{className:"w-full mt-2",onClick:()=>{let e={...ex};Object.keys(e).forEach(a=>{e[a].unitPrice=e3.toFixed(2)}),eu(e),e4(!1)},disabled:0===ae.length,children:"Tum Subelere Uygula"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(d.Label,{children:"Sube Fiyatlari"}),ae.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("span",{className:"font-medium w-40",children:["butcher"===e.type?"ðŸ¥©":"ðŸª"," ",e.name]}),(0,a.jsxs)("div",{className:"flex-1 flex gap-3",children:[(0,a.jsx)(t.Input,{type:"number",step:"0.01",placeholder:"Birim fiyat",value:ex[e.id]?.unitPrice||"",onChange:a=>eu({...ex,[e.id]:{...ex[e.id],unitPrice:a.target.value}}),className:"flex-1"}),(0,a.jsx)(t.Input,{type:"number",step:"0.01",placeholder:"Kutu fiyat",value:ex[e.id]?.casePrice||"",onChange:a=>eu({...ex,[e.id]:{...ex[e.id],casePrice:a.target.value}}),className:"flex-1"})]})]},e.id))]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"ðŸ“¦"})," Stok Ayarlari"]}),(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,a.jsx)("strong",{children:"Bilgi:"})," Urun stoku sadece Merkez Depo'ya girilebilir. Subelere dagitim transfer sistemi ile yapilir."]})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"unit",children:"Birim"}),(0,a.jsxs)(r.Select,{value:eh,onValueChange:ep,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-[200px]",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsx)(r.SelectContent,{children:f.map(e=>(0,a.jsx)(r.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),e7&&(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-3",children:[(0,a.jsx)(d.Label,{className:"text-green-800 font-semibold",children:"ðŸ­ Merkez Depo Stoku"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(t.Input,{type:"number",step:"0.1",placeholder:"Mevcut stok",value:ej[e7.id]?.currentStock||"0",onChange:e=>eg({...ej,[e7.id]:{...ej[e7.id],currentStock:e.target.value}}),className:"flex-1"}),(0,a.jsx)(t.Input,{type:"number",step:"0.1",placeholder:"Min stok",value:ej[e7.id]?.minStock||"10",onChange:e=>eg({...ej,[e7.id]:{...ej[e7.id],minStock:e.target.value}}),className:"flex-1"}),(0,a.jsx)(t.Input,{placeholder:"Konum/Raf",value:ej[e7.id]?.location||"",onChange:e=>eg({...ej,[e7.id]:{...ej[e7.id],location:e.target.value}}),className:"flex-1"})]})]}),ae.length>0&&(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{className:"text-gray-600",children:"Sube Stoklari (Sadece Goruntuleme)"}),ae.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 rounded-lg p-3",children:[(0,a.jsxs)("span",{className:"font-medium w-40 text-gray-600",children:["butcher"===e.type?"ðŸ¥©":"ðŸª"," ",e.name]}),(0,a.jsx)(t.Input,{type:"number",placeholder:"Stok",value:ej[e.id]?.currentStock||"0",disabled:!N,className:"flex-1 bg-gray-100"}),(0,a.jsx)(t.Input,{type:"number",placeholder:"Min",value:ej[e.id]?.minStock||"10",onChange:a=>eg({...ej,[e.id]:{...ej[e.id],minStock:a.target.value}}),className:"flex-1"}),(0,a.jsx)("span",{className:"text-xs text-gray-500 italic",children:"Transfer ile"})]},e.id))]}),(0,a.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,a.jsx)(d.Label,{children:"Stok Izleme Secenekleri"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"allowNegativeStock",checked:eO,onCheckedChange:e=>eV(e)}),(0,a.jsx)(d.Label,{htmlFor:"allowNegativeStock",className:"font-normal",children:"Negatif stoka izin ver"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"trackLots",checked:e$,onCheckedChange:e=>eG(e)}),(0,a.jsx)(d.Label,{htmlFor:"trackLots",className:"font-normal",children:"Lot/Parti numarasi takibi"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"trackExpiry",checked:eQ,onCheckedChange:e=>eq(e)}),(0,a.jsx)(d.Label,{htmlFor:"trackExpiry",className:"font-normal",children:"Son kullanma tarihi takibi"})]})]})]})]})]}),(0,a.jsxs)(u.TabsContent,{value:"supplier",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"ðŸ”¢"})," Barkod Bilgileri"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"mainBarcode",children:"Ana Barkod *"}),(0,a.jsx)(t.Input,{id:"mainBarcode",value:$,onChange:e=>G(e.target.value),placeholder:"8, 12, 13 veya 14 haneli barkod",className:`font-mono ${!$.trim()?"border-red-300":""}`}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Standart: EAN-13 (13 hane), EAN-8 (8 hane), UPC (12 hane)"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{children:"Alternatif Barkodlar"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t.Input,{value:Y,onChange:e=>W(e.target.value),placeholder:"Alternatif barkod",className:"flex-1 font-mono"}),(0,a.jsxs)(r.Select,{value:_,onValueChange:J,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"alternative",children:"Alternatif"}),(0,a.jsx)(r.SelectItem,{value:"supplier",children:"Tedarikci"}),(0,a.jsx)(r.SelectItem,{value:"internal",children:"Dahili"})]})]}),(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>{if(Y.trim()){if(Q[Y])return void alert("Bu barkod zaten ekli!");q({...Q,[Y]:{type:_,enabled:!0}}),W("")}},children:(0,a.jsx)(p.Plus,{className:"h-4 w-4"})})]}),Object.entries(Q).length>0&&(0,a.jsx)("div",{className:"space-y-1 mt-2",children:Object.entries(Q).map(([e,s])=>(0,a.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 rounded px-3 py-2",children:[(0,a.jsx)("span",{className:"font-mono flex-1",children:e}),(0,a.jsxs)("span",{className:"text-xs text-gray-500",children:["(",s.type,")"]}),(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{let a;return a={...Q},void(delete a[e],q(a))},children:(0,a.jsx)(j.Trash2,{className:"h-3 w-3 text-red-500"})})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-3 border rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"caseEnabled",checked:X,onCheckedChange:e=>Z(e)}),(0,a.jsx)(d.Label,{htmlFor:"caseEnabled",className:"font-medium",children:"ðŸ“¦ Kutu barkodu kullan"})]}),X&&(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"caseBarcode",children:"Kutu Barkodu"}),(0,a.jsx)(t.Input,{id:"caseBarcode",value:ee,onChange:e=>ea(e.target.value),placeholder:"Kutu barkodu",className:"font-mono"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"caseQuantity",children:"Kutu Icindeki Adet"}),(0,a.jsx)(t.Input,{id:"caseQuantity",type:"number",value:es,onChange:e=>el(e.target.value),min:"1"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"ðŸ­"})," Tedarikci Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"supplier",children:"Tedarikci"}),(0,a.jsxs)(r.Select,{value:eb,onValueChange:e=>{ev(e);let a=eY.find(a=>a.id===e);a&&ey(a.basic?.name||a.name||"")},children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{placeholder:"Tedarikci secin"})}),(0,a.jsx)(r.SelectContent,{children:eY.filter(e=>e.id).map(e=>(0,a.jsx)(r.SelectItem,{value:e.id,children:e.basic?.name||e.name||e.id},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"supplierSKU",children:"Tedarikci Stok Kodu"}),(0,a.jsx)(t.Input,{id:"supplierSKU",value:ef,onChange:e=>ek(e.target.value),placeholder:"Tedarikcinin verdigi kod"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"leadTime",children:"Teslimat Suresi"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(t.Input,{id:"leadTime",type:"number",value:eS,onChange:e=>eT(e.target.value),min:"0",className:"flex-1"}),(0,a.jsx)("span",{className:"flex items-center text-gray-500",children:"gun"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"minOrderQty",children:"Min. Siparis Miktari"}),(0,a.jsx)(t.Input,{id:"minOrderQty",type:"number",value:eC,onChange:e=>ew(e.target.value),min:"1"})]})]})]})]}),(0,a.jsxs)(u.TabsContent,{value:"compliance",className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"ðŸ¥©"})," Et Urunleri Uyumlulugu"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"halalCertified",checked:eF,onCheckedChange:e=>eI(e)}),(0,a.jsx)(d.Label,{htmlFor:"halalCertified",className:"font-normal",children:"âœ… Helal Sertifikali"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"animalWelfare",checked:eB,onCheckedChange:e=>eD(e)}),(0,a.jsx)(d.Label,{htmlFor:"animalWelfare",className:"font-normal",children:"ðŸ„ Hayvan Refahi Standartlarina Uygun"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"origin",children:"Mensei *"}),(0,a.jsx)(t.Input,{id:"origin",value:eP,onChange:e=>eU(e.target.value),placeholder:"Orn: Slovenia, Turkey, Germany"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"slaughterhouseId",children:"Kesimhane ID"}),(0,a.jsx)(t.Input,{id:"slaughterhouseId",value:eE,onChange:e=>eM(e.target.value),placeholder:"Kesimhane kimlik no"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"vetCertificate",children:"Veteriner Sertifika No"}),(0,a.jsx)(t.Input,{id:"vetCertificate",value:ez,onChange:e=>eK(e.target.value),placeholder:"Sertifika numarasi"})]}),(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-3",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:["ðŸ’¡ Et urunleri icin mensei ve helal sertifikasi onerilir.",(0,a.jsx)("br",{}),"ðŸ‡ªðŸ‡º AB standartlarina uygunluk zorunludur."]})})]}),(0,a.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:"ðŸ“œ"})," Deklarasyon"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"declarationSI",children:"ðŸ‡¸ðŸ‡® Slovence Deklarasyon"}),(0,a.jsx)(o.Textarea,{id:"declarationSI",value:eA,onChange:e=>eL(e.target.value),placeholder:"Sveze mlet ovcje meso. Hraniti pri 0-4Â°C. Uporabiti v 5 dneh.",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"declarationEN",children:"ðŸ‡¬ðŸ‡§ English Declaration (Optional)"}),(0,a.jsx)(o.Textarea,{id:"declarationEN",value:eH,onChange:e=>eR(e.target.value),placeholder:"Fresh minced lamb. Store at 0-4Â°C. Use within 5 days.",rows:3})]})]})]})]})]})}),(0,a.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,a.jsx)(T,{errors:e5.errors,warnings:e5.warnings}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>i(!1),disabled:e0,children:"Iptal"}),(0,a.jsx)(l.Button,{onClick:e8,disabled:e0||!e5.isValid,children:e0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):"Urunu Kaydet"})]})]})]})})}var w=e.i(12426),F=e.i(57086),I=e.i(75254);let B=(0,I.default)("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);var D=e.i(15788),P=e.i(1928),U=e.i(25652),E=e.i(35408),M=e.i(88699),z=e.i(37727),K=e.i(3116);function A({icon:e,title:s,value:l,color:t="gray"}){return(0,a.jsxs)("div",{className:`rounded-lg border p-4 ${{blue:"bg-amber-50 border-amber-200",green:"bg-green-50 border-green-200",purple:"bg-purple-50 border-purple-200",amber:"bg-amber-50 border-amber-200",gray:"bg-gray-50 border-gray-200"}[t]}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-1",children:[e,(0,a.jsx)("span",{children:s})]}),(0,a.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:l})]})}function L({current:e,min:s}){return e<=0?(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,a.jsx)(z.X,{className:"h-3 w-3 mr-1"}),"Stok Yok"]}):e<s?(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[(0,a.jsx)(v.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Dusuk"]}):(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(N.CheckCircle,{className:"h-3 w-3 mr-1"}),"Normal"]})}function H({open:e,onOpenChange:t,product:r,onEdit:c}){let d,o,[m,p]=(0,s.useState)([]),[j,b]=(0,s.useState)([]),[v,N]=(0,s.useState)([]),[y,f]=(0,s.useState)(!0),[k,S]=(0,s.useState)("info");(0,s.useEffect)(()=>{if(!e||!r)return;f(!0);let a=(0,n.subscribeToRTDB)("branches",e=>{console.log("ProductCardDialog: branches loaded",e.length),p(e||[])}),s=(0,n.subscribeToRTDB)("sale_invoices",e=>{console.log("ProductCardDialog: sale_invoices loaded",e.length),b(e||[])}),l=(0,n.subscribeToRTDB)("purchases",e=>{console.log("ProductCardDialog: purchases loaded",e.length),N(e||[]),f(!1)});return()=>{a(),s(),l()}},[e,r]);let T=()=>r?.basic?.name||r?.name||"-",C=()=>r?.basic?.category||"-",I=()=>r?.basic?.brand||"-",z=()=>r?.basic?.sku||"-",H=()=>r?.barcodes?.mainBarcode||r?.barcode||"-",R=()=>r?.pricing?.baseCost||r?.cost||0,O=()=>r?.pricing?.sellPrice||r?.price||0,V=()=>r?.pricing?.vatRate||0,$=()=>r?.stock?.totalStock||r?.stock_qty||0,G=(0,s.useMemo)(()=>r?.stock?.branchStock?Object.entries(r.stock.branchStock).map(([e,a])=>{let s=m.find(a=>a.id===e);return{branchId:e,branchName:s?.name||e,currentStock:a?.currentStock||0,minStock:a?.minStock||10,maxStock:a?.maxStock||100}}):[],[r,m]),Q=(0,s.useMemo)(()=>{if(!r)return[];let e=[];return j.forEach(a=>{(a.items||[]).forEach(s=>{s.productId===r.id&&e.push({date:(a.date||a.createdAt||"-").substring(0,10),invoiceNo:a.invoiceNo||"-",quantity:s.quantity||0,unitPrice:s.unitPrice||0,total:s.total||0})})}),e.sort((e,a)=>a.date.localeCompare(e.date)).slice(0,20)},[r,j]),q=(0,s.useMemo)(()=>{if(!r)return[];let e=[];return v.forEach(a=>{(a.items||[]).forEach(s=>{s.productId===r.id&&e.push({date:(a.date||a.createdAt||"-").substring(0,10),supplierName:a.supplierName||"-",quantity:s.quantity||0,unitPrice:s.unitPrice||0,total:s.total||0})})}),e.sort((e,a)=>a.date.localeCompare(e.date)).slice(0,20)},[r,v]),Y=r?.barcodes?.caseBarcode,W=Y?.enabled&&Y?.barcode,_=r?.supplier,J=_?.supplierName&&_?.supplierSKU;return r?(0,a.jsx)(x.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(x.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsx)(x.DialogHeader,{className:"border-b pb-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(x.DialogTitle,{className:"text-xl font-semibold text-gray-900",children:T()}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[C()," - ",I()," - SKU: ",z()]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["â‚¬",O().toFixed(2)]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Maliyet: â‚¬",R().toFixed(2)," - Kar: %",(d=O(),o=R(),d<=0?0:(d-o)/d*100).toFixed(1)]})]})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:y?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(h.Loader2,{className:"h-8 w-8 animate-spin text-amber-600"})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(A,{icon:(0,a.jsx)(g.Package,{className:"h-4 w-4"}),title:"Toplam Stok",value:$().toFixed(0),color:"blue"}),(0,a.jsx)(A,{icon:(0,a.jsx)(w.DollarSign,{className:"h-4 w-4"}),title:"Stok Degeri",value:`â‚¬${($()*R()).toFixed(2)}`,color:"green"}),(0,a.jsx)(A,{icon:(0,a.jsx)(F.Percent,{className:"h-4 w-4"}),title:"KDV Orani",value:`%${V().toFixed(1)}`,color:"purple"}),(0,a.jsx)(A,{icon:(0,a.jsx)(B,{className:"h-4 w-4"}),title:"Barkod",value:H(),color:"gray"})]}),(0,a.jsxs)(u.Tabs,{value:k,onValueChange:S,className:"w-full",children:[(0,a.jsxs)(u.TabsList,{className:"grid w-full grid-cols-5 mb-4",children:[(0,a.jsx)(u.TabsTrigger,{value:"info",children:"Genel Bilgiler"}),(0,a.jsx)(u.TabsTrigger,{value:"stock",children:"Stok Durumu"}),(0,a.jsx)(u.TabsTrigger,{value:"purchases",children:"Alis Gecmisi"}),(0,a.jsx)(u.TabsTrigger,{value:"sales",children:"Satis Gecmisi"}),(0,a.jsx)(u.TabsTrigger,{value:"movements",children:"Stok Hareketleri"})]}),(0,a.jsxs)(u.TabsContent,{value:"info",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Temel Bilgiler"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Urun Adi:"}),(0,a.jsx)("span",{className:"font-medium",children:T()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Kategori:"}),(0,a.jsx)("span",{className:"font-medium",children:C()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Marka:"}),(0,a.jsx)("span",{className:"font-medium",children:I()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"SKU:"}),(0,a.jsx)("span",{className:"font-medium",children:z()})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Ana Barkod:"}),(0,a.jsx)("span",{className:"font-mono font-medium",children:H()})]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Maliyet:"}),(0,a.jsxs)("span",{className:"font-medium",children:["â‚¬",R().toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Satis Fiyati:"}),(0,a.jsxs)("span",{className:"font-medium",children:["â‚¬",O().toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"KDV Orani:"}),(0,a.jsxs)("span",{className:"font-medium",children:["%",V().toFixed(1)]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Olusturulma:"}),(0,a.jsx)("span",{className:"font-medium",children:r.audit?.createdAt?.substring(0,10)||"-"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Son Guncelleme:"}),(0,a.jsx)("span",{className:"font-medium",children:r.audit?.updatedAt?.substring(0,10)||"-"})]})]})]})]}),(0,a.jsx)("div",{className:`rounded-lg border-2 p-4 ${W?"bg-amber-50 border-amber-300":"bg-gray-50 border-gray-200"}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(g.Package,{className:`h-5 w-5 ${W?"text-amber-600":"text-gray-400"}`}),(0,a.jsx)("span",{className:`font-semibold ${W?"text-amber-800":"text-gray-500"}`,children:"Kutu Barkodu:"}),W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"font-mono font-bold bg-white px-3 py-1 rounded border border-amber-200",children:Y?.barcode}),(0,a.jsxs)("span",{className:"text-amber-700",children:["Adet: ",Y?.caseQuantity||0]})]}):(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Tanimli degil"})]})}),(0,a.jsxs)("div",{className:`rounded-lg border-2 p-4 ${J?"bg-purple-50 border-purple-300":"bg-gray-50 border-gray-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)(D.Truck,{className:`h-5 w-5 ${J?"text-purple-600":"text-gray-400"}`}),(0,a.jsx)("span",{className:`font-semibold ${J?"text-purple-800":"text-gray-500"}`,children:"Tedarikci Stok Kodu:"})]}),J?(0,a.jsx)("div",{className:"flex items-center gap-4 ml-8",children:(0,a.jsxs)("div",{className:"bg-white rounded border border-purple-200 px-3 py-2",children:[(0,a.jsx)("div",{className:"text-xs text-purple-600",children:_?.supplierName}),(0,a.jsx)("div",{className:"font-mono font-bold text-purple-800",children:_?.supplierSKU}),_?.lastPurchasePrice&&(0,a.jsxs)("div",{className:"text-xs text-purple-500",children:["Son: â‚¬",_.lastPurchasePrice.toFixed(2)]})]})}):(0,a.jsx)("span",{className:"text-gray-400 italic ml-8",children:"Tedarikci stok kodu tanimli degil"})]})]}),(0,a.jsx)(u.TabsContent,{value:"stock",className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,a.jsx)(g.Package,{className:"h-5 w-5 text-amber-600"}),"Toplam Stok: ",$().toFixed(0)]}),G.length>0?(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Sube"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Mevcut"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Minimum"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Maksimum"}),(0,a.jsx)(i.TableHead,{children:"Durum"})]})}),(0,a.jsx)(i.TableBody,{children:G.map(e=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{className:"font-medium",children:e.branchName}),(0,a.jsx)(i.TableCell,{className:`text-right font-semibold ${e.currentStock<=0?"text-red-600":e.currentStock<e.minStock?"text-amber-600":""}`,children:e.currentStock.toFixed(0)}),(0,a.jsx)(i.TableCell,{className:"text-right",children:e.minStock}),(0,a.jsx)(i.TableCell,{className:"text-right",children:e.maxStock}),(0,a.jsx)(i.TableCell,{children:(0,a.jsx)(L,{current:e.currentStock,min:e.minStock})})]},e.branchId))})]}):(0,a.jsx)("p",{className:"text-gray-500 italic",children:"Sube bazli stok bilgisi yok"})]})}),(0,a.jsx)(u.TabsContent,{value:"purchases",className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(P.ShoppingCart,{className:"h-5 w-5 text-amber-600"}),"Alis Gecmisi"]})}),(0,a.jsx)("div",{className:"max-h-[300px] overflow-auto",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Tarih"}),(0,a.jsx)(i.TableHead,{children:"Tedarikci"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Birim Fiyat"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,a.jsx)(i.TableBody,{children:0===q.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Alis gecmisi bulunamadi"})}):q.map((e,s)=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{children:e.date}),(0,a.jsx)(i.TableCell,{children:e.supplierName}),(0,a.jsx)(i.TableCell,{className:"text-right",children:e.quantity.toFixed(0)}),(0,a.jsxs)(i.TableCell,{className:"text-right",children:["â‚¬",e.unitPrice.toFixed(2)]}),(0,a.jsxs)(i.TableCell,{className:"text-right font-semibold",children:["â‚¬",e.total.toFixed(2)]})]},s))})]})})]})}),(0,a.jsx)(u.TabsContent,{value:"sales",className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(U.TrendingUp,{className:"h-5 w-5 text-green-600"}),"Satis Gecmisi"]})}),(0,a.jsx)("div",{className:"max-h-[300px] overflow-auto",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{children:"Tarih"}),(0,a.jsx)(i.TableHead,{children:"Fatura No"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Birim Fiyat"}),(0,a.jsx)(i.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,a.jsx)(i.TableBody,{children:0===Q.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsx)(i.TableCell,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Satis gecmisi bulunamadi"})}):Q.map((e,s)=>(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableCell,{children:e.date}),(0,a.jsx)(i.TableCell,{className:"font-mono",children:e.invoiceNo}),(0,a.jsx)(i.TableCell,{className:"text-right",children:e.quantity.toFixed(0)}),(0,a.jsxs)(i.TableCell,{className:"text-right",children:["â‚¬",e.unitPrice.toFixed(2)]}),(0,a.jsxs)(i.TableCell,{className:"text-right font-semibold text-green-600",children:["â‚¬",e.total.toFixed(2)]})]},s))})]})})]})}),(0,a.jsx)(u.TabsContent,{value:"movements",className:"space-y-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,a.jsx)("div",{className:"p-4 border-b",children:(0,a.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)(E.TrendingDown,{className:"h-5 w-5 text-purple-600"}),"Stok Hareketleri"]})}),(0,a.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,a.jsx)(K.Clock,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,a.jsx)("p",{children:"Stok hareketleri yakinda..."})]})]})})]})]})}),(0,a.jsxs)("div",{className:"border-t pt-4 flex justify-between",children:[(0,a.jsxs)(l.Button,{variant:"outline",onClick:()=>{c&&r&&(c(r.id),t(!1))},children:[(0,a.jsx)(M.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>t(!1),children:"Kapat"})]})]})}):null}var R=e.i(29329),O=e.i(16715),V=e.i(41071),$=e.i(86536),G=e.i(55436);let Q=(0,I.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var q=e.i(63059);let Y=(0,I.default)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),W=(0,I.default)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);var _=e.i(17923),J=e.i(99602),X=e.i(75558),Z=e.i(25063),ee=e.i(30397);function ea({isActive:e}){return(0,a.jsx)("span",{className:`inline-flex items-center justify-center w-3 h-3 rounded-full ${e?"bg-green-500":"bg-red-500"}`})}function es({stock:e}){return e<=0?(0,a.jsx)("span",{className:"text-red-600 font-medium",children:e}):e<10?(0,a.jsx)("span",{className:"text-amber-600 font-medium",children:e}):(0,a.jsx)("span",{className:"text-gray-900",children:e})}function el(e,a,s,l){let t=e;for(let e of a)if(t&&"object"==typeof t&&e in t)t=t[e];else{t=void 0;break}if(null!=t)return t;let r=e[s];return null!=r?r:l}function et(){let[e,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(0),[x,u]=(0,s.useState)(0),[h,b]=(0,s.useState)(0),[N,y]=(0,s.useState)(!0),[f,k]=(0,s.useState)(!1),[S,T]=(0,s.useState)(""),[F,I]=(0,s.useState)(""),[B,D]=(0,s.useState)("all"),[P,E]=(0,s.useState)("name"),[z,K]=(0,s.useState)("asc"),[A,L]=(0,s.useState)(!1),[et,er]=(0,s.useState)(null),[ei,ec]=(0,s.useState)(!1),[en,ed]=(0,s.useState)(null),[eo,em]=(0,s.useState)(!1),[ex,eu]=(0,s.useState)({total:0,active:0,lowStock:0,totalValue:0}),eh=(0,s.useCallback)(async(e=0,a=!1)=>{a?k(!0):y(!0);try{let a=await (0,n.getProductsFiltered)({page:e,pageSize:50,search:F,category:B,sortBy:P,sortDir:z});d(a.items),m(a.total),u(a.totalPages),b(e)}catch(e){console.error("Load products error:",e)}finally{y(!1),k(!1)}},[F,B,P,z]);(0,s.useEffect)(()=>{eh(0),(0,n.getProductStats)().then(eu)},[eh]),(0,s.useEffect)(()=>{let e=setTimeout(()=>{S!==F&&(I(S),b(0))},400);return()=>clearTimeout(e)},[S,F]),(0,s.useEffect)(()=>{eh(0)},[F,B,P,z,eh]);let ep=(0,s.useMemo)(()=>{let e=[{value:"all",label:"Tum Kategoriler"}];return ee.CATEGORIES.forEach(a=>{e.push({value:a.code,label:`${a.nameTR}`,isHeader:!0}),a.subcategories.forEach(a=>{e.push({value:a.fullCode,label:`  ${a.nameTR}`})})}),e},[]),ej=async()=>{(0,n.invalidateProductsCache)(),y(!0),await eh(0),eu(await (0,n.getProductStats)())},eg=async e=>{confirm(`"${el(e,["basic","name"],"name","Urun")}" urununu silmek istediginize emin misiniz?`)&&((0,n.invalidateProductsCache)(),eh(h))},eb=e=>{P===e?K("asc"===z?"desc":"asc"):(E(e),K("asc"))},ev=e=>{e>=0&&e<x&&eh(e)},eN=({field:e})=>P!==e?(0,a.jsx)(J.ArrowUpDown,{className:"h-4 w-4 ml-1 opacity-30"}):"asc"===z?(0,a.jsx)(X.ArrowUp,{className:"h-4 w-4 ml-1"}):(0,a.jsx)(Z.ArrowDown,{className:"h-4 w-4 ml-1"});return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-[#EAE8E3]",children:[(0,a.jsxs)("div",{className:"bg-white border-b px-4 lg:px-8 py-4 space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(g.Package,{className:"h-5 w-5 sm:h-6 sm:w-6 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-lg sm:text-2xl font-bold text-gray-900",children:"Urunler"}),(0,a.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:[o," urun listeleniyor"]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:ej,disabled:N,children:[(0,a.jsx)(O.RefreshCw,{className:`h-4 w-4 sm:mr-2 ${N?"animate-spin":""}`}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Yenile"})]}),(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>em(!0),children:[(0,a.jsx)(_.BarChart3,{className:"h-4 w-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Rapor"})]}),(0,a.jsxs)(l.Button,{size:"sm",onClick:()=>{er(null),L(!0)},children:[(0,a.jsx)(p.Plus,{className:"h-4 w-4 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Yeni Urun"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-2 sm:gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 rounded-lg p-2 sm:p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Package,{className:"h-4 w-4 text-blue-600"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Toplam"})]}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-blue-600",children:ex.total})]}),(0,a.jsxs)("div",{className:"bg-green-50 rounded-lg p-2 sm:p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.TrendingUp,{className:"h-4 w-4 text-green-600"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Aktif"})]}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-green-600",children:ex.active})]}),(0,a.jsxs)("div",{className:"bg-amber-50 rounded-lg p-2 sm:p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(v.AlertTriangle,{className:"h-4 w-4 text-amber-600"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Dusuk Stok"})]}),(0,a.jsx)("p",{className:"text-lg sm:text-2xl font-bold text-amber-600",children:ex.lowStock})]}),(0,a.jsxs)("div",{className:"bg-purple-50 rounded-lg p-2 sm:p-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(w.DollarSign,{className:"h-4 w-4 text-purple-600"}),(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-600",children:"Deger"})]}),(0,a.jsxs)("p",{className:"text-lg sm:text-2xl font-bold text-purple-600",children:[(ex.totalValue/1e3).toFixed(0),"K"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-stretch sm:items-center gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(G.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Urun ara (isim, barkod, SKU)...",value:S,onChange:e=>T(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(r.Select,{value:B,onValueChange:D,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-full sm:w-[240px]",children:(0,a.jsx)(r.SelectValue,{placeholder:"Kategori"})}),(0,a.jsx)(r.SelectContent,{className:"max-h-[400px]",children:ep.map(e=>e.isHeader?(0,a.jsx)(r.SelectItem,{value:e.value,className:"font-semibold bg-gray-50",children:e.label},e.value):(0,a.jsx)(r.SelectItem,{value:e.value,className:"pl-6",children:e.label},e.value))})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:(0,a.jsx)("div",{className:"bg-white rounded-lg border overflow-x-auto",children:(0,a.jsxs)(i.Table,{children:[(0,a.jsx)(i.TableHeader,{children:(0,a.jsxs)(i.TableRow,{children:[(0,a.jsx)(i.TableHead,{className:"w-[120px]",children:"Barkod"}),(0,a.jsx)(i.TableHead,{className:"cursor-pointer hover:bg-gray-50",onClick:()=>eb("name"),children:(0,a.jsxs)("div",{className:"flex items-center",children:["Urun Adi",(0,a.jsx)(eN,{field:"name"})]})}),(0,a.jsx)(i.TableHead,{children:"Kategori"}),(0,a.jsx)(i.TableHead,{className:"text-right cursor-pointer hover:bg-gray-50",onClick:()=>eb("stock"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end",children:["Stok",(0,a.jsx)(eN,{field:"stock"})]})}),(0,a.jsx)(i.TableHead,{className:"text-right cursor-pointer hover:bg-gray-50",onClick:()=>eb("price"),children:(0,a.jsxs)("div",{className:"flex items-center justify-end",children:["Fiyat",(0,a.jsx)(eN,{field:"price"})]})}),(0,a.jsx)(i.TableHead,{className:"w-[60px] text-center",children:"Durum"}),(0,a.jsx)(i.TableHead,{className:"w-[60px]"})]})}),(0,a.jsx)(i.TableBody,{children:N?(0,a.jsx)(i.TableRow,{children:(0,a.jsxs)(i.TableCell,{colSpan:7,className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(O.RefreshCw,{className:"h-6 w-6 animate-spin mx-auto mb-2"}),"Urunler yukleniyor..."]})}):0===e.length?(0,a.jsx)(i.TableRow,{children:(0,a.jsxs)(i.TableCell,{colSpan:7,className:"text-center py-12 text-gray-500",children:[(0,a.jsx)(g.Package,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),S||"all"!==B?"Filtrelere uygun urun bulunamadi":"Henuz urun yok"]})}):e.map(e=>{let s=el(e,["barcodes","mainBarcode"],"barcode","-"),t=el(e,["basic","name"],"name","Bilinmiyor"),r=el(e,["basic","category"],"category","-"),n=el(e,["stock","totalStock"],"stock_qty",0),d=el(e,["pricing","sellPrice"],"price",0),o=el(e,["audit","isActive"],"isActive",!0);return(0,a.jsxs)(i.TableRow,{className:"hover:bg-gray-50",children:[(0,a.jsx)(i.TableCell,{className:"font-mono text-xs",children:s}),(0,a.jsx)(i.TableCell,{className:"font-medium",children:t}),(0,a.jsx)(i.TableCell,{className:"text-sm text-gray-600",children:r}),(0,a.jsx)(i.TableCell,{className:"text-right",children:(0,a.jsx)(es,{stock:n})}),(0,a.jsxs)(i.TableCell,{className:"text-right font-medium",children:[d.toFixed(2)," EUR"]}),(0,a.jsx)(i.TableCell,{className:"text-center",children:(0,a.jsx)(ea,{isActive:o})}),(0,a.jsx)(i.TableCell,{children:(0,a.jsxs)(c.DropdownMenu,{children:[(0,a.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(V.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(c.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>{ed(e),ec(!0)},children:[(0,a.jsx)($.Eye,{className:"h-4 w-4 mr-2"}),"Goruntule"]}),(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>{er(e),L(!0)},children:[(0,a.jsx)(M.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,a.jsx)(c.DropdownMenuSeparator,{}),(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>eg(e),className:"text-red-600",children:[(0,a.jsx)(j.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]})]})})]},e.id)})})]})})}),(0,a.jsxs)("div",{className:"bg-white border-t px-4 lg:px-8 py-3 flex flex-col sm:flex-row items-center justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 lg:gap-4 text-xs lg:text-sm text-gray-600",children:[(0,a.jsxs)("span",{children:["Toplam: ",o," urun"]}),S&&(0,a.jsxs)("span",{children:["| Filtreli: ",e.length]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ev(0),disabled:0===h||N,children:(0,a.jsx)(Y,{className:"h-4 w-4"})}),(0,a.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ev(h-1),disabled:0===h||N,children:(0,a.jsx)(Q,{className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"px-3 text-sm font-medium text-gray-700",children:[h+1," / ",x||1]}),(0,a.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ev(h+1),disabled:h>=x-1||N,children:(0,a.jsx)(q.ChevronRight,{className:"h-4 w-4"})}),(0,a.jsx)(l.Button,{variant:"outline",size:"icon",className:"h-8 w-8",onClick:()=>ev(x-1),disabled:h>=x-1||N,children:(0,a.jsx)(W,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(C,{open:A,onOpenChange:L,product:et,onSave:()=>{(0,n.invalidateProductsCache)(),eh(h),(0,n.getProductStats)().then(eu)}}),en&&(0,a.jsx)(H,{open:ei,onOpenChange:ec,product:en}),(0,a.jsx)(R.ReportDialog,{open:eo,onOpenChange:em})]})}e.s(["default",()=>et],136)}]);