(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";let a=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>a],78894)},7233,27612,e=>{"use strict";var a=e.i(75254);let l=(0,a.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>l],7233);let s=(0,a.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>s],27612)},24687,e=>{"use strict";var a=e.i(43476),l=e.i(71645),s=e.i(75157);let t=l.forwardRef(({className:e,...l},t)=>(0,a.jsx)("textarea",{className:(0,s.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...l}));t.displayName="Textarea",e.s(["Textarea",()=>t])},87316,e=>{"use strict";let a=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>a],87316)},77572,e=>{"use strict";var a=e.i(43476),l=e.i(71645),s=e.i(81140),t=e.i(30030),i=e.i(42727),r=e.i(96626),n=e.i(48425),c=e.i(86318),d=e.i(69340),o=e.i(10772),m="Tabs",[u,x]=(0,t.createContextScope)(m,[i.createRovingFocusGroupScope]),h=(0,i.createRovingFocusGroupScope)(),[p,g]=u(m),v=l.forwardRef((e,l)=>{let{__scopeTabs:s,value:t,onValueChange:i,defaultValue:r,orientation:u="horizontal",dir:x,activationMode:h="automatic",...g}=e,v=(0,c.useDirection)(x),[j,y]=(0,d.useControllableState)({prop:t,onChange:i,defaultProp:r??"",caller:m});return(0,a.jsx)(p,{scope:s,baseId:(0,o.useId)(),value:j,onValueChange:y,orientation:u,dir:v,activationMode:h,children:(0,a.jsx)(n.Primitive.div,{dir:v,"data-orientation":u,...g,ref:l})})});v.displayName=m;var j="TabsList",y=l.forwardRef((e,l)=>{let{__scopeTabs:s,loop:t=!0,...r}=e,c=g(j,s),d=h(s);return(0,a.jsx)(i.Root,{asChild:!0,...d,orientation:c.orientation,dir:c.dir,loop:t,children:(0,a.jsx)(n.Primitive.div,{role:"tablist","aria-orientation":c.orientation,...r,ref:l})})});y.displayName=j;var b="TabsTrigger",f=l.forwardRef((e,l)=>{let{__scopeTabs:t,value:r,disabled:c=!1,...d}=e,o=g(b,t),m=h(t),u=w(o.baseId,r),x=T(o.baseId,r),p=r===o.value;return(0,a.jsx)(i.Item,{asChild:!0,...m,focusable:!c,active:p,children:(0,a.jsx)(n.Primitive.button,{type:"button",role:"tab","aria-selected":p,"aria-controls":x,"data-state":p?"active":"inactive","data-disabled":c?"":void 0,disabled:c,id:u,...d,ref:l,onMouseDown:(0,s.composeEventHandlers)(e.onMouseDown,e=>{c||0!==e.button||!1!==e.ctrlKey?e.preventDefault():o.onValueChange(r)}),onKeyDown:(0,s.composeEventHandlers)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&o.onValueChange(r)}),onFocus:(0,s.composeEventHandlers)(e.onFocus,()=>{let e="manual"!==o.activationMode;p||c||!e||o.onValueChange(r)})})})});f.displayName=b;var N="TabsContent",S=l.forwardRef((e,s)=>{let{__scopeTabs:t,value:i,forceMount:c,children:d,...o}=e,m=g(N,t),u=w(m.baseId,i),x=T(m.baseId,i),h=i===m.value,p=l.useRef(h);return l.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,a.jsx)(r.Presence,{present:c||h,children:({present:l})=>(0,a.jsx)(n.Primitive.div,{"data-state":h?"active":"inactive","data-orientation":m.orientation,role:"tabpanel","aria-labelledby":u,hidden:!l,id:x,tabIndex:0,...o,ref:s,style:{...e.style,animationDuration:p.current?"0s":void 0},children:l&&d})})});function w(e,a){return`${e}-trigger-${a}`}function T(e,a){return`${e}-content-${a}`}S.displayName=N;var k=e.i(75157);let C=l.forwardRef(({className:e,...l},s)=>(0,a.jsx)(y,{ref:s,className:(0,k.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...l}));C.displayName=y.displayName;let I=l.forwardRef(({className:e,...l},s)=>(0,a.jsx)(f,{ref:s,className:(0,k.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...l}));I.displayName=f.displayName;let D=l.forwardRef(({className:e,...l},s)=>(0,a.jsx)(S,{ref:s,className:(0,k.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...l}));D.displayName=S.displayName,e.s(["Tabs",()=>v,"TabsContent",()=>D,"TabsList",()=>C,"TabsTrigger",()=>I],77572)},41071,e=>{"use strict";let a=(0,e.i(75254).default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>a],41071)},88699,e=>{"use strict";let a=(0,e.i(75254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);e.s(["Pencil",()=>a],88699)},82293,e=>{"use strict";let a=(0,e.i(75254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);e.s(["UserCheck",()=>a],82293)},24879,e=>{"use strict";var a=e.i(43476),l=e.i(71645),s=e.i(19455),t=e.i(93479),i=e.i(67489),r=e.i(84774),n=e.i(55146),c=e.i(69457),d=e.i(10204),o=e.i(24687),m=e.i(76639),u=e.i(77572),x=e.i(31278);let h=[{value:"admin",label:"Admin"},{value:"kasap",label:"Kasap"},{value:"kasiyer",label:"Kasiyer"},{value:"depo",label:"Depo"},{value:"depo_muduru",label:"Depo Muduru"},{value:"sofor",label:"Sofor"},{value:"finans",label:"Finans"}],p=[{value:"active",label:"Aktif"},{value:"inactive",label:"Pasif"},{value:"on_leave",label:"Izinli"},{value:"terminated",label:"Isten Ayrildi"}],g=["Merkez Depo","Atlas Mesnica","Desetka Market","Balkan Market"];function v(e,a,l,s){if(!e)return s;let t=e;for(let e of a)if(t&&"object"==typeof t&&e in t)t=t[e];else{t=void 0;break}if(null!=t)return t;let i=e[l];return null!=i?i:s}function j({open:e,onOpenChange:r,employee:n,onSave:j}){let y=!!n,[b,f]=(0,l.useState)(""),[N,S]=(0,l.useState)(""),[w,T]=(0,l.useState)(""),[k,C]=(0,l.useState)(""),[I,D]=(0,l.useState)(""),[M,F]=(0,l.useState)(""),[z,P]=(0,l.useState)(""),[L,A]=(0,l.useState)("kasiyer"),[R,E]=(0,l.useState)(""),[V,B]=(0,l.useState)(""),[O,H]=(0,l.useState)("active"),[K,$]=(0,l.useState)(""),[Y,U]=(0,l.useState)(""),[_,q]=(0,l.useState)(""),[G,W]=(0,l.useState)(""),[J,Q]=(0,l.useState)(""),[X,Z]=(0,l.useState)(""),[ee,ea]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if(e){let e=new Date().toISOString().split("T")[0];n?(f(v(n,["personal","firstName"],"firstName","")),S(v(n,["personal","lastName"],"lastName","")),T(v(n,["personal","phone"],"phone","")),C(v(n,["personal","email"],"email","")),D(v(n,["personal","address"],"address","")),F(v(n,["personal","dateOfBirth"],"dateOfBirth","")),P(v(n,["personal","nationality"],"nationality","")),A(v(n,["employment","role"],"role","kasiyer")),E(v(n,["employment","branch"],"branch","")),B(String(v(n,["employment","salary"],"salary","")||"")),H(v(n,["employment","status"],"status","active")),$(v(n,["employment","startDate"],"startDate","")),U(v(n,["documents","visaExpiry"],"visaExpiry","")),q(v(n,["documents","workPermitExpiry"],"workPermitExpiry","")),W(v(n,["documents","nationalId"],"nationalId","")),Q(v(n,["documents","taxNumber"],"taxNumber","")),Z(v(n,[],"notes",""))):(f(""),S(""),T(""),C(""),D(""),F(""),P(""),A("kasiyer"),E(""),B(""),H("active"),$(e),U(""),q(""),W(""),Q(""),Z(""))}},[e,n]);let el=async()=>{if(!b.trim())return void alert("Lutfen isim girin!");if(!N.trim())return void alert("Lutfen soyisim girin!");if(!R)return void alert("Lutfen sube secin!");ea(!0);try{let e={personal:{firstName:b.trim(),lastName:N.trim(),phone:w.trim(),email:k.trim(),address:I.trim(),dateOfBirth:M,nationality:z.trim()},employment:{role:L,branch:R,salary:parseFloat(V)||0,status:O,startDate:K},documents:{visaExpiry:Y||null,workPermitExpiry:_||null,nationalId:G.trim(),taxNumber:J.trim()},notes:X.trim(),updatedAt:new Date().toISOString()};y&&n?.id?await (0,c.updateFirestoreData)("employees",n.id,e):await (0,c.addFirestoreData)("employees",{...e,createdAt:new Date().toISOString()}),r(!1),j?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{ea(!1)}};return(0,a.jsx)(m.Dialog,{open:e,onOpenChange:r,children:(0,a.jsxs)(m.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)(m.DialogHeader,{className:"border-b pb-4",children:[(0,a.jsx)(m.DialogTitle,{className:"text-xl font-semibold",children:y?"Personel Duzenle":"Yeni Personel"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:y?"Personel bilgilerini guncelleyin":"Yeni personel eklemek icin formu doldurun"})]}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,a.jsxs)(u.Tabs,{defaultValue:"personal",className:"w-full",children:[(0,a.jsxs)(u.TabsList,{className:"grid w-full grid-cols-4 mb-4",children:[(0,a.jsx)(u.TabsTrigger,{value:"personal",children:"Kisisel"}),(0,a.jsx)(u.TabsTrigger,{value:"employment",children:"Istihdam"}),(0,a.jsx)(u.TabsTrigger,{value:"documents",children:"Belgeler"}),(0,a.jsx)(u.TabsTrigger,{value:"notes",children:"Notlar"})]}),(0,a.jsxs)(u.TabsContent,{value:"personal",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"firstName",children:"Isim *"}),(0,a.jsx)(t.Input,{id:"firstName",value:b,onChange:e=>f(e.target.value),placeholder:"Orn: Ahmet"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"lastName",children:"Soyisim *"}),(0,a.jsx)(t.Input,{id:"lastName",value:N,onChange:e=>S(e.target.value),placeholder:"Orn: Yilmaz"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"phone",children:"Telefon"}),(0,a.jsx)(t.Input,{id:"phone",value:w,onChange:e=>T(e.target.value),placeholder:"Orn: +386 40 123 456"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(t.Input,{id:"email",type:"email",value:k,onChange:e=>C(e.target.value),placeholder:"Orn: ahmet@example.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"dateOfBirth",children:"Dogum Tarihi"}),(0,a.jsx)(t.Input,{id:"dateOfBirth",type:"date",value:M,onChange:e=>F(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"nationality",children:"Uyruk"}),(0,a.jsx)(t.Input,{id:"nationality",value:z,onChange:e=>P(e.target.value),placeholder:"Orn: Turkiye"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"address",children:"Adres"}),(0,a.jsx)(o.Textarea,{id:"address",value:I,onChange:e=>D(e.target.value),placeholder:"Ikamet adresi...",rows:2})]})]}),(0,a.jsxs)(u.TabsContent,{value:"employment",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"role",children:"Rol *"}),(0,a.jsxs)(i.Select,{value:L,onValueChange:A,children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Rol secin"})}),(0,a.jsx)(i.SelectContent,{children:h.map(e=>(0,a.jsx)(i.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"branch",children:"Sube *"}),(0,a.jsxs)(i.Select,{value:R,onValueChange:E,children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Sube secin"})}),(0,a.jsx)(i.SelectContent,{children:g.map(e=>(0,a.jsx)(i.SelectItem,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"salary",children:"Maas (EUR)"}),(0,a.jsx)(t.Input,{id:"salary",type:"number",step:"0.01",value:V,onChange:e=>B(e.target.value),placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"status",children:"Durum"}),(0,a.jsxs)(i.Select,{value:O,onValueChange:H,children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Durum secin"})}),(0,a.jsx)(i.SelectContent,{children:p.map(e=>(0,a.jsx)(i.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"startDate",children:"Ise Baslama Tarihi"}),(0,a.jsx)(t.Input,{id:"startDate",type:"date",value:K,onChange:e=>$(e.target.value),className:"w-[200px]"})]})]}),(0,a.jsxs)(u.TabsContent,{value:"documents",className:"space-y-4",children:[(0,a.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:(0,a.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,a.jsx)("strong",{children:"Onemli:"})," Vize ve calisma izni bitis tarihleri yaklastikca sistem sizi uyaracaktir."]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"visaExpiry",children:"Vize Bitis Tarihi"}),(0,a.jsx)(t.Input,{id:"visaExpiry",type:"date",value:Y,onChange:e=>U(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"workPermitExpiry",children:"Calisma Izni Bitis"}),(0,a.jsx)(t.Input,{id:"workPermitExpiry",type:"date",value:_,onChange:e=>q(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"nationalId",children:"Kimlik No"}),(0,a.jsx)(t.Input,{id:"nationalId",value:G,onChange:e=>W(e.target.value),placeholder:"TC Kimlik / Pasaport No"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"taxNumber",children:"Vergi No"}),(0,a.jsx)(t.Input,{id:"taxNumber",value:J,onChange:e=>Q(e.target.value),placeholder:"Vergi numarasi"})]})]})]}),(0,a.jsx)(u.TabsContent,{value:"notes",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(o.Textarea,{id:"notes",value:X,onChange:e=>Z(e.target.value),placeholder:"Personel hakkinda ek notlar, ozel durumlar...",rows:8})]})})]})}),(0,a.jsxs)("div",{className:"border-t pt-4 flex justify-end gap-3",children:[(0,a.jsx)(s.Button,{variant:"outline",onClick:()=>r(!1),disabled:ee,children:"Iptal"}),(0,a.jsx)(s.Button,{onClick:el,disabled:ee,children:ee?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):"Personeli Kaydet"})]})]})})}var y=e.i(7233),b=e.i(16715),f=e.i(41071),N=e.i(88699),S=e.i(27612),w=e.i(86536),T=e.i(55436),k=e.i(61911),C=e.i(82293),I=e.i(78894),D=e.i(52754),M=e.i(87316),F=e.i(78583);let z={admin:"Admin",kasap:"Kasap",kasiyer:"Kasiyer",depo:"Depo",depo_muduru:"Depo Muduru",sofor:"Sofor",finans:"Finans"};function P({status:e}){return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{active:"bg-green-100 text-green-800",aktif:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-600",pasif:"bg-gray-100 text-gray-600",on_leave:"bg-amber-100 text-amber-800",izinli:"bg-amber-100 text-amber-800",terminated:"bg-red-100 text-red-800",isten_ayrildi:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-600"}`,children:{active:"Aktif",aktif:"Aktif",inactive:"Pasif",pasif:"Pasif",on_leave:"Izinli",izinli:"Izinli",terminated:"Ayrildi",isten_ayrildi:"Ayrildi"}[e]||e})}function L({expiryDate:e}){if(!e)return(0,a.jsx)("span",{className:"text-gray-400",children:"-"});let l=new Date(e),s=new Date,t=Math.ceil((l.getTime()-s.getTime())/864e5);return t<0?(0,a.jsx)("span",{className:"text-red-600 font-medium",children:"Suresi doldu!"}):t<=30?(0,a.jsxs)("span",{className:"text-amber-600 font-medium",children:[t," gun kaldi"]}):t<=90?(0,a.jsxs)("span",{className:"text-yellow-600",children:[t," gun"]}):(0,a.jsx)("span",{className:"text-gray-600",children:e})}function A(e,a,l,s){let t=e;for(let e of a)if(t&&"object"==typeof t&&e in t)t=t[e];else{t=void 0;break}if(null!=t)return t;let i=e[l];return null!=i?i:s}function R(){let[e,d]=(0,l.useState)([]),[o,m]=(0,l.useState)(!0),[u,x]=(0,l.useState)(""),[h,p]=(0,l.useState)("all"),[g,v]=(0,l.useState)("all"),[R,E]=(0,l.useState)("all"),[V,B]=(0,l.useState)(!1),[O,H]=(0,l.useState)(null);(0,l.useEffect)(()=>{m(!0);let e=(0,c.subscribeToFirestore)("employees",e=>{d(e||[]),m(!1)});return()=>e()},[]);let K=(0,l.useMemo)(()=>e.filter(e=>{let a=A(e,["personal","firstName"],"firstName",""),l=A(e,["personal","lastName"],"lastName",""),s=`${a} ${l}`.toLowerCase(),t=A(e,["personal","phone"],"phone",""),i=A(e,["personal","email"],"email",""),r=u.toLowerCase(),n=!u||s.includes(r)||t.includes(r)||i.toLowerCase().includes(r),c=A(e,["employment","role"],"role",""),d="all"===h||c===h,o=A(e,["employment","status"],"status","active"),m="all"===g||o===g,x=A(e,["employment","branch"],"branch",""),p="all"===R||x===R;return n&&d&&m&&p}),[e,u,h,g,R]),$=(0,l.useMemo)(()=>{let a=e.length,l=e.filter(e=>{let a=A(e,["employment","status"],"status","active");return"active"===a||"aktif"===a}).length;return{total:a,active:l,visaWarning:e.filter(e=>{let a=A(e,["documents","visaExpiry"],"visaExpiry",null);if(!a)return!1;let l=new Date(a),s=new Date;return 30>=Math.ceil((l.getTime()-s.getTime())/864e5)}).length,totalSalary:e.reduce((e,a)=>{let l=A(a,["employment","status"],"status","active");return"active"===l||"aktif"===l?e+A(a,["employment","salary"],"salary",0):e},0)}},[e]),Y=(0,l.useMemo)(()=>{let a=new Set;return e.forEach(e=>{let l=A(e,["employment","branch"],"branch","");l&&a.add(l)}),Array.from(a).sort()},[e]),U=(0,l.useMemo)(()=>{let a=new Set;return e.forEach(e=>{let l=A(e,["employment","role"],"role","");l&&a.add(l)}),Array.from(a).sort()},[e]),_=async e=>{try{let a=A(e,["employment","status"],"status","active"),l="active"===a||"aktif"===a?"inactive":"active";e.employment?await (0,c.updateFirestoreData)("employees",e.id,{"employment.status":l,updatedAt:new Date().toISOString()}):await (0,c.updateFirestoreData)("employees",e.id,{status:l,updatedAt:new Date().toISOString()})}catch(e){console.error("Status update error:",e),alert("Durum guncellenemedi: "+e.message)}},q=async e=>{let a=A(e,["personal","firstName"],"firstName",""),l=A(e,["personal","lastName"],"lastName",""),s=`${a} ${l}`.trim()||"Personel";if(confirm(`"${s}" personelini silmek istediginize emin misiniz?`))try{await (0,c.deleteFirestoreData)("employees",e.id)}catch(e){console.error("Delete error:",e),alert("Silme hatasi: "+e.message)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,a.jsxs)("div",{className:"bg-white border-b px-8 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Personel Yonetimi"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Calisan bilgileri, vize takibi ve maas yonetimi"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(s.Button,{variant:"outline",size:"sm",onClick:()=>{m(!0),setTimeout(()=>m(!1),500)},disabled:o,children:[(0,a.jsx)(b.RefreshCw,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Yenile"]}),(0,a.jsxs)(s.Button,{variant:"outline",size:"sm",children:[(0,a.jsx)(M.Calendar,{className:"h-4 w-4 mr-2"}),"Izin/Rapor"]}),(0,a.jsxs)(s.Button,{variant:"outline",size:"sm",className:"bg-green-600 hover:bg-green-700 text-white border-0",children:[(0,a.jsx)(D.Wallet,{className:"h-4 w-4 mr-2"}),"Toplu Maas Ode"]}),(0,a.jsxs)(s.Button,{onClick:()=>{H(null),B(!0)},children:[(0,a.jsx)(y.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Personel"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(k.Users,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam Personel"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:$.total})]})]})}),(0,a.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(C.UserCheck,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aktif Calisan"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:$.active})]})]})}),(0,a.jsx)("div",{className:"bg-amber-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-amber-100 rounded-lg",children:(0,a.jsx)(I.AlertTriangle,{className:"h-5 w-5 text-amber-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Vize Uyarisi"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-amber-600",children:$.visaWarning})]})]})}),(0,a.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(D.Wallet,{className:"h-5 w-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam Maas"}),(0,a.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:["€",$.totalSalary.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(T.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Personel ara...",value:u,onChange:e=>x(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(i.Select,{value:R,onValueChange:E,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Sube"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Tum Subeler"}),Y.map(e=>(0,a.jsx)(i.SelectItem,{value:e,children:e},e))]})]}),(0,a.jsxs)(i.Select,{value:h,onValueChange:p,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[150px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Rol"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Tum Roller"}),U.map(e=>(0,a.jsx)(i.SelectItem,{value:e,children:z[e]||e},e))]})]}),(0,a.jsxs)(i.Select,{value:g,onValueChange:v,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[150px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Tum durumlar"}),(0,a.jsx)(i.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(i.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(i.SelectItem,{value:"on_leave",children:"Izinli"})]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(r.Table,{children:[(0,a.jsx)(r.TableHeader,{children:(0,a.jsxs)(r.TableRow,{children:[(0,a.jsx)(r.TableHead,{children:"Personel"}),(0,a.jsx)(r.TableHead,{children:"Rol"}),(0,a.jsx)(r.TableHead,{children:"Sube"}),(0,a.jsx)(r.TableHead,{children:"Telefon"}),(0,a.jsx)(r.TableHead,{className:"text-right",children:"Maas"}),(0,a.jsx)(r.TableHead,{children:"Vize/Izin"}),(0,a.jsx)(r.TableHead,{children:"Durum"}),(0,a.jsx)(r.TableHead,{className:"w-[60px]"})]})}),(0,a.jsx)(r.TableBody,{children:o?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===K.length?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:u||"all"!==h||"all"!==g||"all"!==R?"Filtrelere uygun personel bulunamadi":"Henuz personel eklenmemis"})}):K.map(e=>{let l=A(e,["personal","firstName"],"firstName",""),t=A(e,["personal","lastName"],"lastName",""),i=`${l} ${t}`.trim()||"Bilinmiyor",c=A(e,["employment","role"],"role","-"),d=A(e,["employment","branch"],"branch","-"),o=A(e,["personal","phone"],"phone","-"),m=A(e,["employment","salary"],"salary",0),u=A(e,["employment","status"],"status","active"),x=A(e,["documents","visaExpiry"],"visaExpiry",null);return(0,a.jsxs)(r.TableRow,{className:"hover:bg-gray-50",children:[(0,a.jsx)(r.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)("div",{className:"h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium",children:[l.charAt(0),t.charAt(0)]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:i}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:A(e,["personal","email"],"email","")})]})]})}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:z[c]||c}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:d}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:o}),(0,a.jsxs)(r.TableCell,{className:"text-right font-medium",children:["€",m.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,a.jsx)(r.TableCell,{children:(0,a.jsx)(L,{expiryDate:x})}),(0,a.jsx)(r.TableCell,{children:(0,a.jsx)(P,{status:u})}),(0,a.jsx)(r.TableCell,{children:(0,a.jsxs)(n.DropdownMenu,{children:[(0,a.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(s.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(f.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>{H(e),B(!0)},children:[(0,a.jsx)(w.Eye,{className:"h-4 w-4 mr-2"}),"Detaylari Goruntule"]}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>{H(e),B(!0)},children:[(0,a.jsx)(N.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,a.jsxs)(n.DropdownMenuItem,{children:[(0,a.jsx)(F.FileText,{className:"h-4 w-4 mr-2"}),"Maas Gecmisi"]}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsx)(n.DropdownMenuItem,{onClick:()=>_(e),children:"active"===u||"aktif"===u?"⏸️ Pasif Yap":"▶️ Aktif Yap"}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>q(e),className:"text-red-600",children:[(0,a.jsx)(S.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]})]})})]},e.id)})})]})})}),(0,a.jsx)(j,{open:V,onOpenChange:B,employee:O,onSave:()=>B(!1)})]})}e.s(["default",()=>R],24879)}]);