(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],69638)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},76639,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(37727),l=e.i(75157);let r=s.createContext({open:!1,onOpenChange:()=>{}});function i({open:e,onOpenChange:s,children:t}){return(0,a.jsx)(r.Provider,{value:{open:e,onOpenChange:s},children:t})}function c({children:e,className:i}){let{open:c,onOpenChange:n}=s.useContext(r);return c?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>n(!1)}),(0,a.jsxs)("div",{className:(0,l.cn)("relative z-50 w-full max-w-lg max-h-[90vh] overflow-auto rounded-lg bg-background p-6 shadow-lg border",i),children:[(0,a.jsxs)("button",{onClick:()=>n(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 transition-opacity",children:[(0,a.jsx)(t.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Kapat"})]}),e]})]}):null}function n({children:e,className:s}){return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left mb-4",s),children:e})}function d({children:e,className:s}){return(0,a.jsx)("h2",{className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",s),children:e})}function o({children:e,className:s}){return(0,a.jsx)("p",{className:(0,l.cn)("text-sm text-muted-foreground",s),children:e})}function m({children:e,className:s}){return(0,a.jsx)("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6",s),children:e})}e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>o,"DialogFooter",()=>m,"DialogHeader",()=>n,"DialogTitle",()=>d])},10204,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let l=s.forwardRef(({className:e,...s},l)=>(0,a.jsx)("label",{ref:l,className:(0,t.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...s}));l.displayName="Label",e.s(["Label",()=>l])},24687,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let l=s.forwardRef(({className:e,...s},l)=>(0,a.jsx)("textarea",{className:(0,t.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...s}));l.displayName="Textarea",e.s(["Textarea",()=>l])},73884,e=>{"use strict";let a=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],73884)},88511,e=>{"use strict";let a=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],88511)},98919,e=>{"use strict";let a=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],98919)},74612,e=>{"use strict";async function a(e){try{let a=e.replace(/\s/g,"").toUpperCase(),s=a.substring(0,2),t=a.substring(2);if(!/^[A-Z]{2}[0-9A-Z]{6,12}$/.test(a))return{valid:!1,error:"Gecersiz VAT numarasi formati. Ornek: SI12345678"};let l=await fetch(`https://erp.atlasgroup.si/vies-proxy.php?country=${s}&vat=${t}`,{method:"GET",headers:{Accept:"application/json"}});if(!l.ok)throw Error(`VIES API error: ${l.status}`);let r=await l.json();return{valid:!0===r.isValid,countryCode:r.countryCode||s,vatNumber:r.vatNumber||t,companyName:r.name&&"---"!==r.name?r.name:"",companyAddress:r.address&&"---"!==r.address?r.address:"",error:r.isValid?void 0:"Gecersiz VAT numarasi"}}catch(e){return{valid:!1,error:e.message||"Dogrulama hatasi"}}}e.s(["validateVATNumber",()=>a])},63209,e=>{"use strict";let a=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},69322,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(7233),l=e.i(55436),r=e.i(16715),i=e.i(88511),c=e.i(27612),n=e.i(86536),d=e.i(61911),o=e.i(7486),m=e.i(75254);let u=(0,m.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),h=(0,m.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var x=e.i(61659),p=e.i(69638),j=e.i(73884),v=e.i(63209),g=e.i(19455),f=e.i(93479),y=e.i(15288),b=e.i(84774),N=e.i(67489),C=e.i(75157),S=e.i(69457),w=e.i(76639),k=e.i(10204),T=e.i(24687),I=e.i(31278),A=e.i(84614);let L=(0,m.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var M=e.i(98919),B=e.i(74612);let D=[{code:"SI",name:"Slovenya",flag:"ðŸ‡¸ðŸ‡®"},{code:"AT",name:"Avusturya",flag:"ðŸ‡¦ðŸ‡¹"},{code:"DE",name:"Almanya",flag:"ðŸ‡©ðŸ‡ª"},{code:"IT",name:"Ä°talya",flag:"ðŸ‡®ðŸ‡¹"},{code:"HR",name:"HÄ±rvatistan",flag:"ðŸ‡­ðŸ‡·"},{code:"TR",name:"TÃ¼rkiye",flag:"ðŸ‡¹ðŸ‡·"},{code:"FR",name:"Fransa",flag:"ðŸ‡«ðŸ‡·"},{code:"ES",name:"Ä°spanya",flag:"ðŸ‡ªðŸ‡¸"},{code:"GR",name:"Yunanistan",flag:"ðŸ‡¬ðŸ‡·"},{code:"HU",name:"Macaristan",flag:"ðŸ‡­ðŸ‡º"},{code:"CZ",name:"Ã‡ekya",flag:"ðŸ‡¨ðŸ‡¿"},{code:"SK",name:"Slovakya",flag:"ðŸ‡¸ðŸ‡°"}];function V({open:e,onOpenChange:t,customer:l,viewMode:r=!1,onSave:i,onSuccess:c}){let n=!!l?.id,[d,m]=(0,s.useState)(!1),[h,v]=(0,s.useState)(!1),[y,b]=(0,s.useState)(null),[C,V]=(0,s.useState)(""),[F,z]=(0,s.useState)(""),[G,H]=(0,s.useState)("company"),[R,E]=(0,s.useState)("active"),[K,U]=(0,s.useState)("standard"),[P,$]=(0,s.useState)(""),[O,q]=(0,s.useState)(""),[Z,X]=(0,s.useState)(""),[Y,W]=(0,s.useState)(""),[J,Q]=(0,s.useState)(""),[_,ee]=(0,s.useState)(""),[ea,es]=(0,s.useState)(""),[et,el]=(0,s.useState)("SI"),[er,ei]=(0,s.useState)("SI"),[ec,en]=(0,s.useState)(""),[ed,eo]=(0,s.useState)(""),[em,eu]=(0,s.useState)("0"),[eh,ex]=(0,s.useState)("0"),[ep,ej]=(0,s.useState)("30"),[ev,eg]=(0,s.useState)("");(0,s.useEffect)(()=>{if(l){let e=l.basic||{},a=l.contact||{},s=l.addressInfo||{},t=l.financial||{};V(e.code||l.code||""),z(e.name||l.name||l.companyName||""),H(e.type||l.type||"company"),E(e.status||l.status||"active"),U(e.customerGroup||l.customerGroup||"standard"),$(a.email||l.email||""),q(a.phone||l.phone||""),X(a.mobile||l.mobile||""),W(a.website||l.website||""),Q(s.street||l.address||""),ee(s.city||l.city||""),es(s.postalCode||l.postalCode||""),el(s.country||l.country||"SI");let r=t.vatNumber||l.vatNumber||"";if(r&&r.length>=2){let e=r.substring(0,2).toUpperCase(),a=r.substring(2);/^[A-Z]{2}$/.test(e)?(ei(e),en(a)):en(r)}else en(r);eo(t.taxNumber||l.taxNumber||""),eu(String(t.creditLimit||l.creditLimit||0)),ex(String(t.discount||l.discount||0)),ej(String(t.paymentTerms||l.paymentTerms||30)),eg(l.notes||"")}else V(""),z(""),H("company"),E("active"),U("standard"),$(""),q(""),X(""),W(""),Q(""),ee(""),es(""),el("SI"),ei("SI"),en(""),eo(""),eu("0"),ex("0"),ej("30"),eg("");b(null)},[l,e]);let ef=async()=>{if(!ec.trim()||ec.length<6)return void alert("Gecerli bir VAT numarasi giriniz");v(!0),b(null);try{let e=er+ec.trim(),a=await (0,B.validateVATNumber)(e);if(b(a),a.valid&&a.countryCode&&el(a.countryCode),a.valid&&a.companyName){if(F.trim()||z(a.companyName),a.companyAddress){let e=a.companyAddress.split("\n").filter(Boolean);if(e.length>0){J.trim()||Q(e[0]);let a=e[e.length-1]||"",s=a.match(/\b(\d{4,6})\b/);if(s&&!ea.trim()){es(s[1]);let e=a.replace(s[0],"").trim().replace(/^,?\s*/,"");e&&!_.trim()&&ee(e)}}}a.countryCode&&el(a.countryCode),H("company")}}catch(e){b({valid:!1,error:"Dogrulama hatasi"})}finally{v(!1)}},ey=async e=>{if(e.preventDefault(),!F.trim())return void alert("MÃ¼ÅŸteri adÄ± zorunludur!");m(!0);try{let e={basic:{code:C.trim()||eb(),name:F.trim(),type:G,status:R,customerGroup:K,vatNumber:ec.trim()?er+ec.trim():"",vatValidated:y?.valid||!1,vatCountry:y?.countryCode||"",vatCompanyName:y?.companyName||"",vatCheckedAt:y?.valid?new Date().toISOString():""},contact:{email:P.trim(),phone:O.trim(),mobile:Z.trim(),website:Y.trim(),address:{street:J.trim(),city:_.trim(),postalCode:ea.trim(),country:et}},financial:{currency:"EUR",creditLimit:parseFloat(em)||0,currentBalance:l?.financial?.currentBalance||l?.balance||0,discount:parseFloat(eh)||0,paymentTerms:parseInt(ep)||30},notes:ev.trim(),isActive:!0,updatedAt:new Date().toISOString(),type:{isCustomer:!0,isSupplier:!1,isBoth:!1}};n?await (0,S.updateData)(`partners/${l.id}`,e):(e.createdAt=new Date().toISOString(),await (0,S.pushData)("partners",e)),i?.(),c?.(),t(!1)}catch(e){console.error("Save error:",e),alert("KayÄ±t hatasÄ±: "+e.message)}finally{m(!1)}},eb=()=>{let e=Date.now().toString(36).toUpperCase();return`CUST-${e}`};return(0,a.jsx)(w.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(w.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(w.DialogHeader,{children:(0,a.jsxs)(w.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Building2,{className:"h-5 w-5"}),n?"MÃ¼ÅŸteri DÃ¼zenle":"Yeni MÃ¼ÅŸteri"]})}),(0,a.jsxs)("form",{onSubmit:ey,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-amber-800",children:[(0,a.jsx)(M.Shield,{className:"h-4 w-4"}),"EU VAT Dogrulama (VIES)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(N.Select,{value:er,onValueChange:e=>{ei(e),b(null)},disabled:r,children:[(0,a.jsx)(N.SelectTrigger,{className:"w-[130px] bg-white",children:(0,a.jsx)(N.SelectValue,{})}),(0,a.jsx)(N.SelectContent,{children:D.map(e=>(0,a.jsxs)(N.SelectItem,{value:e.code,children:[e.flag," ",e.code]},e.code))})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(f.Input,{value:ec,onChange:e=>{en(e.target.value.replace(/\s/g,"").toUpperCase()),b(null)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),!ec.trim()||h||r||ef())},placeholder:"12345678",className:"bg-white",disabled:r})}),(0,a.jsxs)(g.Button,{type:"button",variant:"outline",onClick:ef,disabled:h||r||!ec.trim(),className:"bg-white",children:[h?(0,a.jsx)(I.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(M.Shield,{className:"h-4 w-4 mr-2"}),"Dogrula"]})]}),y&&(0,a.jsxs)("div",{className:`p-3 rounded-lg text-sm ${y.valid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[y.valid?(0,a.jsx)(p.CheckCircle,{className:"h-4 w-4"}):(0,a.jsx)(j.XCircle,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:y.valid?"VAT Numarasi Gecerli":"VAT Numarasi Gecersiz"})]}),y.companyName&&(0,a.jsxs)("div",{className:"mt-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Sirket:"})," ",y.companyName]}),y.companyAddress&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Adres:"})," ",y.companyAddress]})]}),y.error&&(0,a.jsx)("div",{className:"mt-1 text-xs",children:y.error})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(A.User,{className:"h-4 w-4"}),"Temel Bilgiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"code",children:"MÃ¼ÅŸteri Kodu"}),(0,a.jsx)(f.Input,{id:"code",value:C,onChange:e=>V(e.target.value),placeholder:"Otomatik oluÅŸturulur"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"name",children:"MÃ¼ÅŸteri AdÄ± *"}),(0,a.jsx)(f.Input,{id:"name",value:F,onChange:e=>z(e.target.value),placeholder:"Firma veya kiÅŸi adÄ±",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"type",children:"MÃ¼ÅŸteri TÃ¼rÃ¼"}),(0,a.jsxs)(N.Select,{value:G,onValueChange:H,children:[(0,a.jsx)(N.SelectTrigger,{children:(0,a.jsx)(N.SelectValue,{})}),(0,a.jsxs)(N.SelectContent,{children:[(0,a.jsx)(N.SelectItem,{value:"company",children:"Kurumsal"}),(0,a.jsx)(N.SelectItem,{value:"individual",children:"Bireysel"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"status",children:"Durum"}),(0,a.jsxs)(N.Select,{value:R,onValueChange:E,children:[(0,a.jsx)(N.SelectTrigger,{children:(0,a.jsx)(N.SelectValue,{})}),(0,a.jsxs)(N.SelectContent,{children:[(0,a.jsx)(N.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(N.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(N.SelectItem,{value:"blocked",children:"Blokeli"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(k.Label,{htmlFor:"customerGroup",children:"MÃ¼ÅŸteri Grubu"}),(0,a.jsxs)(N.Select,{value:K,onValueChange:U,children:[(0,a.jsx)(N.SelectTrigger,{children:(0,a.jsx)(N.SelectValue,{})}),(0,a.jsxs)(N.SelectContent,{children:[(0,a.jsx)(N.SelectItem,{value:"standard",children:"Standart"}),(0,a.jsx)(N.SelectItem,{value:"vip",children:"VIP"}),(0,a.jsx)(N.SelectItem,{value:"wholesale",children:"Toptan"}),(0,a.jsx)(N.SelectItem,{value:"retail",children:"Perakende"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(u,{className:"h-4 w-4"}),"Ä°letiÅŸim Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"email",children:"E-posta"}),(0,a.jsx)(f.Input,{id:"email",type:"email",value:P,onChange:e=>$(e.target.value),placeholder:"ornek@firma.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"phone",children:"Telefon"}),(0,a.jsx)(f.Input,{id:"phone",value:O,onChange:e=>q(e.target.value),placeholder:"+386 1 234 5678"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"mobile",children:"Mobil"}),(0,a.jsx)(f.Input,{id:"mobile",value:Z,onChange:e=>X(e.target.value),placeholder:"+386 40 123 456"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"website",children:"Website"}),(0,a.jsx)(f.Input,{id:"website",value:Y,onChange:e=>W(e.target.value),placeholder:"www.firma.com"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(L,{className:"h-4 w-4"}),"Adres Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(k.Label,{htmlFor:"address",children:"Adres"}),(0,a.jsx)(f.Input,{id:"address",value:J,onChange:e=>Q(e.target.value),placeholder:"Sokak, numara"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"city",children:"Åžehir"}),(0,a.jsx)(f.Input,{id:"city",value:_,onChange:e=>ee(e.target.value),placeholder:"Ljubljana"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"postalCode",children:"Posta Kodu"}),(0,a.jsx)(f.Input,{id:"postalCode",value:ea,onChange:e=>es(e.target.value),placeholder:"1000"})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(k.Label,{htmlFor:"country",children:"Ãœlke"}),(0,a.jsxs)(N.Select,{value:et,onValueChange:el,children:[(0,a.jsx)(N.SelectTrigger,{children:(0,a.jsx)(N.SelectValue,{})}),(0,a.jsx)(N.SelectContent,{children:D.map(e=>(0,a.jsxs)(N.SelectItem,{value:e.code,children:[e.flag," ",e.name]},e.code))})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(x.CreditCard,{className:"h-4 w-4"}),"Finansal Bilgiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"creditLimit",children:"Kredi Limiti (â‚¬)"}),(0,a.jsx)(f.Input,{id:"creditLimit",type:"number",value:em,onChange:e=>eu(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"discount",children:"Ä°skonto (%)"}),(0,a.jsx)(f.Input,{id:"discount",type:"number",min:"0",max:"100",value:eh,onChange:e=>ex(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(k.Label,{htmlFor:"paymentTerms",children:"Ã–deme Vadesi (GÃ¼n)"}),(0,a.jsxs)(N.Select,{value:ep,onValueChange:ej,children:[(0,a.jsx)(N.SelectTrigger,{children:(0,a.jsx)(N.SelectValue,{})}),(0,a.jsxs)(N.SelectContent,{children:[(0,a.jsx)(N.SelectItem,{value:"0",children:"PeÅŸin"}),(0,a.jsx)(N.SelectItem,{value:"7",children:"7 GÃ¼n"}),(0,a.jsx)(N.SelectItem,{value:"15",children:"15 GÃ¼n"}),(0,a.jsx)(N.SelectItem,{value:"30",children:"30 GÃ¼n"}),(0,a.jsx)(N.SelectItem,{value:"45",children:"45 GÃ¼n"}),(0,a.jsx)(N.SelectItem,{value:"60",children:"60 GÃ¼n"}),(0,a.jsx)(N.SelectItem,{value:"90",children:"90 GÃ¼n"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(k.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(T.Textarea,{id:"notes",value:ev,onChange:e=>eg(e.target.value),placeholder:"MÃ¼ÅŸteri ile ilgili notlar...",rows:3})]}),(0,a.jsxs)(w.DialogFooter,{children:[(0,a.jsx)(g.Button,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Ä°ptal"}),(0,a.jsxs)(g.Button,{type:"submit",disabled:d,children:[d&&(0,a.jsx)(I.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),n?"GÃ¼ncelle":"Kaydet"]})]})]})]})})}let F={SI:"ðŸ‡¸ðŸ‡®",AT:"ðŸ‡¦ðŸ‡¹",DE:"ðŸ‡©ðŸ‡ª",IT:"ðŸ‡®ðŸ‡¹",HR:"ðŸ‡­ðŸ‡·",HU:"ðŸ‡­ðŸ‡º",CZ:"ðŸ‡¨ðŸ‡¿",PL:"ðŸ‡µðŸ‡±",FR:"ðŸ‡«ðŸ‡·",NL:"ðŸ‡³ðŸ‡±",BE:"ðŸ‡§ðŸ‡ª",TR:"ðŸ‡¹ðŸ‡·",ES:"ðŸ‡ªðŸ‡¸",GR:"ðŸ‡¬ðŸ‡·",SK:"ðŸ‡¸ðŸ‡°"},z={active:{label:"Aktif",color:"bg-green-100 text-green-700",icon:p.CheckCircle},inactive:{label:"Pasif",color:"bg-gray-100 text-gray-700",icon:j.XCircle},blocked:{label:"Blokeli",color:"bg-red-100 text-red-700",icon:v.AlertCircle}},G={individual:{label:"Bireysel",icon:d.Users},company:{label:"Kurumsal",icon:o.Building2}};function H(){let[e,o]=(0,s.useState)([]),[m,j]=(0,s.useState)(!0),[w,k]=(0,s.useState)(""),[T,I]=(0,s.useState)("all"),[A,L]=(0,s.useState)("all"),[M,B]=(0,s.useState)(!1),[D,H]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=(0,S.subscribeToRTDB)("partners",e=>{o(e.filter(e=>{let a=e.type?.isCustomer||e.basic?.partnerTypes?.isCustomer,s=!1!==e.isActive&&e.basic?.status!=="deleted";return a&&s}).sort((e,a)=>{let s=e.basic?.name||e.name||e.companyName||"",t=a.basic?.name||a.name||a.companyName||"";return s.localeCompare(t)})),j(!1)});return()=>e()},[]);let R=(e,a)=>{if(void 0!==e[a])return e[a];let s={code:["basic","code"],name:["basic","name"],type:["basic","type"],status:["basic","status"],customerGroup:["basic","customerGroup"],email:["contact","email"],phone:["contact","phone"],mobile:["contact","mobile"],address:["addressInfo","street"],city:["addressInfo","city"],country:["addressInfo","country"],postalCode:["addressInfo","postalCode"],vatNumber:["financial","vatNumber"],taxNumber:["financial","taxNumber"],balance:["financial","balance"],creditLimit:["financial","creditLimit"],discount:["financial","discount"],paymentTerms:["financial","paymentTerms"]}[a];if(s){let[a,t]=s;return e[a]?.[t]}},E=e.filter(e=>{let a=R(e,"name")||R(e,"companyName")||"",s=R(e,"code")||"",t=R(e,"email")||"",l=R(e,"phone")||"",r=R(e,"status")||"active",i=R(e,"type")||"company",c=a.toLowerCase().includes(w.toLowerCase())||s.toLowerCase().includes(w.toLowerCase())||t.toLowerCase().includes(w.toLowerCase())||l.includes(w),n="all"===T||r===T,d="all"===A||i===A;return c&&n&&d}),K={total:e.length,active:e.filter(e=>"active"===(R(e,"status")||"active")).length,blocked:e.filter(e=>"blocked"===R(e,"status")).length,totalBalance:e.reduce((e,a)=>e+(R(a,"balance")||0),0)},U=e=>{H(e),B(!0)},P=async e=>{let a=R(e,"name")||R(e,"companyName")||"Bu mÃ¼ÅŸteri";if(confirm(`"${a}" m\xfcÅŸterisini silmek istediÄŸinize emin misiniz?`))try{await (0,S.removeData)(`partners/${e.id}`)}catch(e){console.error("Delete error:",e),alert("Silme hatasÄ±: "+e.message)}};return m?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.RefreshCw,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"MÃ¼ÅŸteriler yÃ¼kleniyor..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"MÃ¼ÅŸteriler"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"MÃ¼ÅŸteri kayÄ±tlarÄ±nÄ± yÃ¶netin ve takip edin"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g.Button,{variant:"outline",size:"icon",onClick:()=>{j(!0),setTimeout(()=>j(!1),500)},children:(0,a.jsx)(r.RefreshCw,{className:`h-4 w-4 ${m?"animate-spin":""}`})}),(0,a.jsxs)(g.Button,{onClick:()=>{H(null),B(!0)},children:[(0,a.jsx)(t.Plus,{className:"h-4 w-4 mr-2"}),"Yeni MÃ¼ÅŸteri"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(y.Card,{children:(0,a.jsx)(y.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam MÃ¼ÅŸteri"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:K.total})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-100 flex items-center justify-center",children:(0,a.jsx)(d.Users,{className:"h-6 w-6 text-amber-600"})})]})})}),(0,a.jsx)(y.Card,{children:(0,a.jsx)(y.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aktif MÃ¼ÅŸteri"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:K.active})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(p.CheckCircle,{className:"h-6 w-6 text-green-600"})})]})})}),(0,a.jsx)(y.Card,{children:(0,a.jsx)(y.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blokeli"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:K.blocked})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)(v.AlertCircle,{className:"h-6 w-6 text-red-600"})})]})})}),(0,a.jsx)(y.Card,{children:(0,a.jsx)(y.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam Bakiye"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(0,C.formatCurrency)(K.totalBalance)})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)(x.CreditCard,{className:"h-6 w-6 text-purple-600"})})]})})})]}),(0,a.jsx)(y.Card,{children:(0,a.jsx)(y.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(f.Input,{placeholder:"MÃ¼ÅŸteri ara (isim, kod, email, telefon)...",value:w,onChange:e=>k(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(N.Select,{value:T,onValueChange:I,children:[(0,a.jsx)(N.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(N.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(N.SelectContent,{children:[(0,a.jsx)(N.SelectItem,{value:"all",children:"TÃ¼m Durumlar"}),(0,a.jsx)(N.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(N.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(N.SelectItem,{value:"blocked",children:"Blokeli"})]})]}),(0,a.jsxs)(N.Select,{value:A,onValueChange:L,children:[(0,a.jsx)(N.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(N.SelectValue,{placeholder:"TÃ¼r"})}),(0,a.jsxs)(N.SelectContent,{children:[(0,a.jsx)(N.SelectItem,{value:"all",children:"TÃ¼m TÃ¼rler"}),(0,a.jsx)(N.SelectItem,{value:"individual",children:"Bireysel"}),(0,a.jsx)(N.SelectItem,{value:"company",children:"Kurumsal"})]})]})]})})}),(0,a.jsxs)(y.Card,{children:[(0,a.jsx)(y.CardHeader,{children:(0,a.jsxs)(y.CardTitle,{className:"text-lg font-medium",children:["MÃ¼ÅŸteri Listesi",(0,a.jsxs)("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",E.length," kayÄ±t)"]})]})}),(0,a.jsx)(y.CardContent,{children:(0,a.jsxs)(b.Table,{children:[(0,a.jsx)(b.TableHeader,{children:(0,a.jsxs)(b.TableRow,{children:[(0,a.jsx)(b.TableHead,{children:"Kod"}),(0,a.jsx)(b.TableHead,{children:"MÃ¼ÅŸteri AdÄ±"}),(0,a.jsx)(b.TableHead,{children:"TÃ¼r"}),(0,a.jsx)(b.TableHead,{children:"Ä°letiÅŸim"}),(0,a.jsx)(b.TableHead,{children:"Ãœlke / Åžehir"}),(0,a.jsx)(b.TableHead,{className:"text-right",children:"Bakiye"}),(0,a.jsx)(b.TableHead,{children:"Durum"}),(0,a.jsx)(b.TableHead,{className:"w-[100px]",children:"Ä°ÅŸlem"})]})}),(0,a.jsx)(b.TableBody,{children:0===E.length?(0,a.jsx)(b.TableRow,{children:(0,a.jsxs)(b.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,a.jsx)(d.Users,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"MÃ¼ÅŸteri bulunamadÄ±"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"HenÃ¼z mÃ¼ÅŸteri eklenmemiÅŸ veya arama kriterlerine uygun sonuÃ§ yok."})]})}):E.map(e=>{let s=R(e,"code")||"-",t=R(e,"name")||R(e,"companyName")||"-",l=R(e,"type")||"company",r=R(e,"email")||"",d=R(e,"phone")||R(e,"mobile")||"",o=R(e,"country")||"",m=R(e,"city")||"",x=R(e,"balance")||0,p=z[R(e,"status")||"active"]||z.active,j=G[l]||G.company,v=p.icon,f=j.icon;return(0,a.jsxs)(b.TableRow,{children:[(0,a.jsx)(b.TableCell,{className:"font-mono text-sm",children:s}),(0,a.jsx)(b.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:t})]})}),(0,a.jsx)(b.TableCell,{children:j.label}),(0,a.jsx)(b.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[r&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(h,{className:"h-3 w-3"}),r]}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(u,{className:"h-3 w-3"}),d]})]})}),(0,a.jsx)(b.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:F[o]||o}),(0,a.jsx)("span",{children:m||"-"})]})}),(0,a.jsx)(b.TableCell,{className:"text-right font-mono",children:(0,a.jsx)("span",{className:x<0?"text-red-600":"",children:(0,C.formatCurrency)(x)})}),(0,a.jsx)(b.TableCell,{children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${p.color}`,children:[(0,a.jsx)(v,{className:"h-3 w-3"}),p.label]})}),(0,a.jsx)(b.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>U(e),children:(0,a.jsx)(n.Eye,{className:"h-4 w-4"})}),(0,a.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>U(e),children:(0,a.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(g.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>P(e),children:(0,a.jsx)(c.Trash2,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),(0,a.jsx)(V,{open:M,onOpenChange:B,customer:D,onSave:()=>B(!1)})]})}e.s(["default",()=>H],69322)}]);