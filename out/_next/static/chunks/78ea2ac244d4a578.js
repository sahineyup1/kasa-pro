(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],69638)},93479,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(75157);let i=s.forwardRef(({className:e,type:s,...i},t)=>(0,a.jsx)("input",{type:s,className:(0,r.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...i}));i.displayName="Input",e.s(["Input",()=>i])},31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},7486,e=>{"use strict";let a=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>a],7486)},73884,e=>{"use strict";let a=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],73884)},98919,e=>{"use strict";let a=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],98919)},18566,(e,a,s)=>{a.exports=e.r(76562)},6355,e=>{"use strict";var a=e.i(69457);let s=[{id:"u1",username:"muhammed.aliisik",password:"Atlas2025!",fullName:"Muhammed Ali Isik",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u2",username:"erol.bakirkaya",password:"Atlas2025!",fullName:"Erol Bakirkaya",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u3",username:"mehmet.yazici",password:"Atlas2025!",fullName:"Mehmet Yazici",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u4",username:"eyup.sahin",password:"Atlas2025!",fullName:"Eyup Sahin",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u5",username:"mustafa.senturk",password:"Atlas2025!",fullName:"Mustafa Senturk",role:"depo_muduru",branchId:"merkez",branchName:"Merkez Depo",status:"active"},{id:"u6",username:"halit.isik",password:"Atlas2025!",fullName:"Halit Isik",role:"depo_muduru",branchId:"merkez",branchName:"Merkez Depo",status:"active"},{id:"u7",username:"senaide.ruslanov",password:"Atlas2025!",fullName:"Senaide Ruslanov",role:"finans",branchId:"merkez",branchName:"Merkez Depo",status:"active"},{id:"u8",username:"mert.demir",password:"Atlas2025!",fullName:"Mert Demir",role:"sofor",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"},{id:"u9",username:"banu.senturk",password:"Kasiyer2025!",fullName:"Banu Senturk",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u10",username:"nazan.bakirkaya",password:"Kasiyer2025!",fullName:"Nazan Bakirkaya",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u11",username:"sema.yazici",password:"Kasiyer2025!",fullName:"Sema Yazici",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u12",username:"meryem.isik",password:"Kasiyer2025!",fullName:"Meryem Isik",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u13",username:"yasemin.ince",password:"Kasiyer2025!",fullName:"Yasemin Ince",role:"kasiyer",branchId:"desetka",branchName:"Desetka Market",status:"active"},{id:"u14",username:"ismail.aga",password:"Kasiyer2025!",fullName:"Ismail Aga",role:"kasiyer",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"},{id:"u15",username:"burak.uzun",password:"Kasap2025!",fullName:"Burak Uzun",role:"kasap",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u16",username:"adem.ayhan",password:"Kasap2025!",fullName:"Adem Ayhan",role:"kasap",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"},{id:"u17",username:"sevket.sucuk",password:"Kasap2025!",fullName:"Sevket Sucuk",role:"kasap",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"}];function r(e){let a=0,s="kasa_pro_2024_salt",r=s+e+s;for(let e=0;e<r.length;e++)a=(a<<5)-a+r.charCodeAt(e),a&=a;return"h$"+Math.abs(a).toString(36)+"_"+e.length}async function i(e,i){try{console.log("Authenticating user:",e);let t=s.find(a=>a.username.toLowerCase()===e.toLowerCase());if(t){if(console.log("System user found:",t.username),t.password===i)return console.log("Password match for system user"),{success:!0,user:{...t,password:""}};return console.log("Password mismatch for system user"),{success:!1,error:"Yanlis sifre"}}console.log("Checking Firestore users...");let l=await (0,a.getFirestoreData)("users");if(l&&l.length>0){let a=l.find(a=>a.username?.toLowerCase()===e.toLowerCase()||a.email?.toLowerCase()===e.toLowerCase());if(a){if(a.status&&"active"!==a.status&&"aktif"!==a.status)return{success:!1,error:"Bu hesap devre disi birakilmis"};let e=a.password||a.sifre;if(e===i||r(i)===e)return{success:!0,user:{...a,password:""}};return{success:!1,error:"Yanlis sifre"}}}console.log("Checking Firestore employees...");let n=await (0,a.getFirestoreData)("employees");if(n&&n.length>0){let a=n.find(a=>{let s=a.username||a.email||a.personal?.email;return s?.toLowerCase()===e.toLowerCase()});if(a){let s=a.password||a.sifre;if(s&&(s===i||r(i)===s))return{success:!0,user:{id:a.id,username:e,password:"",fullName:`${a.firstName||a.personal?.firstName||""} ${a.lastName||a.personal?.lastName||""}`.trim()||e,role:a.role||a.employment?.role||"user",branchId:a.branchId||a.employment?.branchId,branchName:a.branch||a.employment?.branch,status:a.status||a.employment?.status||"active"}}}}return{success:!1,error:"Kullanici bulunamadi veya sifre yanlis"}}catch(e){return console.error("Authentication error:",e),{success:!1,error:"Dogrulama sirasinda bir hata olustu: "+e.message}}}e.s(["authenticateUser",()=>i,"hashPassword",()=>r])},70307,e=>{"use strict";var a=e.i(43476),s=e.i(71645),r=e.i(18566),i=e.i(7486),t=e.i(98919),l=e.i(31278),n=e.i(69638),u=e.i(73884);let c=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var d=e.i(19455),m=e.i(93479),o=e.i(15288),h=e.i(69457),p=e.i(6355);function b(){let e=(0,r.useRouter)(),[b,f]=(0,s.useState)("checking"),[x,y]=(0,s.useState)("admin"),[k,g]=(0,s.useState)(""),[N,v]=(0,s.useState)(""),[w,j]=(0,s.useState)("Administrator"),[C,S]=(0,s.useState)(!1),[I,A]=(0,s.useState)(""),[M,z]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,h.getFirestoreData)("users");e&&Array.isArray(e)&&e.length>0?f("exists"):f("setup")}catch(e){console.error("Error checking users:",e),f("setup")}})()},[]);let K=async a=>{if(a.preventDefault(),A(""),!x.trim())return void A("Kullanici adi gereklidir");if(k.length<6)return void A("Sifre en az 6 karakter olmalidir");if(k!==N)return void A("Sifreler eslesmiyor");S(!0);try{let a=(0,p.hashPassword)(k);await (0,h.addFirestoreData)("users",{username:x.trim().toLowerCase(),password:a,fullName:w.trim()||"Administrator",role:"admin",status:"active",permissions:["all"],branchId:"all",branchName:"Tum Subeler"}),z(!0),setTimeout(()=>{e.push("/")},3e3)}catch(e){console.error("Setup error:",e),A("Kullanici olusturulurken hata: "+e.message)}finally{S(!1)}};return"checking"===b?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Sistem kontrol ediliyor..."})]})}):"exists"===b?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:(0,a.jsxs)(o.Card,{className:"w-full max-w-md shadow-xl",children:[(0,a.jsxs)(o.CardHeader,{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:(0,a.jsx)(n.CheckCircle,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)(o.CardTitle,{children:"Sistem Hazir"}),(0,a.jsx)(o.CardDescription,{children:"Kullanici veritabaninda kayitli kullanicilar mevcut. Giris yaparak devam edebilirsiniz."})]}),(0,a.jsx)(o.CardContent,{children:(0,a.jsx)(d.Button,{onClick:()=>e.push("/"),className:"w-full",children:"Giris Sayfasina Git"})})]})}):M?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:(0,a.jsxs)(o.Card,{className:"w-full max-w-md shadow-xl",children:[(0,a.jsxs)(o.CardHeader,{className:"text-center",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:(0,a.jsx)(n.CheckCircle,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)(o.CardTitle,{children:"Kurulum Tamamlandi!"}),(0,a.jsx)(o.CardDescription,{children:"Admin kullanici basariyla olusturuldu. Giris sayfasina yonlendiriliyorsunuz..."})]}),(0,a.jsx)(o.CardContent,{children:(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-sm",children:[(0,a.jsx)("p",{className:"font-medium text-green-800",children:"Giris Bilgileriniz:"}),(0,a.jsxs)("p",{className:"text-green-700 mt-1",children:["Kullanici: ",x]}),(0,a.jsx)("p",{className:"text-green-700",children:"Sifre: (belirlediginiz sifre)"})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:(0,a.jsxs)("div",{className:"w-full max-w-md",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl shadow-lg shadow-primary/25 mb-4",children:(0,a.jsx)(i.Building2,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Atlas ERP"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Ilk Kurulum"})]}),(0,a.jsxs)(o.Card,{className:"shadow-xl",children:[(0,a.jsxs)(o.CardHeader,{children:[(0,a.jsxs)(o.CardTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(c,{className:"w-5 h-5"}),"Admin Kullanici Olustur"]}),(0,a.jsx)(o.CardDescription,{children:"Sisteme giris yapabilmek icin bir admin kullanicisi olusturun. Bu bilgileri guvenli bir yerde saklayin."})]}),(0,a.jsxs)(o.CardContent,{children:[(0,a.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[I&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm flex items-center gap-2",children:[(0,a.jsx)(u.XCircle,{className:"w-4 h-4"}),I]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Kullanici Adi"}),(0,a.jsx)(m.Input,{type:"text",value:x,onChange:e=>y(e.target.value),placeholder:"admin",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Ad Soyad"}),(0,a.jsx)(m.Input,{type:"text",value:w,onChange:e=>j(e.target.value),placeholder:"Administrator"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Sifre"}),(0,a.jsx)(m.Input,{type:"password",value:k,onChange:e=>g(e.target.value),placeholder:"En az 6 karakter",required:!0,minLength:6})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium",children:"Sifre Tekrar"}),(0,a.jsx)(m.Input,{type:"password",value:N,onChange:e=>v(e.target.value),placeholder:"Sifreyi tekrar girin",required:!0})]}),(0,a.jsx)(d.Button,{type:"submit",className:"w-full",disabled:C,children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Olusturuluyor..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.Shield,{className:"mr-2 h-4 w-4"}),"Admin Olustur"]})})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,a.jsxs)("p",{className:"text-xs text-amber-700",children:[(0,a.jsx)("strong",{children:"Onemli:"})," Bu sayfa sadece ilk kurulumda kullanilmalidir. Kurulum tamamlandiktan sonra bu sayfaya erisim devre disi birakilacaktir."]})})]})]})]})})}e.s(["default",()=>b],70307)}]);