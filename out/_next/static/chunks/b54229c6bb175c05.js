(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},15288,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(75157);let r=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",e),...a}));r.displayName="Card";let l=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...a}));l.displayName="CardHeader";let i=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("h3",{ref:r,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...a}));i.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("p",{ref:r,className:(0,s.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",a.forwardRef(({className:e,...a},r)=>(0,t.jsx)("div",{ref:r,className:(0,s.cn)("flex items-center p-6 pt-0",e),...a})).displayName="CardFooter",e.s(["Card",()=>r,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>l,"CardTitle",()=>i])},22858,95116,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("fuel",[["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 4 0v-6.998a2 2 0 0 0-.59-1.42L18 5",key:"1wtuz0"}],["path",{d:"M14 21V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16",key:"e09ifn"}],["path",{d:"M2 21h13",key:"1x0fut"}],["path",{d:"M3 9h11",key:"1p7c0w"}]]);e.s(["Fuel",()=>a],22858);let s=(0,t.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);e.s(["Wrench",()=>s],95116)},30257,e=>{"use strict";var t=e.i(43476),a=e.i(71645),s=e.i(50627),r=e.i(5125),l=e.i(1928),i=e.i(22858),d=e.i(95116),n=e.i(31278),c=e.i(78894),o=e.i(15288),m=e.i(75157),x=e.i(69457);function u(){let[e,u]=(0,a.useState)(!0),[h,p]=(0,a.useState)({expenseCount:0,expenseTotal:0,vehicleCount:0,fuelTotal:0,maintenanceTotal:0,purchaseInvoiceCount:0,purchaseInvoiceTotal:0,unpaidInvoices:0}),[f,j]=(0,a.useState)([]),[g,N]=(0,a.useState)([]);return((0,a.useEffect)(()=>{let e=0,t=()=>{++e>=5&&u(!1)},a=(0,x.subscribeToData)("expenses",e=>{if(e){let t=Object.entries(e).map(([e,t])=>({id:e,...t})),a=t.reduce((e,t)=>e+(t.totalAmount||0),0);p(e=>({...e,expenseCount:t.length,expenseTotal:a})),j([...t].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).slice(0,5))}t()}),s=(0,x.subscribeToData)("vehicles",e=>{if(e){let t=Object.entries(e).map(([e,t])=>({id:e,...t}));p(e=>({...e,vehicleCount:t.length}));let a=[],s=new Date;t.forEach(e=>{if(e.insuranceExpiry){let t=new Date(e.insuranceExpiry);t.getTime()-s.getTime()<2592e6&&t.getTime()>s.getTime()&&a.push({plate:e.plate,type:"Sigorta",date:e.insuranceExpiry})}if(e.kaskoExpiry){let t=new Date(e.kaskoExpiry);t.getTime()-s.getTime()<2592e6&&t.getTime()>s.getTime()&&a.push({plate:e.plate,type:"Kasko",date:e.kaskoExpiry})}}),N(a)}t()}),r=(0,x.subscribeToData)("vehicle_fuel",e=>{if(e){let t=Object.values(e).reduce((e,t)=>e+(t.totalAmount||0),0);p(e=>({...e,fuelTotal:t}))}t()}),l=(0,x.subscribeToData)("vehicle_maintenance",e=>{if(e){let t=Object.values(e).reduce((e,t)=>e+(t.cost||0),0);p(e=>({...e,maintenanceTotal:t}))}t()}),i=(0,x.subscribeToData)("purchase_invoices",e=>{if(e){let t=Object.values(e),a=t.reduce((e,t)=>e+(t.total||0),0),s=t.filter(e=>"unpaid"===e.paymentStatus).length;p(e=>({...e,purchaseInvoiceCount:t.length,purchaseInvoiceTotal:a,unpaidInvoices:s}))}t()});return()=>{a(),s(),r(),l(),i()}},[]),e)?(0,t.jsxs)("div",{className:"flex items-center justify-center h-96",children:[(0,t.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,t.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Veriler yükleniyor..."})]}):(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Hoş geldiniz! İşte güncel özet."})]}),g.length>0&&(0,t.jsx)(o.Card,{className:"border-yellow-200 bg-yellow-50",children:(0,t.jsx)(o.CardContent,{className:"pt-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(c.AlertTriangle,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-medium text-yellow-800",children:"Yaklaşan Bitiş Tarihleri"}),(0,t.jsx)("ul",{className:"mt-1 text-sm text-yellow-700 space-y-1",children:g.map((e,a)=>(0,t.jsxs)("li",{children:[(0,t.jsx)("span",{className:"font-medium",children:e.plate})," - ",e.type,": ",(0,m.formatDate)(e.date)]},a))})]})]})})}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Masraf Fişleri"}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-orange-100",children:(0,t.jsx)(s.Receipt,{className:"h-4 w-4 text-orange-600"})})]}),(0,t.jsxs)(o.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h.expenseCount}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Toplam: ",(0,m.formatCurrency)(h.expenseTotal)]})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Araçlar"}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,t.jsx)(r.Car,{className:"h-4 w-4 text-blue-600"})})]}),(0,t.jsxs)(o.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h.vehicleCount}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Kayıtlı araç"})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Yakıt Gideri"}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-amber-100",children:(0,t.jsx)(i.Fuel,{className:"h-4 w-4 text-amber-600"})})]}),(0,t.jsxs)(o.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(0,m.formatCurrency)(h.fuelTotal)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Toplam yakıt"})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Bakım Gideri"}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-purple-100",children:(0,t.jsx)(d.Wrench,{className:"h-4 w-4 text-purple-600"})})]}),(0,t.jsxs)(o.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:(0,m.formatCurrency)(h.maintenanceTotal)}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Toplam bakım"})]})]})]}),(0,t.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,t.jsx)(o.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Alış Faturaları"}),(0,t.jsx)("div",{className:"p-2 rounded-lg bg-emerald-100",children:(0,t.jsx)(l.ShoppingCart,{className:"h-4 w-4 text-emerald-600"})})]}),(0,t.jsxs)(o.CardContent,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold",children:h.purchaseInvoiceCount}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Toplam: ",(0,m.formatCurrency)(h.purchaseInvoiceTotal)]}),h.unpaidInvoices>0&&(0,t.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[h.unpaidInvoices," adet ödenmemiş fatura"]})]})]}),(0,t.jsxs)(o.Card,{children:[(0,t.jsxs)(o.CardHeader,{children:[(0,t.jsx)(o.CardTitle,{children:"Son Masraflar"}),(0,t.jsx)(o.CardDescription,{children:"En son eklenen masraf fişleri"})]}),(0,t.jsx)(o.CardContent,{children:(0,t.jsx)("div",{className:"space-y-4",children:0===f.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Henüz masraf fişi yok"}):f.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,t.jsx)(s.Receipt,{className:"h-4 w-4 text-primary"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:e.vendor||"Bilinmeyen"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,m.formatDate)(e.date)})]})]}),(0,t.jsx)("span",{className:"font-semibold",children:(0,m.formatCurrency)(e.totalAmount||0)})]},e.id))})})]})]})]})}e.s(["default",()=>u])}]);