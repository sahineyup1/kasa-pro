(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(75157);let a=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",e),...t}));a.displayName="Card";let i=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",e),...t}));i.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("h3",{ref:a,className:(0,s.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("p",{ref:a,className:(0,s.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let d=t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("p-6 pt-0",e),...t}));d.displayName="CardContent",t.forwardRef(({className:e,...t},a)=>(0,r.jsx)("div",{ref:a,className:(0,s.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>d,"CardDescription",()=>n,"CardHeader",()=>i,"CardTitle",()=>l])},98919,e=>{"use strict";let r=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>r],98919)},19455,20783,91918,93479,e=>{"use strict";let r,t;var s=e.i(43476),a=e.i(71645);function i(e,r){if("function"==typeof e)return e(r);null!=e&&(e.current=r)}function l(...e){return r=>{let t=!1,s=e.map(e=>{let s=i(e,r);return t||"function"!=typeof s||(t=!0),s});if(t)return()=>{for(let r=0;r<s.length;r++){let t=s[r];"function"==typeof t?t():i(e[r],null)}}}}function n(...e){return a.useCallback(l(...e),e)}e.s(["composeRefs",()=>l,"useComposedRefs",()=>n],20783);var d=Symbol.for("react.lazy"),c=a[" use ".trim().toString()];function o(e){var r;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===d&&"_payload"in e&&"object"==typeof(r=e._payload)&&null!==r&&"then"in r}function u(e){var r;let t,i=(r=e,(t=a.forwardRef((e,r)=>{let{children:t,...s}=e;if(o(t)&&"function"==typeof c&&(t=c(t._payload)),a.isValidElement(t)){var i;let e,n,d=(i=t,(n=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(n=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),c=function(e,r){let t={...r};for(let s in r){let a=e[s],i=r[s];/^on[A-Z]/.test(s)?a&&i?t[s]=(...e)=>{let r=i(...e);return a(...e),r}:a&&(t[s]=a):"style"===s?t[s]={...a,...i}:"className"===s&&(t[s]=[a,i].filter(Boolean).join(" "))}return{...e,...t}}(s,t.props);return t.type!==a.Fragment&&(c.ref=r?l(r,d):d),a.cloneElement(t,c)}return a.Children.count(t)>1?a.Children.only(null):null})).displayName=`${r}.SlotClone`,t),n=a.forwardRef((e,r)=>{let{children:t,...l}=e;o(t)&&"function"==typeof c&&(t=c(t._payload));let n=a.Children.toArray(t),d=n.find(h);if(d){let e=d.props.children,t=n.map(r=>r!==d?r:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,s.jsx)(i,{...l,ref:r,children:a.isValidElement(e)?a.cloneElement(e,void 0,t):null})}return(0,s.jsx)(i,{...l,ref:r,children:t})});return n.displayName=`${e}.Slot`,n}var m=u("Slot"),f=Symbol("radix.slottable");function h(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===f}e.s(["Slot",()=>m,"createSlot",()=>u],91918);var p=e.i(7670);let x=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,y=p.clsx;var g=e.i(75157);let b=(r="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-6",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}},e=>{var s;if((null==t?void 0:t.variants)==null)return y(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:a,defaultVariants:i}=t,l=Object.keys(a).map(r=>{let t=null==e?void 0:e[r],s=null==i?void 0:i[r];if(null===t)return null;let l=x(t)||x(s);return a[r][l]}),n=e&&Object.entries(e).reduce((e,r)=>{let[t,s]=r;return void 0===s||(e[t]=s),e},{});return y(r,l,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,r)=>{let{class:t,className:s,...a}=r;return Object.entries(a).every(e=>{let[r,t]=e;return Array.isArray(t)?t.includes({...i,...n}[r]):({...i,...n})[r]===t})?[...e,t,s]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),v=a.forwardRef(({className:e,variant:r,size:t,asChild:a=!1,...i},l)=>(0,s.jsx)(a?m:"button",{className:(0,g.cn)(b({variant:r,size:t,className:e})),ref:l,...i}));v.displayName="Button",e.s(["Button",()=>v],19455);let j=a.forwardRef(({className:e,type:r,...t},a)=>(0,s.jsx)("input",{type:r,className:(0,g.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));j.displayName="Input",e.s(["Input",()=>j],93479)},31278,e=>{"use strict";let r=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>r],31278)},7486,e=>{"use strict";let r=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>r],7486)},69638,e=>{"use strict";let r=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>r],69638)},73884,e=>{"use strict";let r=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>r],73884)},18566,(e,r,t)=>{r.exports=e.r(76562)},6355,e=>{"use strict";var r=e.i(69457);function t(e){let r=0,t="kasa_pro_2024_salt",s=t+e+t;for(let e=0;e<s.length;e++)r=(r<<5)-r+s.charCodeAt(e),r&=r;return"h$"+Math.abs(r).toString(36)+"_"+e.length}async function s(e,s){try{console.log("Authenticating user:",e);let a=await (0,r.getFirestoreData)("users");if(console.log("Found users:",a?.length||0),!a||0===a.length){console.log("Trying employees collection...");let a=await (0,r.getFirestoreData)("employees");if(!a||0===a.length)return{success:!1,error:"Kullanici veritabani bos. Lutfen yonetici ile iletisime gecin."};let i=a.find(r=>{let t=r.username||r.email||r.personal?.email;return t?.toLowerCase()===e.toLowerCase()});if(!i)return{success:!1,error:"Kullanici bulunamadi"};let l=i.password||i.sifre;if(!l)return{success:!1,error:"Bu kullanicinin sifresi tanimlanmamis"};if(l!==s&&t(s)!==l)return{success:!1,error:"Yanlis sifre"};return{success:!0,user:{id:i.id,username:e,password:"",fullName:`${i.firstName||i.personal?.firstName||""} ${i.lastName||i.personal?.lastName||""}`.trim()||e,role:i.role||i.employment?.role||"user",branchId:i.branchId||i.employment?.branchId,branchName:i.branch||i.employment?.branch,status:i.status||i.employment?.status||"active"}}}let i=a.find(r=>r.username?.toLowerCase()===e.toLowerCase()||r.email?.toLowerCase()===e.toLowerCase());if(!i)return{success:!1,error:"Kullanici bulunamadi"};if(i.status&&"active"!==i.status&&"aktif"!==i.status)return{success:!1,error:"Bu hesap devre disi birakilmis"};let l=i.password||i.sifre;if(!l)return{success:!1,error:"Bu kullanicinin sifresi tanimlanmamis"};if(l!==s&&t(s)!==l)return{success:!1,error:"Yanlis sifre"};return{success:!0,user:{...i,password:""}}}catch(e){return console.error("Authentication error:",e),{success:!1,error:"Dogrulama sirasinda bir hata olustu: "+e.message}}}e.s(["authenticateUser",()=>s,"hashPassword",()=>t])},70307,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(18566),a=e.i(7486),i=e.i(98919),l=e.i(31278),n=e.i(69638),d=e.i(73884);let c=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);var o=e.i(19455),u=e.i(93479),m=e.i(15288),f=e.i(69457),h=e.i(6355);function p(){let e=(0,s.useRouter)(),[p,x]=(0,t.useState)("checking"),[y,g]=(0,t.useState)("admin"),[b,v]=(0,t.useState)(""),[j,N]=(0,t.useState)(""),[w,C]=(0,t.useState)("Administrator"),[k,S]=(0,t.useState)(!1),[A,R]=(0,t.useState)(""),[z,B]=(0,t.useState)(!1);(0,t.useEffect)(()=>{(async()=>{try{let e=await (0,f.getFirestoreData)("users");e&&Array.isArray(e)&&e.length>0?x("exists"):x("setup")}catch(e){console.error("Error checking users:",e),x("setup")}})()},[]);let _=async r=>{if(r.preventDefault(),R(""),!y.trim())return void R("Kullanici adi gereklidir");if(b.length<6)return void R("Sifre en az 6 karakter olmalidir");if(b!==j)return void R("Sifreler eslesmiyor");S(!0);try{let r=(0,h.hashPassword)(b);await (0,f.addFirestoreData)("users",{username:y.trim().toLowerCase(),password:r,fullName:w.trim()||"Administrator",role:"admin",status:"active",permissions:["all"],branchId:"all",branchName:"Tum Subeler"}),B(!0),setTimeout(()=>{e.push("/")},3e3)}catch(e){console.error("Setup error:",e),R("Kullanici olusturulurken hata: "+e.message)}finally{S(!1)}};return"checking"===p?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Sistem kontrol ediliyor..."})]})}):"exists"===p?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:(0,r.jsxs)(m.Card,{className:"w-full max-w-md shadow-xl",children:[(0,r.jsxs)(m.CardHeader,{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:(0,r.jsx)(n.CheckCircle,{className:"w-8 h-8 text-green-600"})}),(0,r.jsx)(m.CardTitle,{children:"Sistem Hazir"}),(0,r.jsx)(m.CardDescription,{children:"Kullanici veritabaninda kayitli kullanicilar mevcut. Giris yaparak devam edebilirsiniz."})]}),(0,r.jsx)(m.CardContent,{children:(0,r.jsx)(o.Button,{onClick:()=>e.push("/"),className:"w-full",children:"Giris Sayfasina Git"})})]})}):z?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:(0,r.jsxs)(m.Card,{className:"w-full max-w-md shadow-xl",children:[(0,r.jsxs)(m.CardHeader,{className:"text-center",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mx-auto mb-4",children:(0,r.jsx)(n.CheckCircle,{className:"w-8 h-8 text-green-600"})}),(0,r.jsx)(m.CardTitle,{children:"Kurulum Tamamlandi!"}),(0,r.jsx)(m.CardDescription,{children:"Admin kullanici basariyla olusturuldu. Giris sayfasina yonlendiriliyorsunuz..."})]}),(0,r.jsx)(m.CardContent,{children:(0,r.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-sm",children:[(0,r.jsx)("p",{className:"font-medium text-green-800",children:"Giris Bilgileriniz:"}),(0,r.jsxs)("p",{className:"text-green-700 mt-1",children:["Kullanici: ",y]}),(0,r.jsx)("p",{className:"text-green-700",children:"Sifre: (belirlediginiz sifre)"})]})})]})}):(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-indigo-50 p-4",children:(0,r.jsxs)("div",{className:"w-full max-w-md",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl shadow-lg shadow-primary/25 mb-4",children:(0,r.jsx)(a.Building2,{className:"w-8 h-8 text-white"})}),(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Atlas ERP"}),(0,r.jsx)("p",{className:"text-gray-500 mt-1",children:"Ilk Kurulum"})]}),(0,r.jsxs)(m.Card,{className:"shadow-xl",children:[(0,r.jsxs)(m.CardHeader,{children:[(0,r.jsxs)(m.CardTitle,{className:"flex items-center gap-2",children:[(0,r.jsx)(c,{className:"w-5 h-5"}),"Admin Kullanici Olustur"]}),(0,r.jsx)(m.CardDescription,{children:"Sisteme giris yapabilmek icin bir admin kullanicisi olusturun. Bu bilgileri guvenli bir yerde saklayin."})]}),(0,r.jsxs)(m.CardContent,{children:[(0,r.jsxs)("form",{onSubmit:_,className:"space-y-4",children:[A&&(0,r.jsxs)("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm flex items-center gap-2",children:[(0,r.jsx)(d.XCircle,{className:"w-4 h-4"}),A]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Kullanici Adi"}),(0,r.jsx)(u.Input,{type:"text",value:y,onChange:e=>g(e.target.value),placeholder:"admin",required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Ad Soyad"}),(0,r.jsx)(u.Input,{type:"text",value:w,onChange:e=>C(e.target.value),placeholder:"Administrator"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Sifre"}),(0,r.jsx)(u.Input,{type:"password",value:b,onChange:e=>v(e.target.value),placeholder:"En az 6 karakter",required:!0,minLength:6})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Sifre Tekrar"}),(0,r.jsx)(u.Input,{type:"password",value:j,onChange:e=>N(e.target.value),placeholder:"Sifreyi tekrar girin",required:!0})]}),(0,r.jsx)(o.Button,{type:"submit",className:"w-full",disabled:k,children:k?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Olusturuluyor..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Shield,{className:"mr-2 h-4 w-4"}),"Admin Olustur"]})})]}),(0,r.jsx)("div",{className:"mt-4 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:(0,r.jsxs)("p",{className:"text-xs text-amber-700",children:[(0,r.jsx)("strong",{children:"Onemli:"})," Bu sayfa sadece ilk kurulumda kullanilmalidir. Kurulum tamamlandiktan sonra bu sayfaya erisim devre disi birakilacaktir."]})})]})]})]})})}e.s(["default",()=>p],70307)}]);