(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24687,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(75157);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));s.displayName="Textarea",e.s(["Textarea",()=>s])},10204,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(75157);let s=t.forwardRef(({className:e,...t},s)=>(0,a.jsx)("label",{ref:s,className:(0,l.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e),...t}));s.displayName="Label",e.s(["Label",()=>s])},76639,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(37727),s=e.i(75157);let r=t.createContext({open:!1,onOpenChange:()=>{}});function i({open:e,onOpenChange:t,children:l}){return(0,a.jsx)(r.Provider,{value:{open:e,onOpenChange:t},children:l})}function c({children:e,className:i}){let{open:c,onOpenChange:n}=t.useContext(r);return c?(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>n(!1)}),(0,a.jsxs)("div",{className:(0,s.cn)("relative z-50 w-full max-w-lg max-h-[90vh] overflow-auto rounded-lg bg-background p-6 shadow-lg border",i),children:[(0,a.jsxs)("button",{onClick:()=>n(!1),className:"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100 transition-opacity",children:[(0,a.jsx)(l.X,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Kapat"})]}),e]})]}):null}function n({children:e,className:t}){return(0,a.jsx)("div",{className:(0,s.cn)("flex flex-col space-y-1.5 text-center sm:text-left mb-4",t),children:e})}function d({children:e,className:t}){return(0,a.jsx)("h2",{className:(0,s.cn)("text-lg font-semibold leading-none tracking-tight",t),children:e})}function o({children:e,className:t}){return(0,a.jsx)("p",{className:(0,s.cn)("text-sm text-muted-foreground",t),children:e})}function m({children:e,className:t}){return(0,a.jsx)("div",{className:(0,s.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2 mt-6",t),children:e})}function u({children:e,asChild:l}){let{onOpenChange:s}=t.useContext(r);return l&&t.isValidElement(e)?t.cloneElement(e,{onClick:()=>s(!0)}):(0,a.jsx)("button",{onClick:()=>s(!0),children:e})}e.s(["Dialog",()=>i,"DialogContent",()=>c,"DialogDescription",()=>o,"DialogFooter",()=>m,"DialogHeader",()=>n,"DialogTitle",()=>d,"DialogTrigger",()=>u])},7233,e=>{"use strict";let a=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233)},27612,e=>{"use strict";let a=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>a],27612)},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},43531,e=>{"use strict";let a=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>a],43531)},88511,e=>{"use strict";let a=(0,e.i(75254).default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>a],88511)},69638,e=>{"use strict";let a=(0,e.i(75254).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>a],69638)},16715,e=>{"use strict";let a=(0,e.i(75254).default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);e.s(["RefreshCw",()=>a],16715)},73884,e=>{"use strict";let a=(0,e.i(75254).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],73884)},98919,e=>{"use strict";let a=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],98919)},63209,e=>{"use strict";let a=(0,e.i(75254).default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);e.s(["AlertCircle",()=>a],63209)},74612,e=>{"use strict";async function a(e){try{let a=e.replace(/\s/g,"").toUpperCase(),t=a.substring(0,2),l=a.substring(2);if(!/^[A-Z]{2}[0-9A-Z]{6,12}$/.test(a))return{valid:!1,error:"Gecersiz VAT numarasi formati. Ornek: SI12345678"};let s=await fetch(`https://erp.atlasgroup.si/vies-proxy.php?country=${t}&vat=${l}`,{method:"GET",headers:{Accept:"application/json"}});if(!s.ok)throw Error(`VIES API error: ${s.status}`);let r=await s.json();return{valid:!0===r.isValid,countryCode:r.countryCode||t,vatNumber:r.vatNumber||l,companyName:r.name&&"---"!==r.name?r.name:"",companyAddress:r.address&&"---"!==r.address?r.address:"",error:r.isValid?void 0:"Gecersiz VAT numarasi"}}catch(e){return{valid:!1,error:e.message||"Dogrulama hatasi"}}}e.s(["validateVATNumber",()=>a])},99602,e=>{"use strict";let a=(0,e.i(75254).default)("arrow-up-down",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);e.s(["ArrowUpDown",()=>a],99602)},75558,25063,e=>{"use strict";var a=e.i(75254);let t=(0,a.default)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);e.s(["ArrowUp",()=>t],75558);let l=(0,a.default)("arrow-down",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);e.s(["ArrowDown",()=>l],25063)},69322,e=>{"use strict";var a=e.i(43476),t=e.i(71645),l=e.i(7233),s=e.i(55436),r=e.i(16715),i=e.i(88511),c=e.i(27612),n=e.i(86536),d=e.i(61911),o=e.i(7486),m=e.i(75254);let u=(0,m.default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),h=(0,m.default)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var x=e.i(61659),p=e.i(69638),j=e.i(73884),v=e.i(63209),g=e.i(99602),y=e.i(75558),f=e.i(25063),b=e.i(19455),N=e.i(93479),C=e.i(15288),S=e.i(84774),w=e.i(67489),k=e.i(75157),T=e.i(69457),I=e.i(76639),A=e.i(10204),L=e.i(24687),M=e.i(31278),D=e.i(84614);let V=(0,m.default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);var B=e.i(98919),F=e.i(74612);let z=[{code:"SI",name:"Slovenya",flag:"ðŸ‡¸ðŸ‡®"},{code:"AT",name:"Avusturya",flag:"ðŸ‡¦ðŸ‡¹"},{code:"DE",name:"Almanya",flag:"ðŸ‡©ðŸ‡ª"},{code:"IT",name:"Ä°talya",flag:"ðŸ‡®ðŸ‡¹"},{code:"HR",name:"HÄ±rvatistan",flag:"ðŸ‡­ðŸ‡·"},{code:"TR",name:"TÃ¼rkiye",flag:"ðŸ‡¹ðŸ‡·"},{code:"FR",name:"Fransa",flag:"ðŸ‡«ðŸ‡·"},{code:"ES",name:"Ä°spanya",flag:"ðŸ‡ªðŸ‡¸"},{code:"GR",name:"Yunanistan",flag:"ðŸ‡¬ðŸ‡·"},{code:"HU",name:"Macaristan",flag:"ðŸ‡­ðŸ‡º"},{code:"CZ",name:"Ã‡ekya",flag:"ðŸ‡¨ðŸ‡¿"},{code:"SK",name:"Slovakya",flag:"ðŸ‡¸ðŸ‡°"}];function E({open:e,onOpenChange:l,customer:s,viewMode:r=!1,onSave:i,onSuccess:c}){let n=!!s?.id,[d,m]=(0,t.useState)(!1),[h,v]=(0,t.useState)(!1),[g,y]=(0,t.useState)(null),[f,C]=(0,t.useState)(""),[S,k]=(0,t.useState)(""),[E,G]=(0,t.useState)("company"),[H,R]=(0,t.useState)("active"),[U,K]=(0,t.useState)("standard"),[P,$]=(0,t.useState)(""),[q,O]=(0,t.useState)(""),[Z,X]=(0,t.useState)(""),[Y,W]=(0,t.useState)(""),[J,Q]=(0,t.useState)(""),[_,ee]=(0,t.useState)(""),[ea,et]=(0,t.useState)(""),[el,es]=(0,t.useState)("SI"),[er,ei]=(0,t.useState)("SI"),[ec,en]=(0,t.useState)(""),[ed,eo]=(0,t.useState)(""),[em,eu]=(0,t.useState)("0"),[eh,ex]=(0,t.useState)("0"),[ep,ej]=(0,t.useState)("30"),[ev,eg]=(0,t.useState)("");(0,t.useEffect)(()=>{if(s){let e=s.basic||{},a=s.contact||{},t=s.addressInfo||{},l=s.financial||{};C(e.code||s.code||""),k(e.name||s.name||s.companyName||""),G(e.type||s.type||"company"),R(e.status||s.status||"active"),K(e.customerGroup||s.customerGroup||"standard"),$(a.email||s.email||""),O(a.phone||s.phone||""),X(a.mobile||s.mobile||""),W(a.website||s.website||""),Q(t.street||s.address||""),ee(t.city||s.city||""),et(t.postalCode||s.postalCode||""),es(t.country||s.country||"SI");let r=l.vatNumber||s.vatNumber||"";if(r&&r.length>=2){let e=r.substring(0,2).toUpperCase(),a=r.substring(2);/^[A-Z]{2}$/.test(e)?(ei(e),en(a)):en(r)}else en(r);eo(l.taxNumber||s.taxNumber||""),eu(String(l.creditLimit||s.creditLimit||0)),ex(String(l.discount||s.discount||0)),ej(String(l.paymentTerms||s.paymentTerms||30)),eg(s.notes||"")}else C(""),k(""),G("company"),R("active"),K("standard"),$(""),O(""),X(""),W(""),Q(""),ee(""),et(""),es("SI"),ei("SI"),en(""),eo(""),eu("0"),ex("0"),ej("30"),eg("");y(null)},[s,e]);let ey=async()=>{if(!ec.trim()||ec.length<6)return void alert("Gecerli bir VAT numarasi giriniz");v(!0),y(null);try{let e=er+ec.trim(),a=await (0,F.validateVATNumber)(e);if(y(a),a.valid&&a.countryCode&&es(a.countryCode),a.valid&&a.companyName){if(S.trim()||k(a.companyName),a.companyAddress){let e=a.companyAddress.split("\n").filter(Boolean);if(e.length>0){J.trim()||Q(e[0]);let a=e[e.length-1]||"",t=a.match(/\b(\d{4,6})\b/);if(t&&!ea.trim()){et(t[1]);let e=a.replace(t[0],"").trim().replace(/^,?\s*/,"");e&&!_.trim()&&ee(e)}}}a.countryCode&&es(a.countryCode),G("company")}}catch(e){y({valid:!1,error:"Dogrulama hatasi"})}finally{v(!1)}},ef=async e=>{if(e.preventDefault(),!S.trim())return void alert("MÃ¼ÅŸteri adÄ± zorunludur!");m(!0);try{let e={basic:{code:f.trim()||eb(),name:S.trim(),type:E,status:H,customerGroup:U,vatNumber:ec.trim()?er+ec.trim():"",vatValidated:g?.valid||!1,vatCountry:g?.countryCode||"",vatCompanyName:g?.companyName||"",vatCheckedAt:g?.valid?new Date().toISOString():""},contact:{email:P.trim(),phone:q.trim(),mobile:Z.trim(),website:Y.trim(),address:{street:J.trim(),city:_.trim(),postalCode:ea.trim(),country:el}},financial:{currency:"EUR",creditLimit:parseFloat(em)||0,currentBalance:s?.financial?.currentBalance||s?.balance||0,discount:parseFloat(eh)||0,paymentTerms:parseInt(ep)||30},notes:ev.trim(),isActive:!0,updatedAt:new Date().toISOString(),type:{isCustomer:!0,isSupplier:!1,isBoth:!1}};n?await (0,T.updateData)(`partners/${s.id}`,e):(e.createdAt=new Date().toISOString(),await (0,T.pushData)("partners",e)),i?.(),c?.(),l(!1)}catch(e){console.error("Save error:",e),alert("KayÄ±t hatasÄ±: "+e.message)}finally{m(!1)}},eb=()=>{let e=Date.now().toString(36).toUpperCase();return`CUST-${e}`};return(0,a.jsx)(I.Dialog,{open:e,onOpenChange:l,children:(0,a.jsxs)(I.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(I.DialogHeader,{children:(0,a.jsxs)(I.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Building2,{className:"h-5 w-5"}),n?"MÃ¼ÅŸteri DÃ¼zenle":"Yeni MÃ¼ÅŸteri"]})}),(0,a.jsxs)("form",{onSubmit:ef,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-amber-800",children:[(0,a.jsx)(B.Shield,{className:"h-4 w-4"}),"EU VAT Dogrulama (VIES)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(w.Select,{value:er,onValueChange:e=>{ei(e),y(null)},disabled:r,children:[(0,a.jsx)(w.SelectTrigger,{className:"w-[130px] bg-white",children:(0,a.jsx)(w.SelectValue,{})}),(0,a.jsx)(w.SelectContent,{children:z.map(e=>(0,a.jsxs)(w.SelectItem,{value:e.code,children:[e.flag," ",e.code]},e.code))})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(N.Input,{value:ec,onChange:e=>{en(e.target.value.replace(/\s/g,"").toUpperCase()),y(null)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),!ec.trim()||h||r||ey())},placeholder:"12345678",className:"bg-white",disabled:r})}),(0,a.jsxs)(b.Button,{type:"button",variant:"outline",onClick:ey,disabled:h||r||!ec.trim(),className:"bg-white",children:[h?(0,a.jsx)(M.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(B.Shield,{className:"h-4 w-4 mr-2"}),"Dogrula"]})]}),g&&(0,a.jsxs)("div",{className:`p-3 rounded-lg text-sm ${g.valid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[g.valid?(0,a.jsx)(p.CheckCircle,{className:"h-4 w-4"}):(0,a.jsx)(j.XCircle,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:g.valid?"VAT Numarasi Gecerli":"VAT Numarasi Gecersiz"})]}),g.companyName&&(0,a.jsxs)("div",{className:"mt-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Sirket:"})," ",g.companyName]}),g.companyAddress&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Adres:"})," ",g.companyAddress]})]}),g.error&&(0,a.jsx)("div",{className:"mt-1 text-xs",children:g.error})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(D.User,{className:"h-4 w-4"}),"Temel Bilgiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"code",children:"MÃ¼ÅŸteri Kodu"}),(0,a.jsx)(N.Input,{id:"code",value:f,onChange:e=>C(e.target.value),placeholder:"Otomatik oluÅŸturulur"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"name",children:"MÃ¼ÅŸteri AdÄ± *"}),(0,a.jsx)(N.Input,{id:"name",value:S,onChange:e=>k(e.target.value),placeholder:"Firma veya kiÅŸi adÄ±",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"type",children:"MÃ¼ÅŸteri TÃ¼rÃ¼"}),(0,a.jsxs)(w.Select,{value:E,onValueChange:G,children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"company",children:"Kurumsal"}),(0,a.jsx)(w.SelectItem,{value:"individual",children:"Bireysel"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"status",children:"Durum"}),(0,a.jsxs)(w.Select,{value:H,onValueChange:R,children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(w.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(w.SelectItem,{value:"blocked",children:"Blokeli"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(A.Label,{htmlFor:"customerGroup",children:"MÃ¼ÅŸteri Grubu"}),(0,a.jsxs)(w.Select,{value:U,onValueChange:K,children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"standard",children:"Standart"}),(0,a.jsx)(w.SelectItem,{value:"vip",children:"VIP"}),(0,a.jsx)(w.SelectItem,{value:"wholesale",children:"Toptan"}),(0,a.jsx)(w.SelectItem,{value:"retail",children:"Perakende"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(u,{className:"h-4 w-4"}),"Ä°letiÅŸim Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"email",children:"E-posta"}),(0,a.jsx)(N.Input,{id:"email",type:"email",value:P,onChange:e=>$(e.target.value),placeholder:"ornek@firma.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"phone",children:"Telefon"}),(0,a.jsx)(N.Input,{id:"phone",value:q,onChange:e=>O(e.target.value),placeholder:"+386 1 234 5678"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"mobile",children:"Mobil"}),(0,a.jsx)(N.Input,{id:"mobile",value:Z,onChange:e=>X(e.target.value),placeholder:"+386 40 123 456"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"website",children:"Website"}),(0,a.jsx)(N.Input,{id:"website",value:Y,onChange:e=>W(e.target.value),placeholder:"www.firma.com"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(V,{className:"h-4 w-4"}),"Adres Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(A.Label,{htmlFor:"address",children:"Adres"}),(0,a.jsx)(N.Input,{id:"address",value:J,onChange:e=>Q(e.target.value),placeholder:"Sokak, numara"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"city",children:"Åžehir"}),(0,a.jsx)(N.Input,{id:"city",value:_,onChange:e=>ee(e.target.value),placeholder:"Ljubljana"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"postalCode",children:"Posta Kodu"}),(0,a.jsx)(N.Input,{id:"postalCode",value:ea,onChange:e=>et(e.target.value),placeholder:"1000"})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(A.Label,{htmlFor:"country",children:"Ãœlke"}),(0,a.jsxs)(w.Select,{value:el,onValueChange:es,children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{})}),(0,a.jsx)(w.SelectContent,{children:z.map(e=>(0,a.jsxs)(w.SelectItem,{value:e.code,children:[e.flag," ",e.name]},e.code))})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(x.CreditCard,{className:"h-4 w-4"}),"Finansal Bilgiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"creditLimit",children:"Kredi Limiti (â‚¬)"}),(0,a.jsx)(N.Input,{id:"creditLimit",type:"number",value:em,onChange:e=>eu(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"discount",children:"Ä°skonto (%)"}),(0,a.jsx)(N.Input,{id:"discount",type:"number",min:"0",max:"100",value:eh,onChange:e=>ex(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(A.Label,{htmlFor:"paymentTerms",children:"Ã–deme Vadesi (GÃ¼n)"}),(0,a.jsxs)(w.Select,{value:ep,onValueChange:ej,children:[(0,a.jsx)(w.SelectTrigger,{children:(0,a.jsx)(w.SelectValue,{})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"0",children:"PeÅŸin"}),(0,a.jsx)(w.SelectItem,{value:"7",children:"7 GÃ¼n"}),(0,a.jsx)(w.SelectItem,{value:"15",children:"15 GÃ¼n"}),(0,a.jsx)(w.SelectItem,{value:"30",children:"30 GÃ¼n"}),(0,a.jsx)(w.SelectItem,{value:"45",children:"45 GÃ¼n"}),(0,a.jsx)(w.SelectItem,{value:"60",children:"60 GÃ¼n"}),(0,a.jsx)(w.SelectItem,{value:"90",children:"90 GÃ¼n"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(L.Textarea,{id:"notes",value:ev,onChange:e=>eg(e.target.value),placeholder:"MÃ¼ÅŸteri ile ilgili notlar...",rows:3})]}),(0,a.jsxs)(I.DialogFooter,{children:[(0,a.jsx)(b.Button,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Ä°ptal"}),(0,a.jsxs)(b.Button,{type:"submit",disabled:d,children:[d&&(0,a.jsx)(M.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),n?"GÃ¼ncelle":"Kaydet"]})]})]})]})})}let G={SI:"ðŸ‡¸ðŸ‡®",AT:"ðŸ‡¦ðŸ‡¹",DE:"ðŸ‡©ðŸ‡ª",IT:"ðŸ‡®ðŸ‡¹",HR:"ðŸ‡­ðŸ‡·",HU:"ðŸ‡­ðŸ‡º",CZ:"ðŸ‡¨ðŸ‡¿",PL:"ðŸ‡µðŸ‡±",FR:"ðŸ‡«ðŸ‡·",NL:"ðŸ‡³ðŸ‡±",BE:"ðŸ‡§ðŸ‡ª",TR:"ðŸ‡¹ðŸ‡·",ES:"ðŸ‡ªðŸ‡¸",GR:"ðŸ‡¬ðŸ‡·",SK:"ðŸ‡¸ðŸ‡°"},H={active:{label:"Aktif",color:"bg-green-100 text-green-700",icon:p.CheckCircle},inactive:{label:"Pasif",color:"bg-gray-100 text-gray-700",icon:j.XCircle},blocked:{label:"Blokeli",color:"bg-red-100 text-red-700",icon:v.AlertCircle}},R={individual:{label:"Bireysel",icon:d.Users},company:{label:"Kurumsal",icon:o.Building2}};function U(){let[e,o]=(0,t.useState)([]),[m,j]=(0,t.useState)(!0),[I,A]=(0,t.useState)(""),[L,M]=(0,t.useState)("all"),[D,V]=(0,t.useState)("all"),[B,F]=(0,t.useState)(!1),[z,U]=(0,t.useState)(null),[K,P]=(0,t.useState)("name"),[$,q]=(0,t.useState)("asc");(0,t.useEffect)(()=>{let e=(0,T.subscribeToRTDB)("partners",e=>{o(e.filter(e=>{let a=e.type?.isCustomer||e.basic?.partnerTypes?.isCustomer,t=!1!==e.isActive&&e.basic?.status!=="deleted";return a&&t}).sort((e,a)=>{let t=e.basic?.name||e.name||e.companyName||"",l=a.basic?.name||a.name||a.companyName||"";return t.localeCompare(l)})),j(!1)});return()=>e()},[]);let O=(e,a)=>{if(void 0!==e[a])return e[a];let t={code:["basic","code"],name:["basic","name"],type:["basic","type"],status:["basic","status"],customerGroup:["basic","customerGroup"],email:["contact","email"],phone:["contact","phone"],mobile:["contact","mobile"],address:["addressInfo","street"],city:["addressInfo","city"],country:["addressInfo","country"],postalCode:["addressInfo","postalCode"],vatNumber:["financial","vatNumber"],taxNumber:["financial","taxNumber"],balance:["financial","balance"],creditLimit:["financial","creditLimit"],discount:["financial","discount"],paymentTerms:["financial","paymentTerms"]}[a];if(t){let[a,l]=t;return e[a]?.[l]}},Z=e.filter(e=>{let a=O(e,"name")||O(e,"companyName")||"",t=O(e,"code")||"",l=O(e,"email")||"",s=O(e,"phone")||"",r=O(e,"status")||"active",i=O(e,"type")||"company",c=a.toLowerCase().includes(I.toLowerCase())||t.toLowerCase().includes(I.toLowerCase())||l.toLowerCase().includes(I.toLowerCase())||s.includes(I),n="all"===L||r===L,d="all"===D||i===D;return c&&n&&d}).sort((e,a)=>{let t,l;switch(K){case"code":t=O(e,"code")||"",l=O(a,"code")||"";break;case"name":t=O(e,"name")||O(e,"companyName")||"",l=O(a,"name")||O(a,"companyName")||"";break;case"city":t=O(e,"city")||"",l=O(a,"city")||"";break;case"country":t=O(e,"country")||"",l=O(a,"country")||"";break;case"balance":t=O(e,"balance")||0,l=O(a,"balance")||0;break;case"createdAt":t=e.createdAt||"",l=a.createdAt||"";break;default:t=O(e,"name")||"",l=O(a,"name")||""}if("balance"===K)return"asc"===$?t-l:l-t;if("code"===K){let e=String(t).localeCompare(String(l),"tr",{numeric:!0});return"asc"===$?e:-e}let s=String(t).localeCompare(String(l),"tr");return"asc"===$?s:-s}),X={total:e.length,active:e.filter(e=>"active"===(O(e,"status")||"active")).length,blocked:e.filter(e=>"blocked"===O(e,"status")).length,totalBalance:e.reduce((e,a)=>e+(O(a,"balance")||0),0)},Y=e=>{U(e),F(!0)},W=async e=>{let a=O(e,"name")||O(e,"companyName")||"Bu mÃ¼ÅŸteri";if(confirm(`"${a}" m\xfcÅŸterisini silmek istediÄŸinize emin misiniz?`))try{await (0,T.removeData)(`partners/${e.id}`)}catch(e){console.error("Delete error:",e),alert("Silme hatasÄ±: "+e.message)}};return m?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.RefreshCw,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"MÃ¼ÅŸteriler yÃ¼kleniyor..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"MÃ¼ÅŸteriler"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"MÃ¼ÅŸteri kayÄ±tlarÄ±nÄ± yÃ¶netin ve takip edin"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b.Button,{variant:"outline",size:"icon",onClick:()=>{j(!0),setTimeout(()=>j(!1),500)},children:(0,a.jsx)(r.RefreshCw,{className:`h-4 w-4 ${m?"animate-spin":""}`})}),(0,a.jsxs)(b.Button,{onClick:()=>{U(null),F(!0)},children:[(0,a.jsx)(l.Plus,{className:"h-4 w-4 mr-2"}),"Yeni MÃ¼ÅŸteri"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(C.Card,{children:(0,a.jsx)(C.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam MÃ¼ÅŸteri"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:X.total})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-100 flex items-center justify-center",children:(0,a.jsx)(d.Users,{className:"h-6 w-6 text-amber-600"})})]})})}),(0,a.jsx)(C.Card,{children:(0,a.jsx)(C.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aktif MÃ¼ÅŸteri"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:X.active})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(p.CheckCircle,{className:"h-6 w-6 text-green-600"})})]})})}),(0,a.jsx)(C.Card,{children:(0,a.jsx)(C.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blokeli"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:X.blocked})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)(v.AlertCircle,{className:"h-6 w-6 text-red-600"})})]})})}),(0,a.jsx)(C.Card,{children:(0,a.jsx)(C.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam Bakiye"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(0,k.formatCurrency)(X.totalBalance)})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)(x.CreditCard,{className:"h-6 w-6 text-purple-600"})})]})})})]}),(0,a.jsx)(C.Card,{children:(0,a.jsx)(C.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(s.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(N.Input,{placeholder:"MÃ¼ÅŸteri ara (isim, kod, email, telefon)...",value:I,onChange:e=>A(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(w.Select,{value:L,onValueChange:M,children:[(0,a.jsx)(w.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(w.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"all",children:"TÃ¼m Durumlar"}),(0,a.jsx)(w.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(w.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(w.SelectItem,{value:"blocked",children:"Blokeli"})]})]}),(0,a.jsxs)(w.Select,{value:D,onValueChange:V,children:[(0,a.jsx)(w.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(w.SelectValue,{placeholder:"TÃ¼r"})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"all",children:"TÃ¼m TÃ¼rler"}),(0,a.jsx)(w.SelectItem,{value:"individual",children:"Bireysel"}),(0,a.jsx)(w.SelectItem,{value:"company",children:"Kurumsal"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border-l pl-4",children:[(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(w.Select,{value:K,onValueChange:P,children:[(0,a.jsx)(w.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(w.SelectValue,{placeholder:"SÄ±rala"})}),(0,a.jsxs)(w.SelectContent,{children:[(0,a.jsx)(w.SelectItem,{value:"name",children:"Ä°sim"}),(0,a.jsx)(w.SelectItem,{value:"code",children:"Kod"}),(0,a.jsx)(w.SelectItem,{value:"city",children:"Åžehir"}),(0,a.jsx)(w.SelectItem,{value:"country",children:"Ãœlke"}),(0,a.jsx)(w.SelectItem,{value:"balance",children:"Bakiye"}),(0,a.jsx)(w.SelectItem,{value:"createdAt",children:"Eklenme"})]})]}),(0,a.jsx)(b.Button,{variant:"outline",size:"icon",onClick:()=>q("asc"===$?"desc":"asc"),title:"asc"===$?"Artan":"Azalan",children:"asc"===$?(0,a.jsx)(y.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(f.ArrowDown,{className:"h-4 w-4"})})]})]})})}),(0,a.jsxs)(C.Card,{children:[(0,a.jsx)(C.CardHeader,{children:(0,a.jsxs)(C.CardTitle,{className:"text-lg font-medium",children:["MÃ¼ÅŸteri Listesi",(0,a.jsxs)("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",Z.length," kayÄ±t)"]})]})}),(0,a.jsx)(C.CardContent,{children:(0,a.jsxs)(S.Table,{children:[(0,a.jsx)(S.TableHeader,{children:(0,a.jsxs)(S.TableRow,{children:[(0,a.jsx)(S.TableHead,{children:"Kod"}),(0,a.jsx)(S.TableHead,{children:"MÃ¼ÅŸteri AdÄ±"}),(0,a.jsx)(S.TableHead,{children:"TÃ¼r"}),(0,a.jsx)(S.TableHead,{children:"Ä°letiÅŸim"}),(0,a.jsx)(S.TableHead,{children:"Ãœlke / Åžehir"}),(0,a.jsx)(S.TableHead,{className:"text-right",children:"Bakiye"}),(0,a.jsx)(S.TableHead,{children:"Durum"}),(0,a.jsx)(S.TableHead,{className:"w-[100px]",children:"Ä°ÅŸlem"})]})}),(0,a.jsx)(S.TableBody,{children:0===Z.length?(0,a.jsx)(S.TableRow,{children:(0,a.jsxs)(S.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,a.jsx)(d.Users,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"MÃ¼ÅŸteri bulunamadÄ±"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"HenÃ¼z mÃ¼ÅŸteri eklenmemiÅŸ veya arama kriterlerine uygun sonuÃ§ yok."})]})}):Z.map(e=>{let t=O(e,"code")||"-",l=O(e,"name")||O(e,"companyName")||"-",s=O(e,"type")||"company",r=O(e,"email")||"",d=O(e,"phone")||O(e,"mobile")||"",o=O(e,"country")||"",m=O(e,"city")||"",x=O(e,"balance")||0,p=H[O(e,"status")||"active"]||H.active,j=R[s]||R.company,v=p.icon,g=j.icon;return(0,a.jsxs)(S.TableRow,{children:[(0,a.jsx)(S.TableCell,{className:"font-mono text-sm",children:t}),(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(g,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:l})]})}),(0,a.jsx)(S.TableCell,{children:j.label}),(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[r&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(h,{className:"h-3 w-3"}),r]}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(u,{className:"h-3 w-3"}),d]})]})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:G[o]||o}),(0,a.jsx)("span",{children:m||"-"})]})}),(0,a.jsx)(S.TableCell,{className:"text-right font-mono",children:(0,a.jsx)("span",{className:x<0?"text-red-600":"",children:(0,k.formatCurrency)(x)})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${p.color}`,children:[(0,a.jsx)(v,{className:"h-3 w-3"}),p.label]})}),(0,a.jsx)(S.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(b.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>Y(e),children:(0,a.jsx)(n.Eye,{className:"h-4 w-4"})}),(0,a.jsx)(b.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>Y(e),children:(0,a.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(b.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>W(e),children:(0,a.jsx)(c.Trash2,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),(0,a.jsx)(E,{open:B,onOpenChange:F,customer:z,onSave:()=>F(!1)})]})}e.s(["default",()=>U],69322)},27510,e=>{e.v(a=>Promise.all(["static/chunks/54ab083194d7bfbe.js"].map(a=>e.l(a))).then(()=>a(48323)))}]);