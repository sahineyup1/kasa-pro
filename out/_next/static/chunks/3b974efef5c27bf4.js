(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,9505,e=>{"use strict";var a=e.i(43476),l=e.i(71645),t=e.i(7233),s=e.i(55436),i=e.i(5125),r=e.i(22858),n=e.i(95116),c=e.i(88511),d=e.i(27612),o=e.i(86536),m=e.i(31278),h=e.i(78894),x=e.i(15288),u=e.i(19455),p=e.i(93479),j=e.i(84774),g=e.i(75157),v=e.i(69457),b=e.i(10204),y=e.i(67489),f=e.i(24687),N=e.i(76639);let S=[{value:"car",label:"Binek"},{value:"truck",label:"Kamyon"},{value:"van",label:"Van/Minibus"},{value:"motorcycle",label:"Motosiklet"}],C=[{value:"gasoline",label:"Benzin"},{value:"diesel",label:"Dizel"},{value:"lpg",label:"LPG"},{value:"electric",label:"Elektrik"},{value:"hybrid",label:"Hibrit"}],k=[{value:"active",label:"Aktif"},{value:"maintenance",label:"Bakimda"},{value:"inactive",label:"Pasif"}];function T({open:e,onOpenChange:t,vehicle:s,onSave:i}){let r=!!s,[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[x,j]=(0,l.useState)(""),[g,T]=(0,l.useState)("car"),[w,D]=(0,l.useState)("diesel"),[I,L]=(0,l.useState)(""),[F,B]=(0,l.useState)("active"),[E,A]=(0,l.useState)(""),[H,K]=(0,l.useState)(""),[O,z]=(0,l.useState)(""),[P,Y]=(0,l.useState)(""),[M,V]=(0,l.useState)(""),[_,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{e&&(s?(c(s.plate||""),o(s.brand||""),h(s.model||""),j(String(s.year||"")),T(s.type||"car"),D(s.fuelType||"diesel"),L(String(s.km||"")),B(s.status||"active"),A(s.insuranceExpiry||""),K(s.kaskoExpiry||""),z(s.inspectionExpiry||""),Y(s.assignedTo||""),V(s.notes||"")):(c(""),o(""),h(""),j(String(new Date().getFullYear())),T("car"),D("diesel"),L(""),B("active"),A(""),K(""),z(""),Y(""),V("")))},[e,s]);let $=async()=>{if(!n.trim())return void alert("Lutfen plaka girin!");if(!d.trim())return void alert("Lutfen marka girin!");R(!0);try{let e={plate:n.trim().toUpperCase(),brand:d.trim(),model:m.trim(),year:parseInt(x)||new Date().getFullYear(),type:g,fuelType:w,km:parseInt(I)||0,status:F,insuranceExpiry:E||null,kaskoExpiry:H||null,inspectionExpiry:O||null,assignedTo:P.trim()||null,notes:M.trim(),updatedAt:new Date().toISOString()};r&&s?.id?await (0,v.updateData)(`vehicles/${s.id}`,e):(e.createdAt=new Date().toISOString(),await (0,v.pushData)("vehicles",e)),t(!1),i?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{R(!1)}};return(0,a.jsx)(N.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(N.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(N.DialogHeader,{children:(0,a.jsx)(N.DialogTitle,{className:"text-xl font-semibold",children:r?"Arac Duzenle":"Yeni Arac"})}),(0,a.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Arac Bilgileri"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"plate",children:"Plaka *"}),(0,a.jsx)(p.Input,{id:"plate",value:n,onChange:e=>c(e.target.value.toUpperCase()),placeholder:"Orn: LJ-123-AB"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"status",children:"Durum"}),(0,a.jsxs)(y.Select,{value:F,onValueChange:B,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Durum secin"})}),(0,a.jsx)(y.SelectContent,{children:k.map(e=>(0,a.jsx)(y.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"brand",children:"Marka *"}),(0,a.jsx)(p.Input,{id:"brand",value:d,onChange:e=>o(e.target.value),placeholder:"Orn: Volkswagen"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"model",children:"Model"}),(0,a.jsx)(p.Input,{id:"model",value:m,onChange:e=>h(e.target.value),placeholder:"Orn: Passat"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"year",children:"Yil"}),(0,a.jsx)(p.Input,{id:"year",type:"number",value:x,onChange:e=>j(e.target.value),min:"1990",max:new Date().getFullYear()+1})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"km",children:"Kilometre"}),(0,a.jsx)(p.Input,{id:"km",type:"number",value:I,onChange:e=>L(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"type",children:"Arac Tipi"}),(0,a.jsxs)(y.Select,{value:g,onValueChange:T,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Arac tipi secin"})}),(0,a.jsx)(y.SelectContent,{children:S.map(e=>(0,a.jsx)(y.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"fuelType",children:"Yakit Tipi"}),(0,a.jsxs)(y.Select,{value:w,onValueChange:D,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Yakit tipi secin"})}),(0,a.jsx)(y.SelectContent,{children:C.map(e=>(0,a.jsx)(y.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Bitis Tarihleri"}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"insuranceExpiry",children:"Sigorta Bitis"}),(0,a.jsx)(p.Input,{id:"insuranceExpiry",type:"date",value:E,onChange:e=>A(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"kaskoExpiry",children:"Kasko Bitis"}),(0,a.jsx)(p.Input,{id:"kaskoExpiry",type:"date",value:H,onChange:e=>K(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"inspectionExpiry",children:"Muayene Bitis"}),(0,a.jsx)(p.Input,{id:"inspectionExpiry",type:"date",value:O,onChange:e=>z(e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"assignedTo",children:"Atanan Kisi"}),(0,a.jsx)(p.Input,{id:"assignedTo",value:P,onChange:e=>Y(e.target.value),placeholder:"Surucunun adi"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(f.Textarea,{id:"notes",value:M,onChange:e=>V(e.target.value),placeholder:"Ek notlar...",rows:2})]})]})]}),(0,a.jsxs)(N.DialogFooter,{children:[(0,a.jsx)(u.Button,{variant:"outline",onClick:()=>t(!1),disabled:_,children:"Iptal"}),(0,a.jsx)(u.Button,{onClick:$,disabled:_,children:_?"Kaydediliyor...":"Kaydet"})]})]})})}function w({open:e,onOpenChange:t,fuelRecord:s,onSave:i}){let r=!!s,[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[x,j]=(0,l.useState)(""),[g,S]=(0,l.useState)(""),[C,k]=(0,l.useState)(""),[T,w]=(0,l.useState)(""),[D,I]=(0,l.useState)("diesel"),[L,F]=(0,l.useState)("cash"),[B,E]=(0,l.useState)(""),[A,H]=(0,l.useState)(!1),[K,O]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=(0,v.subscribeToData)("vehicles",e=>{if(e){let a=Object.entries(e).map(([e,a])=>({id:e,plate:a.plate||"",km:a.km||0}));a.sort((e,a)=>e.plate.localeCompare(a.plate)),O(a)}});return()=>e()},[]),(0,l.useEffect)(()=>{if(e){let e=new Date().toISOString().split("T")[0];s?(c(s.vehicleId||""),o(s.date||e),h(String(s.liters||"")),j(String(s.pricePerLiter||"")),S(String(s.totalAmount||"")),k(String(s.km||"")),w(s.station||""),I(s.fuelType||"diesel"),F(s.paymentMethod||"cash"),E(s.notes||"")):(c(""),o(e),h(""),j(""),S(""),k(""),w(""),I("diesel"),F("cash"),E(""))}},[e,s]),(0,l.useEffect)(()=>{if(n&&!r){let e=K.find(e=>e.id===n);e?.km&&k(String(e.km))}},[n,K,r]),(0,l.useEffect)(()=>{let e=parseFloat(m)||0,a=parseFloat(x)||0;e>0&&a>0&&S((e*a).toFixed(2))},[m,x]);let z=async()=>{if(!n)return void alert("Lutfen arac secin!");if(!m||0>=parseFloat(m))return void alert("Lutfen gecerli litre miktari girin!");if(!g||0>=parseFloat(g))return void alert("Lutfen gecerli tutar girin!");H(!0);try{let e=K.find(e=>e.id===n),a={vehicleId:n,vehiclePlate:e?.plate||"",date:d,liters:parseFloat(m)||0,pricePerLiter:parseFloat(x)||0,totalAmount:parseFloat(g)||0,km:parseInt(C)||0,station:T.trim(),fuelType:D,paymentMethod:L,notes:B.trim(),updatedAt:new Date().toISOString()};r&&s?.id?await (0,v.updateData)(`vehicle_fuel/${s.id}`,a):(a.createdAt=new Date().toISOString(),await (0,v.pushData)("vehicle_fuel",a),e&&parseInt(C)>(e.km||0)&&await (0,v.updateData)(`vehicles/${n}`,{km:parseInt(C)})),t(!1),i?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{H(!1)}};return(0,a.jsx)(N.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(N.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(N.DialogHeader,{children:(0,a.jsx)(N.DialogTitle,{className:"text-xl font-semibold",children:r?"Yakit Kaydi Duzenle":"Yakit Ekle"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"vehicle",children:"Arac *"}),(0,a.jsxs)(y.Select,{value:n,onValueChange:c,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Arac secin"})}),(0,a.jsx)(y.SelectContent,{children:K.filter(e=>e.id).map(e=>(0,a.jsx)(y.SelectItem,{value:e.id,children:e.plate},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"date",children:"Tarih *"}),(0,a.jsx)(p.Input,{id:"date",type:"date",value:d,onChange:e=>o(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"liters",children:"Litre *"}),(0,a.jsx)(p.Input,{id:"liters",type:"number",step:"0.01",value:m,onChange:e=>h(e.target.value),placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"pricePerLiter",children:"Birim Fiyat"}),(0,a.jsx)(p.Input,{id:"pricePerLiter",type:"number",step:"0.001",value:x,onChange:e=>j(e.target.value),placeholder:"0.000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"totalAmount",children:"Toplam *"}),(0,a.jsx)(p.Input,{id:"totalAmount",type:"number",step:"0.01",value:g,onChange:e=>S(e.target.value),placeholder:"0.00",className:"font-semibold"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"km",children:"Kilometre"}),(0,a.jsx)(p.Input,{id:"km",type:"number",value:C,onChange:e=>k(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"station",children:"Istasyon"}),(0,a.jsx)(p.Input,{id:"station",value:T,onChange:e=>w(e.target.value),placeholder:"Orn: Petrol Ofisi"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"fuelType",children:"Yakit Tipi"}),(0,a.jsxs)(y.Select,{value:D,onValueChange:I,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Yakit tipi secin"})}),(0,a.jsxs)(y.SelectContent,{children:[(0,a.jsx)(y.SelectItem,{value:"diesel",children:"Dizel"}),(0,a.jsx)(y.SelectItem,{value:"gasoline",children:"Benzin"}),(0,a.jsx)(y.SelectItem,{value:"lpg",children:"LPG"}),(0,a.jsx)(y.SelectItem,{value:"electric",children:"Elektrik"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"paymentMethod",children:"Odeme"}),(0,a.jsxs)(y.Select,{value:L,onValueChange:F,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Odeme yontemi secin"})}),(0,a.jsxs)(y.SelectContent,{children:[(0,a.jsx)(y.SelectItem,{value:"cash",children:"Nakit"}),(0,a.jsx)(y.SelectItem,{value:"card",children:"Kart"}),(0,a.jsx)(y.SelectItem,{value:"company_card",children:"Firma Karti"})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(f.Textarea,{id:"notes",value:B,onChange:e=>E(e.target.value),placeholder:"Ek notlar...",rows:2})]})]}),(0,a.jsxs)(N.DialogFooter,{children:[(0,a.jsx)(u.Button,{variant:"outline",onClick:()=>t(!1),disabled:A,children:"Iptal"}),(0,a.jsx)(u.Button,{onClick:z,disabled:A,children:A?"Kaydediliyor...":"Kaydet"})]})]})})}let D=[{value:"oil_change",label:"Yag Degisimi"},{value:"tire_change",label:"Lastik Degisimi"},{value:"brake",label:"Fren Bakimi"},{value:"filter",label:"Filtre Degisimi"},{value:"battery",label:"Aku"},{value:"timing_belt",label:"Triger Kayisi"},{value:"clutch",label:"Debriyaj"},{value:"suspension",label:"Suspensiyon"},{value:"air_conditioning",label:"Klima"},{value:"electrical",label:"Elektrik"},{value:"body_repair",label:"Kaporta"},{value:"paint",label:"Boya"},{value:"inspection",label:"Muayene"},{value:"other",label:"Diger"}];function I({open:e,onOpenChange:t,maintenanceRecord:s,onSave:i}){let r=!!s,[n,c]=(0,l.useState)(""),[d,o]=(0,l.useState)(""),[m,h]=(0,l.useState)("oil_change"),[x,j]=(0,l.useState)(""),[g,S]=(0,l.useState)(""),[C,k]=(0,l.useState)(""),[T,w]=(0,l.useState)(""),[I,L]=(0,l.useState)(""),[F,B]=(0,l.useState)(""),[E,A]=(0,l.useState)(""),[H,K]=(0,l.useState)(""),[O,z]=(0,l.useState)(!1),[P,Y]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=(0,v.subscribeToData)("vehicles",e=>{if(e){let a=Object.entries(e).map(([e,a])=>({id:e,plate:a.plate||"",km:a.km||0}));a.sort((e,a)=>e.plate.localeCompare(a.plate)),Y(a)}});return()=>e()},[]),(0,l.useEffect)(()=>{if(e){let e=new Date().toISOString().split("T")[0];s?(c(s.vehicleId||""),o(s.date||e),h(s.type||"oil_change"),j(s.description||""),S(String(s.cost||"")),k(String(s.km||"")),w(s.vendor||""),L(s.invoiceNo||""),B(String(s.nextServiceKm||"")),A(s.nextServiceDate||""),K(s.notes||"")):(c(""),o(e),h("oil_change"),j(""),S(""),k(""),w(""),L(""),B(""),A(""),K(""))}},[e,s]),(0,l.useEffect)(()=>{if(n&&!r){let e=P.find(e=>e.id===n);e?.km&&k(String(e.km))}},[n,P,r]);let M=async()=>{if(!n)return void alert("Lutfen arac secin!");if(!x.trim())return void alert("Lutfen aciklama girin!");if(!g||0>=parseFloat(g))return void alert("Lutfen gecerli tutar girin!");z(!0);try{let e=P.find(e=>e.id===n),a=D.find(e=>e.value===m)?.label||m,l={vehicleId:n,vehiclePlate:e?.plate||"",date:d,type:m,typeLabel:a,description:x.trim(),cost:parseFloat(g)||0,km:parseInt(C)||0,vendor:T.trim(),invoiceNo:I.trim(),nextServiceKm:parseInt(F)||null,nextServiceDate:E||null,notes:H.trim(),updatedAt:new Date().toISOString()};r&&s?.id?await (0,v.updateData)(`vehicle_maintenance/${s.id}`,l):(l.createdAt=new Date().toISOString(),await (0,v.pushData)("vehicle_maintenance",l),e&&parseInt(C)>(e.km||0)&&await (0,v.updateData)(`vehicles/${n}`,{km:parseInt(C)})),t(!1),i?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{z(!1)}};return(0,a.jsx)(N.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(N.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(N.DialogHeader,{children:(0,a.jsx)(N.DialogTitle,{className:"text-xl font-semibold",children:r?"Bakim Kaydi Duzenle":"Bakim Ekle"})}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"vehicle",children:"Arac *"}),(0,a.jsxs)(y.Select,{value:n,onValueChange:c,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Arac secin"})}),(0,a.jsx)(y.SelectContent,{children:P.filter(e=>e.id).map(e=>(0,a.jsx)(y.SelectItem,{value:e.id,children:e.plate},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"date",children:"Tarih *"}),(0,a.jsx)(p.Input,{id:"date",type:"date",value:d,onChange:e=>o(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"type",children:"Bakim Tipi *"}),(0,a.jsxs)(y.Select,{value:m,onValueChange:h,children:[(0,a.jsx)(y.SelectTrigger,{children:(0,a.jsx)(y.SelectValue,{placeholder:"Bakim tipi secin"})}),(0,a.jsx)(y.SelectContent,{children:D.map(e=>(0,a.jsx)(y.SelectItem,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"cost",children:"Tutar *"}),(0,a.jsx)(p.Input,{id:"cost",type:"number",step:"0.01",value:g,onChange:e=>S(e.target.value),placeholder:"0.00",className:"font-semibold"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"description",children:"Aciklama *"}),(0,a.jsx)(p.Input,{id:"description",value:x,onChange:e=>j(e.target.value),placeholder:"Yapilan islem aciklamasi..."})]}),(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"km",children:"Kilometre"}),(0,a.jsx)(p.Input,{id:"km",type:"number",value:C,onChange:e=>k(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"vendor",children:"Servis/Ustahane"}),(0,a.jsx)(p.Input,{id:"vendor",value:T,onChange:e=>w(e.target.value),placeholder:"Servis adi"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"invoiceNo",children:"Fatura No"}),(0,a.jsx)(p.Input,{id:"invoiceNo",value:I,onChange:e=>L(e.target.value),placeholder:"Fatura numarasi"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Sonraki Servis (Opsiyonel)"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"nextServiceKm",children:"Sonraki Servis KM"}),(0,a.jsx)(p.Input,{id:"nextServiceKm",type:"number",value:F,onChange:e=>B(e.target.value),placeholder:"Orn: 150000"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"nextServiceDate",children:"Sonraki Servis Tarihi"}),(0,a.jsx)(p.Input,{id:"nextServiceDate",type:"date",value:E,onChange:e=>A(e.target.value)})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(b.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(f.Textarea,{id:"notes",value:H,onChange:e=>K(e.target.value),placeholder:"Ek notlar, parcalar, garantiler...",rows:2})]})]}),(0,a.jsxs)(N.DialogFooter,{children:[(0,a.jsx)(u.Button,{variant:"outline",onClick:()=>t(!1),disabled:O,children:"Iptal"}),(0,a.jsx)(u.Button,{onClick:M,disabled:O,children:O?"Kaydediliyor...":"Kaydet"})]})]})})}let L={car:"Binek",truck:"Kamyon",van:"Van/Minibüs",motorcycle:"Motosiklet"},F={gasoline:"Benzin",diesel:"Dizel",lpg:"LPG",electric:"Elektrik",hybrid:"Hibrit"},B={active:{label:"Aktif",color:"bg-emerald-100 text-emerald-700"},maintenance:{label:"Bakımda",color:"bg-yellow-100 text-yellow-700"},inactive:{label:"Pasif",color:"bg-gray-100 text-gray-700"}};function E(){let e,b,[y,f]=(0,l.useState)([]),[N,S]=(0,l.useState)([]),[C,k]=(0,l.useState)([]),[D,E]=(0,l.useState)(!0),[A,H]=(0,l.useState)(""),[K,O]=(0,l.useState)("vehicles"),[z,P]=(0,l.useState)(!1),[Y,M]=(0,l.useState)(!1),[V,_]=(0,l.useState)(!1),[R,$]=(0,l.useState)(null),[U,G]=(0,l.useState)(null),[W,J]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=0,a=()=>{++e>=3&&E(!1)},l=(0,v.subscribeToData)("vehicles",e=>{e?f(Object.entries(e).map(([e,a])=>({id:e,...a}))):f([]),a()}),t=(0,v.subscribeToData)("vehicle_fuel",e=>{if(e){let a=Object.entries(e).map(([e,a])=>({id:e,...a}));a.sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),S(a)}else S([]);a()}),s=(0,v.subscribeToData)("vehicle_maintenance",e=>{if(e){let a=Object.entries(e).map(([e,a])=>({id:e,...a}));a.sort((e,a)=>new Date(a.date).getTime()-new Date(e.date).getTime()),k(a)}else k([]);a()});return()=>{l(),t(),s()}},[]);let q=y.filter(e=>e.plate?.toLowerCase().includes(A.toLowerCase())||e.brand?.toLowerCase().includes(A.toLowerCase())||e.model?.toLowerCase().includes(A.toLowerCase())),Q=e=>{let a=y.find(a=>a.id===e);return a?.plate||"-"},X=(e=[],b=new Date,y.forEach(a=>{a.insuranceExpiry&&new Date(a.insuranceExpiry).getTime()-b.getTime()<2592e6&&e.push({vehicle:a,type:"Sigorta",date:a.insuranceExpiry}),a.kaskoExpiry&&new Date(a.kaskoExpiry).getTime()-b.getTime()<2592e6&&e.push({vehicle:a,type:"Kasko",date:a.kaskoExpiry}),a.inspectionExpiry&&new Date(a.inspectionExpiry).getTime()-b.getTime()<2592e6&&e.push({vehicle:a,type:"Muayene",date:a.inspectionExpiry})}),e),Z={total:y.length,active:y.filter(e=>"active"===e.status).length,totalFuel:N.reduce((e,a)=>e+(a.totalAmount||0),0),totalMaintenance:C.reduce((e,a)=>e+(a.cost||0),0)},ee=e=>{$(e),P(!0)},ea=async e=>{if(confirm(`"${e.plate}" aracini silmek istediginize emin misiniz?`))try{await (0,v.removeData)(`vehicles/${e.id}`)}catch(e){alert("Silme hatasi: "+e.message)}},el=async e=>{if(confirm("Bu yakit kaydini silmek istediginize emin misiniz?"))try{await (0,v.removeData)(`vehicle_fuel/${e.id}`)}catch(e){alert("Silme hatasi: "+e.message)}},et=async e=>{if(confirm("Bu bakim kaydini silmek istediginize emin misiniz?"))try{await (0,v.removeData)(`vehicle_maintenance/${e.id}`)}catch(e){alert("Silme hatasi: "+e.message)}};return D?(0,a.jsxs)("div",{className:"flex items-center justify-center h-96",children:[(0,a.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,a.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Yükleniyor..."})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold tracking-tight",children:"Araçlar"}),(0,a.jsx)("p",{className:"text-muted-foreground text-sm lg:text-base",children:"Araç, yakıt ve bakım yönetimi"})]}),(0,a.jsxs)(u.Button,{size:"sm",onClick:()=>{"vehicles"===K?($(null),P(!0)):"fuel"===K?(G(null),M(!0)):(J(null),_(!0))},className:"w-full sm:w-auto",children:[(0,a.jsx)(t.Plus,{className:"h-4 w-4 mr-2"}),"vehicles"===K&&"Yeni Arac","fuel"===K&&"Yakit Ekle","maintenance"===K&&"Bakim Ekle"]})]}),X.length>0&&(0,a.jsx)(x.Card,{className:"border-yellow-200 bg-yellow-50",children:(0,a.jsx)(x.CardContent,{className:"pt-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(h.AlertTriangle,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-800",children:"Yaklaşan Bitiş Tarihleri"}),(0,a.jsx)("ul",{className:"mt-1 text-sm text-yellow-700",children:X.map((e,l)=>(0,a.jsxs)("li",{children:[e.vehicle.plate," - ",e.type,": ",(0,g.formatDate)(e.date)]},l))})]})]})})}),(0,a.jsxs)("div",{className:"grid gap-3 lg:gap-4 grid-cols-2 lg:grid-cols-4",children:[(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(x.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Toplam Araç"}),(0,a.jsx)(i.Car,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold",children:Z.total})})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(x.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Aktif Araç"}),(0,a.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500"})]}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:Z.active})})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(x.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Toplam Yakıt"}),(0,a.jsx)(r.Fuel,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(0,g.formatCurrency)(Z.totalFuel)})})]}),(0,a.jsxs)(x.Card,{children:[(0,a.jsxs)(x.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,a.jsx)(x.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Toplam Bakım"}),(0,a.jsx)(n.Wrench,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsx)(x.CardContent,{children:(0,a.jsx)("div",{className:"text-2xl font-bold text-amber-600",children:(0,g.formatCurrency)(Z.totalMaintenance)})})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(u.Button,{variant:"vehicles"===K?"default":"outline",onClick:()=>O("vehicles"),size:"sm",className:"flex-1 sm:flex-none",children:[(0,a.jsx)(i.Car,{className:"h-4 w-4 mr-2"}),"Araçlar"]}),(0,a.jsxs)(u.Button,{variant:"fuel"===K?"default":"outline",onClick:()=>O("fuel"),size:"sm",className:"flex-1 sm:flex-none",children:[(0,a.jsx)(r.Fuel,{className:"h-4 w-4 mr-2"}),"Yakıt"]}),(0,a.jsxs)(u.Button,{variant:"maintenance"===K?"default":"outline",onClick:()=>O("maintenance"),size:"sm",className:"flex-1 sm:flex-none",children:[(0,a.jsx)(n.Wrench,{className:"h-4 w-4 mr-2"}),"Bakım"]})]}),(0,a.jsx)(x.Card,{children:(0,a.jsx)(x.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"relative max-w-sm",children:[(0,a.jsx)(s.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(p.Input,{type:"search",placeholder:"Plaka veya marka ara...",value:A,onChange:e=>H(e.target.value),className:"pl-9"})]})})}),(0,a.jsx)(x.Card,{children:(0,a.jsxs)(x.CardContent,{className:"pt-6 overflow-x-auto",children:["vehicles"===K&&(0,a.jsxs)(j.Table,{className:"min-w-[800px]",children:[(0,a.jsx)(j.TableHeader,{children:(0,a.jsxs)(j.TableRow,{children:[(0,a.jsx)(j.TableHead,{children:"Plaka"}),(0,a.jsx)(j.TableHead,{children:"Marka/Model"}),(0,a.jsx)(j.TableHead,{className:"hidden md:table-cell",children:"Yıl"}),(0,a.jsx)(j.TableHead,{className:"hidden sm:table-cell",children:"Tip"}),(0,a.jsx)(j.TableHead,{className:"hidden lg:table-cell",children:"Yakıt"}),(0,a.jsx)(j.TableHead,{className:"text-right hidden md:table-cell",children:"KM"}),(0,a.jsx)(j.TableHead,{children:"Durum"}),(0,a.jsx)(j.TableHead,{className:"w-[100px]",children:"İşlem"})]})}),(0,a.jsx)(j.TableBody,{children:0===q.length?(0,a.jsx)(j.TableRow,{children:(0,a.jsxs)(j.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,a.jsx)(i.Car,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Araç bulunamadı"})]})}):q.map(e=>(0,a.jsxs)(j.TableRow,{children:[(0,a.jsx)(j.TableCell,{className:"font-medium",children:e.plate}),(0,a.jsxs)(j.TableCell,{children:[e.brand," ",e.model]}),(0,a.jsx)(j.TableCell,{className:"hidden md:table-cell",children:e.year}),(0,a.jsx)(j.TableCell,{className:"hidden sm:table-cell",children:L[e.type]||e.type}),(0,a.jsx)(j.TableCell,{className:"hidden lg:table-cell",children:F[e.fuelType]||e.fuelType}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono hidden md:table-cell",children:e.km?.toLocaleString()||"-"}),(0,a.jsx)(j.TableCell,{children:(0,a.jsx)("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${B[e.status]?.color||"bg-gray-100"}`,children:B[e.status]?.label||e.status})}),(0,a.jsx)(j.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>ee(e),children:(0,a.jsx)(o.Eye,{className:"h-4 w-4"})}),(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>ee(e),children:(0,a.jsx)(c.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>ea(e),children:(0,a.jsx)(d.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]}),"fuel"===K&&(0,a.jsxs)(j.Table,{className:"min-w-[700px]",children:[(0,a.jsx)(j.TableHeader,{children:(0,a.jsxs)(j.TableRow,{children:[(0,a.jsx)(j.TableHead,{children:"Tarih"}),(0,a.jsx)(j.TableHead,{children:"Plaka"}),(0,a.jsx)(j.TableHead,{className:"text-right",children:"Litre"}),(0,a.jsx)(j.TableHead,{className:"text-right hidden sm:table-cell",children:"Birim Fiyat"}),(0,a.jsx)(j.TableHead,{className:"text-right",children:"Toplam"}),(0,a.jsx)(j.TableHead,{className:"text-right hidden md:table-cell",children:"KM"}),(0,a.jsx)(j.TableHead,{className:"hidden lg:table-cell",children:"Istasyon"}),(0,a.jsx)(j.TableHead,{className:"w-[100px]",children:"Islem"})]})}),(0,a.jsx)(j.TableBody,{children:0===N.length?(0,a.jsx)(j.TableRow,{children:(0,a.jsxs)(j.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,a.jsx)(r.Fuel,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Yakit kaydi bulunamadi"})]})}):N.map(e=>(0,a.jsxs)(j.TableRow,{children:[(0,a.jsx)(j.TableCell,{children:(0,g.formatDate)(e.date)}),(0,a.jsx)(j.TableCell,{className:"font-medium",children:Q(e.vehicleId)}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono",children:e.liters?.toFixed(2)}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono hidden sm:table-cell",children:(0,g.formatCurrency)(e.pricePerLiter||0)}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono font-medium",children:(0,g.formatCurrency)(e.totalAmount||0)}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono hidden md:table-cell",children:e.km?.toLocaleString()}),(0,a.jsx)(j.TableCell,{className:"hidden lg:table-cell",children:e.station||"-"}),(0,a.jsx)(j.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{G(e),M(!0)},children:(0,a.jsx)(c.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>el(e),children:(0,a.jsx)(d.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]}),"maintenance"===K&&(0,a.jsxs)(j.Table,{className:"min-w-[700px]",children:[(0,a.jsx)(j.TableHeader,{children:(0,a.jsxs)(j.TableRow,{children:[(0,a.jsx)(j.TableHead,{children:"Tarih"}),(0,a.jsx)(j.TableHead,{children:"Plaka"}),(0,a.jsx)(j.TableHead,{className:"hidden sm:table-cell",children:"Tip"}),(0,a.jsx)(j.TableHead,{className:"hidden lg:table-cell",children:"Aciklama"}),(0,a.jsx)(j.TableHead,{className:"text-right",children:"Tutar"}),(0,a.jsx)(j.TableHead,{className:"text-right hidden md:table-cell",children:"KM"}),(0,a.jsx)(j.TableHead,{className:"hidden md:table-cell",children:"Servis"}),(0,a.jsx)(j.TableHead,{className:"w-[100px]",children:"Islem"})]})}),(0,a.jsx)(j.TableBody,{children:0===C.length?(0,a.jsx)(j.TableRow,{children:(0,a.jsxs)(j.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,a.jsx)(n.Wrench,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"Bakim kaydi bulunamadi"})]})}):C.map(e=>(0,a.jsxs)(j.TableRow,{children:[(0,a.jsx)(j.TableCell,{children:(0,g.formatDate)(e.date)}),(0,a.jsx)(j.TableCell,{className:"font-medium",children:Q(e.vehicleId)}),(0,a.jsx)(j.TableCell,{className:"hidden sm:table-cell",children:e.type}),(0,a.jsx)(j.TableCell,{className:"max-w-[200px] truncate hidden lg:table-cell",children:e.description||"-"}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono font-medium",children:(0,g.formatCurrency)(e.cost||0)}),(0,a.jsx)(j.TableCell,{className:"text-right font-mono hidden md:table-cell",children:e.km?.toLocaleString()}),(0,a.jsx)(j.TableCell,{className:"hidden md:table-cell",children:e.vendor||"-"}),(0,a.jsx)(j.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{J(e),_(!0)},children:(0,a.jsx)(c.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(u.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>et(e),children:(0,a.jsx)(d.Trash2,{className:"h-4 w-4"})})]})})]},e.id))})]})]})}),(0,a.jsx)(T,{open:z,onOpenChange:P,vehicle:R}),(0,a.jsx)(w,{open:Y,onOpenChange:M,fuelRecord:U}),(0,a.jsx)(I,{open:V,onOpenChange:_,maintenanceRecord:W})]})}e.s(["default",()=>E],9505)}]);