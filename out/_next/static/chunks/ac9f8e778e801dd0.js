(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69322,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(7233),l=e.i(55436),r=e.i(16715),i=e.i(88511),n=e.i(27612),c=e.i(86536),d=e.i(61911),o=e.i(7486),m=e.i(43432),x=e.i(63488),h=e.i(61659),u=e.i(69638),j=e.i(73884),p=e.i(63209),g=e.i(99602),b=e.i(75558),v=e.i(25063),y=e.i(19455),N=e.i(93479),f=e.i(15288),C=e.i(84774),S=e.i(67489),w=e.i(75157),k=e.i(69457),T=e.i(76639),I=e.i(10204),B=e.i(24687),L=e.i(31278),A=e.i(84614),V=e.i(46897),F=e.i(98919),D=e.i(23945),P=e.i(75254);let G=(0,P.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]);var E=e.i(57086);let z=(0,P.default)("tags",[["path",{d:"M13.172 2a2 2 0 0 1 1.414.586l6.71 6.71a2.4 2.4 0 0 1 0 3.408l-4.592 4.592a2.4 2.4 0 0 1-3.408 0l-6.71-6.71A2 2 0 0 1 6 9.172V3a1 1 0 0 1 1-1z",key:"16rjxf"}],["path",{d:"M2 7v6.172a2 2 0 0 0 .586 1.414l6.71 6.71a2.4 2.4 0 0 0 3.191.193",key:"178nd4"}],["circle",{cx:"10.5",cy:"6.5",r:".5",fill:"currentColor",key:"12ikhr"}]]);var M=e.i(88844),O=e.i(37727),H=e.i(77572),R=e.i(99375),K=e.i(57428),U=e.i(30397),$=e.i(80208),Y=e.i(70658),X=e.i(74612);let Z=[{code:"SI",name:"Slovenya",flag:"ðŸ‡¸ðŸ‡®"},{code:"AT",name:"Avusturya",flag:"ðŸ‡¦ðŸ‡¹"},{code:"DE",name:"Almanya",flag:"ðŸ‡©ðŸ‡ª"},{code:"IT",name:"Ä°talya",flag:"ðŸ‡®ðŸ‡¹"},{code:"HR",name:"HÄ±rvatistan",flag:"ðŸ‡­ðŸ‡·"},{code:"TR",name:"TÃ¼rkiye",flag:"ðŸ‡¹ðŸ‡·"},{code:"FR",name:"Fransa",flag:"ðŸ‡«ðŸ‡·"},{code:"ES",name:"Ä°spanya",flag:"ðŸ‡ªðŸ‡¸"},{code:"GR",name:"Yunanistan",flag:"ðŸ‡¬ðŸ‡·"},{code:"HU",name:"Macaristan",flag:"ðŸ‡­ðŸ‡º"},{code:"CZ",name:"Ã‡ekya",flag:"ðŸ‡¨ðŸ‡¿"},{code:"SK",name:"Slovakya",flag:"ðŸ‡¸ðŸ‡°"}];function q({open:e,onOpenChange:t,customer:r,viewMode:i=!1,onSave:c,onSuccess:d}){let x=!!r?.id,[p,g]=(0,s.useState)(!1),[b,v]=(0,s.useState)(!1),[f,C]=(0,s.useState)(null),[w,P]=(0,s.useState)(""),[q,_]=(0,s.useState)(""),[W,J]=(0,s.useState)("company"),[Q,ee]=(0,s.useState)("active"),[ea,es]=(0,s.useState)("standard"),[et,el]=(0,s.useState)(""),[er,ei]=(0,s.useState)(""),[en,ec]=(0,s.useState)(""),[ed,eo]=(0,s.useState)(""),[em,ex]=(0,s.useState)(""),[eh,eu]=(0,s.useState)(""),[ej,ep]=(0,s.useState)(""),[eg,eb]=(0,s.useState)("SI"),[ev,ey]=(0,s.useState)("SI"),[eN,ef]=(0,s.useState)(""),[eC,eS]=(0,s.useState)(""),[ew,ek]=(0,s.useState)("0"),[eT,eI]=(0,s.useState)("0"),[eB,eL]=(0,s.useState)("30"),[eA,eV]=(0,s.useState)(""),[eF,eD]=(0,s.useState)(!1),[eP,eG]=(0,s.useState)(""),[eE,ez]=(0,s.useState)(""),[eM,eO]=(0,s.useState)("market"),[eH,eR]=(0,s.useState)("0"),[eK,eU]=(0,s.useState)([]),[e$,eY]=(0,s.useState)({}),[eX,eZ]=(0,s.useState)({}),[eq,e_]=(0,s.useState)("sl"),[eW,eJ]=(0,s.useState)({canOrder:!0,canViewPrices:!0,canViewBalance:!0,canViewHistory:!0}),[eQ,e0]=(0,s.useState)(!1),[e2,e4]=(0,s.useState)(!1),[e1,e5]=(0,s.useState)(""),[e3,e6]=(0,s.useState)([]),[e7,e8]=(0,s.useState)(!1);(0,s.useEffect)(()=>{if(r){let e=r.basic||{},a=r.contact||{},s=r.addressInfo||{},t=r.financial||{};P(e.code||r.code||""),_(e.name||r.name||r.companyName||""),J(e.type||r.type||"company"),ee(e.status||r.status||"active"),es(e.customerGroup||r.customerGroup||"standard"),el(a.email||r.email||""),ei(a.phone||r.phone||""),ec(a.mobile||r.mobile||""),eo(a.website||r.website||""),ex(s.street||r.address||""),eu(s.city||r.city||""),ep(s.postalCode||r.postalCode||""),eb(s.country||r.country||"SI");let l=t.vatNumber||r.vatNumber||"";if(l&&l.length>=2){let e=l.substring(0,2).toUpperCase(),a=l.substring(2);/^[A-Z]{2}$/.test(e)?(ey(e),ef(a)):ef(l)}else ef(l);eS(t.taxNumber||r.taxNumber||""),ek(String(t.creditLimit||r.creditLimit||0)),eI(String(t.discount||r.discount||0)),eL(String(t.paymentTerms||r.paymentTerms||30)),eV("string"==typeof r.notes?r.notes:"");let i=r.b2bLogin||{};eD(!!i.username||!0===i.isActive),eG(i.username||""),ez(""),eO(i.customerType||"market"),eR(String(i.discount||0)),eU(i.allowedCategories||[]),eY(i.categoryDiscounts||{}),eZ(i.productPrices||{}),e_(i.language||"sl"),eJ(i.permissions||{canOrder:!0,canViewPrices:!0,canViewBalance:!0,canViewHistory:!0})}else P(""),_(""),J("company"),ee("active"),es("standard"),el(""),ei(""),ec(""),eo(""),ex(""),eu(""),ep(""),eb("SI"),ey("SI"),ef(""),eS(""),ek("0"),eI("0"),eL("30"),eV(""),eD(!1),eG(""),ez(""),eO("market"),eR("0"),eU([]),eY({}),eZ({}),e_("sl"),eJ({canOrder:!0,canViewPrices:!0,canViewBalance:!0,canViewHistory:!0});C(null)},[r,e]);let e9=async()=>{if(!eN.trim()||eN.length<6)return void alert("Gecerli bir VAT numarasi giriniz");v(!0),C(null);try{let e=ev+eN.trim(),a=await (0,X.validateVATNumber)(e);if(C(a),a.valid&&a.countryCode&&eb(a.countryCode),a.valid&&a.companyName){if(q.trim()||_(a.companyName),a.companyAddress){let e=a.companyAddress.split("\n").filter(Boolean);if(e.length>0){em.trim()||ex(e[0]);let a=e[e.length-1]||"",s=a.match(/\b(\d{4,6})\b/);if(s&&!ej.trim()){ep(s[1]);let e=a.replace(s[0],"").trim().replace(/^,?\s*/,"");e&&!eh.trim()&&eu(e)}}}a.countryCode&&eb(a.countryCode),J("company")}}catch(e){C({valid:!1,error:"Dogrulama hatasi"})}finally{v(!1)}},ae=async e=>{if(e.preventDefault(),!q.trim())return void alert("MÃ¼ÅŸteri adÄ± zorunludur!");if(eF){let e=r?.b2bLogin?.username;if(!eP.trim())return void alert("B2B Portal aktif edildi ancak kullanÄ±cÄ± adÄ± girilmedi!");if(!e&&!eE.trim())return void alert("Yeni B2B hesabÄ± iÃ§in ÅŸifre girmelisiniz!")}g(!0);try{let e={basic:{code:w.trim()||aa(),name:q.trim(),type:W,status:Q,customerGroup:ea,vatNumber:eN.trim()?ev+eN.trim():"",vatValidated:f?.valid||!1,vatCountry:f?.countryCode||"",vatCompanyName:f?.companyName||"",vatCheckedAt:f?.valid?new Date().toISOString():""},contact:{email:et.trim(),phone:er.trim(),mobile:en.trim(),website:ed.trim(),address:{street:em.trim(),city:eh.trim(),postalCode:ej.trim(),country:eg}},financial:{currency:"EUR",creditLimit:parseFloat(ew)||0,currentBalance:r?.financial?.currentBalance||r?.balance||0,discount:parseFloat(eT)||0,paymentTerms:parseInt(eB)||30},notes:(eA||"").trim(),isActive:!0,updatedAt:new Date().toISOString(),type:{isCustomer:!0,isSupplier:!1,isBoth:!1}},a=r?.id;if(x?await (0,k.updateData)(`partners/${r.id}`,e):(e.createdAt=new Date().toISOString(),a=await (0,k.pushData)("partners",e)),eF&&eP.trim()&&a){let e={};Object.entries(e$).forEach(([a,s])=>{s>0&&(e[a]=s)});let s={customerType:eM,discount:parseFloat(eH)||0,allowedCategories:eK,categoryDiscounts:e,productPrices:eX,language:eq,permissions:eW,isActive:!0,updatedAt:new Date().toISOString()};r?.b2bLogin?.username,eE.trim()&&await (0,Y.createB2BAccount)(eP.trim().toLowerCase(),eE,a,q,eW,"ADMIN"),s.username=eP.trim().toLowerCase(),await (0,k.updateData)(`partners/${a}/b2bLogin`,s)}c?.(),d?.(),t(!1)}catch(e){console.error("Save error:",e),alert("KayÄ±t hatasÄ±: "+e.message)}finally{g(!1)}},aa=()=>{let e=Date.now().toString(36).toUpperCase();return`CUST-${e}`};return(0,a.jsx)(T.Dialog,{open:e,onOpenChange:t,children:(0,a.jsxs)(T.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(T.DialogHeader,{children:(0,a.jsxs)(T.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(o.Building2,{className:"h-5 w-5"}),x?"MÃ¼ÅŸteri DÃ¼zenle":"Yeni MÃ¼ÅŸteri"]})}),(0,a.jsxs)("form",{onSubmit:ae,className:"space-y-4",children:[(0,a.jsxs)(H.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,a.jsxs)(H.TabsList,{className:"grid w-full grid-cols-3",children:[(0,a.jsx)(H.TabsTrigger,{value:"basic",children:"Temel Bilgiler"}),(0,a.jsx)(H.TabsTrigger,{value:"finance",children:"Finans"}),(0,a.jsxs)(H.TabsTrigger,{value:"b2b",className:"flex items-center gap-1",children:[(0,a.jsx)(D.Store,{className:"h-3 w-3"}),"B2B Portal"]})]}),(0,a.jsxs)(H.TabsContent,{value:"basic",className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-amber-50 rounded-lg border border-amber-200",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-amber-800",children:[(0,a.jsx)(F.Shield,{className:"h-4 w-4"}),"EU VAT Dogrulama (VIES)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(S.Select,{value:ev,onValueChange:e=>{ey(e),C(null)},disabled:i,children:[(0,a.jsx)(S.SelectTrigger,{className:"w-[130px] bg-white",children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsx)(S.SelectContent,{children:Z.map(e=>(0,a.jsxs)(S.SelectItem,{value:e.code,children:[e.flag," ",e.code]},e.code))})]}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(N.Input,{value:eN,onChange:e=>{ef(e.target.value.replace(/\s/g,"").toUpperCase()),C(null)},onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),!eN.trim()||b||i||e9())},placeholder:"12345678",className:"bg-white",disabled:i})}),(0,a.jsxs)(y.Button,{type:"button",variant:"outline",onClick:e9,disabled:b||i||!eN.trim(),className:"bg-white",children:[b?(0,a.jsx)(L.Loader2,{className:"h-4 w-4 animate-spin mr-2"}):(0,a.jsx)(F.Shield,{className:"h-4 w-4 mr-2"}),"Dogrula"]})]}),f&&(0,a.jsxs)("div",{className:`p-3 rounded-lg text-sm ${f.valid?"bg-green-100 text-green-800 border border-green-200":"bg-red-100 text-red-800 border border-red-200"}`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[f.valid?(0,a.jsx)(u.CheckCircle,{className:"h-4 w-4"}):(0,a.jsx)(j.XCircle,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"font-medium",children:f.valid?"VAT Numarasi Gecerli":"VAT Numarasi Gecersiz"})]}),f.companyName&&(0,a.jsxs)("div",{className:"mt-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Sirket:"})," ",f.companyName]}),f.companyAddress&&(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{children:"Adres:"})," ",f.companyAddress]})]}),f.error&&(0,a.jsx)("div",{className:"mt-1 text-xs",children:f.error})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(A.User,{className:"h-4 w-4"}),"Temel Bilgiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"code",children:"MÃ¼ÅŸteri Kodu"}),(0,a.jsx)(N.Input,{id:"code",value:w,onChange:e=>P(e.target.value),placeholder:"Otomatik oluÅŸturulur"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"name",children:"MÃ¼ÅŸteri AdÄ± *"}),(0,a.jsx)(N.Input,{id:"name",value:q,onChange:e=>_(e.target.value),placeholder:"Firma veya kiÅŸi adÄ±",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"type",children:"MÃ¼ÅŸteri TÃ¼rÃ¼"}),(0,a.jsxs)(S.Select,{value:W,onValueChange:J,children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"company",children:"Kurumsal"}),(0,a.jsx)(S.SelectItem,{value:"individual",children:"Bireysel"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"status",children:"Durum"}),(0,a.jsxs)(S.Select,{value:Q,onValueChange:ee,children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(S.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(S.SelectItem,{value:"blocked",children:"Blokeli"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(I.Label,{htmlFor:"customerGroup",children:"MÃ¼ÅŸteri Grubu"}),(0,a.jsxs)(S.Select,{value:ea,onValueChange:es,children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"standard",children:"Standart"}),(0,a.jsx)(S.SelectItem,{value:"vip",children:"VIP"}),(0,a.jsx)(S.SelectItem,{value:"wholesale",children:"Toptan"}),(0,a.jsx)(S.SelectItem,{value:"retail",children:"Perakende"})]})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(m.Phone,{className:"h-4 w-4"}),"Ä°letiÅŸim Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"email",children:"E-posta"}),(0,a.jsx)(N.Input,{id:"email",type:"email",value:et,onChange:e=>el(e.target.value),placeholder:"ornek@firma.com"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"phone",children:"Telefon"}),(0,a.jsx)(N.Input,{id:"phone",value:er,onChange:e=>ei(e.target.value),placeholder:"+386 1 234 5678"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"mobile",children:"Mobil"}),(0,a.jsx)(N.Input,{id:"mobile",value:en,onChange:e=>ec(e.target.value),placeholder:"+386 40 123 456"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"website",children:"Website"}),(0,a.jsx)(N.Input,{id:"website",value:ed,onChange:e=>eo(e.target.value),placeholder:"www.firma.com"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(V.MapPin,{className:"h-4 w-4"}),"Adres Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(I.Label,{htmlFor:"address",children:"Adres"}),(0,a.jsx)(N.Input,{id:"address",value:em,onChange:e=>ex(e.target.value),placeholder:"Sokak, numara"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"city",children:"Åžehir"}),(0,a.jsx)(N.Input,{id:"city",value:eh,onChange:e=>eu(e.target.value),placeholder:"Ljubljana"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"postalCode",children:"Posta Kodu"}),(0,a.jsx)(N.Input,{id:"postalCode",value:ej,onChange:e=>ep(e.target.value),placeholder:"1000"})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(I.Label,{htmlFor:"country",children:"Ãœlke"}),(0,a.jsxs)(S.Select,{value:eg,onValueChange:eb,children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsx)(S.SelectContent,{children:Z.map(e=>(0,a.jsxs)(S.SelectItem,{value:e.code,children:[e.flag," ",e.name]},e.code))})]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(B.Textarea,{id:"notes",value:eA,onChange:e=>eV(e.target.value),placeholder:"MÃ¼ÅŸteri ile ilgili notlar...",rows:2})]})]}),(0,a.jsx)(H.TabsContent,{value:"finance",className:"space-y-4 mt-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(h.CreditCard,{className:"h-4 w-4"}),"Finansal Bilgiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"creditLimit",children:"Kredi Limiti (â‚¬)"}),(0,a.jsx)(N.Input,{id:"creditLimit",type:"number",value:ew,onChange:e=>ek(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{htmlFor:"discount",children:"Ä°skonto (%)"}),(0,a.jsx)(N.Input,{id:"discount",type:"number",min:"0",max:"100",value:eT,onChange:e=>eI(e.target.value),placeholder:"0"})]}),(0,a.jsxs)("div",{className:"space-y-2 col-span-2",children:[(0,a.jsx)(I.Label,{htmlFor:"paymentTerms",children:"Ã–deme Vadesi (GÃ¼n)"}),(0,a.jsxs)(S.Select,{value:eB,onValueChange:eL,children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"0",children:"PeÅŸin"}),(0,a.jsx)(S.SelectItem,{value:"7",children:"7 GÃ¼n"}),(0,a.jsx)(S.SelectItem,{value:"15",children:"15 GÃ¼n"}),(0,a.jsx)(S.SelectItem,{value:"30",children:"30 GÃ¼n"}),(0,a.jsx)(S.SelectItem,{value:"45",children:"45 GÃ¼n"}),(0,a.jsx)(S.SelectItem,{value:"60",children:"60 GÃ¼n"}),(0,a.jsx)(S.SelectItem,{value:"90",children:"90 GÃ¼n"})]})]})]})]})]})}),(0,a.jsxs)(H.TabsContent,{value:"b2b",className:"space-y-4 mt-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(D.Store,{className:"h-5 w-5 text-blue-600"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-blue-900",children:"B2B Portal EriÅŸimi"}),(0,a.jsx)("p",{className:"text-sm text-blue-700",children:"MÃ¼ÅŸterinin online sipariÅŸ portalÄ±na eriÅŸimi"})]})]}),(0,a.jsx)(R.Switch,{checked:eF,onCheckedChange:eD})]}),eF&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(G,{className:"h-4 w-4"}),"GiriÅŸ Bilgileri"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{children:"KullanÄ±cÄ± AdÄ±"}),(0,a.jsx)(N.Input,{value:eP,onChange:e=>eG(e.target.value.toLowerCase().replace(/\s/g,"")),placeholder:"ornek.market"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(I.Label,{children:r?.b2bLogin?.username?"Yeni Åžifre (deÄŸiÅŸtirmek iÃ§in)":"Åžifre"}),(0,a.jsx)(N.Input,{type:"password",value:eE,onChange:e=>ez(e.target.value),placeholder:r?.b2bLogin?.username?"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢":"Åžifre girin"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(o.Building2,{className:"h-4 w-4"}),"MÃ¼ÅŸteri Tipi"]}),(0,a.jsxs)(S.Select,{value:eM,onValueChange:e=>eO(e),children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"market",children:"Market (TÃ¼m Ã¼rÃ¼nler)"}),(0,a.jsx)(S.SelectItem,{value:"kasap",children:"Kasap (Et Ã¼rÃ¼nleri odaklÄ±)"}),(0,a.jsx)(S.SelectItem,{value:"both",children:"Her Ä°kisi"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(E.Percent,{className:"h-4 w-4"}),"B2B Ã–zel Ä°skonto"]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(N.Input,{type:"number",min:"0",max:"50",value:eH,onChange:e=>eR(e.target.value),className:"w-24"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:"% indirim (tÃ¼m Ã¼rÃ¼nlere uygulanÄ±r)"})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold flex items-center gap-2 text-blue-900",children:[(0,a.jsx)(z,{className:"h-4 w-4"}),"ÃœrÃ¼n GÃ¶rÃ¼nÃ¼rlÃ¼ÄŸÃ¼ ve Ä°ndirimler"]}),(0,a.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:"Kategori ve Ã¼rÃ¼n bazlÄ± eriÅŸim kontrolÃ¼ ve Ã¶zel indirimler"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:0===eK.length?"TÃ¼mÃ¼ gÃ¶rÃ¼nÃ¼r":`${eK.length} kategori`}),Object.keys(eX).length>0&&(0,a.jsxs)("span",{className:"px-2 py-0.5 bg-orange-100 text-orange-700 text-xs rounded-full",children:["+",Object.keys(eX).length," Ã¼rÃ¼n"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)(y.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{eU(U.CATEGORIES.map(e=>e.code))},className:"bg-white text-xs h-7",children:"TÃ¼mÃ¼nÃ¼ SeÃ§"}),(0,a.jsx)(y.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{eU([]),eY({})},className:"bg-white text-xs h-7",children:"SÄ±fÄ±rla"}),parseFloat(eH)>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded flex items-center gap-1",children:[(0,a.jsx)(E.Percent,{className:"h-3 w-3"}),"Genel: %",eH]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 bg-gray-100 border-b text-xs font-medium text-gray-600",children:[(0,a.jsx)("div",{className:"col-span-1 flex items-center justify-center",children:(0,a.jsx)(u.CheckCircle,{className:"h-3.5 w-3.5"})}),(0,a.jsx)("div",{className:"col-span-7",children:"Kategori"}),(0,a.jsx)("div",{className:"col-span-4 text-center",children:"Ä°ndirim %"})]}),(0,a.jsx)("div",{className:"max-h-56 overflow-y-auto",children:U.CATEGORIES.map(e=>{let s=0===eK.length||eK.includes(e.code),t=e$[e.code]||0,l=e.icon;return(0,a.jsxs)("div",{className:`grid grid-cols-12 gap-2 px-3 py-2 border-b last:border-b-0 items-center transition-colors ${s?"bg-white hover:bg-blue-50/50":"bg-gray-50 opacity-60"}`,children:[(0,a.jsx)("div",{className:"col-span-1 flex items-center justify-center",children:(0,a.jsx)(K.Checkbox,{checked:s,onCheckedChange:a=>{if(a)0===eK.length||eU([...eK,e.code]);else{0===eK.length?eU(U.CATEGORIES.filter(a=>a.code!==e.code).map(e=>e.code)):eU(eK.filter(a=>a!==e.code));let a={...e$};delete a[e.code],eY(a)}},className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"col-span-7 flex items-center gap-2",children:[l&&(0,a.jsx)(l,{className:`h-4 w-4 ${e.color||"text-gray-500"}`}),(0,a.jsx)("span",{className:`text-sm ${s?"text-gray-900":"text-gray-500"}`,children:e.nameTR}),t>0&&(0,a.jsx)("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 text-[10px] rounded-full",children:"Ã–zel"})]}),(0,a.jsxs)("div",{className:"col-span-4 flex items-center justify-center gap-1",children:[(0,a.jsx)(N.Input,{type:"number",min:"0",max:"50",value:t||"",onChange:a=>{let s=parseFloat(a.target.value)||0;if(s>0)eY({...e$,[e.code]:s});else{let a={...e$};delete a[e.code],eY(a)}},placeholder:eH||"0",disabled:!s,className:"w-16 h-7 text-center text-sm"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"%"})]})]},e.code)})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-3 text-xs",children:[eK.length>0&&(0,a.jsxs)("span",{className:"text-blue-600 flex items-center gap-1",children:[(0,a.jsx)(u.CheckCircle,{className:"h-3 w-3"}),eK.length," / ",U.CATEGORIES.length," kategori gÃ¶rÃ¼nÃ¼r"]}),Object.keys(e$).filter(e=>e$[e]>0).length>0&&(0,a.jsxs)("span",{className:"text-green-600 flex items-center gap-1",children:[(0,a.jsx)(E.Percent,{className:"h-3 w-3"}),Object.keys(e$).filter(e=>e$[e]>0).length," kategoride Ã¶zel indirim"]})]})]}),(0,a.jsxs)("div",{className:"space-y-4 p-4 bg-gradient-to-br from-orange-50 to-amber-50 rounded-lg border border-orange-200",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"text-sm font-semibold flex items-center gap-2 text-orange-900",children:[(0,a.jsx)(M.Package,{className:"h-4 w-4"}),"ÃœrÃ¼n BazlÄ± Ã–zel FiyatlandÄ±rma"]}),(0,a.jsx)("p",{className:"text-xs text-orange-700 mt-1",children:"Belirli Ã¼rÃ¼nlere Ã¶zel fiyat veya indirim uygulayÄ±n"})]}),(0,a.jsxs)(y.Button,{type:"button",variant:e2?"default":"outline",size:"sm",onClick:async()=>{if(e4(!e2),0===e3.length){e8(!0);try{let e=await (0,k.getData)("products");if(e){let a=Object.entries(e).map(([e,a])=>({id:e,...a}));e6(a)}}catch(e){console.error("ÃœrÃ¼nler yÃ¼klenemedi:",e)}finally{e8(!1)}}},className:e2?"bg-orange-600 hover:bg-orange-700":"bg-white",children:[(0,a.jsx)(M.Package,{className:"h-4 w-4 mr-2"}),Object.keys(eX).length>0?`${Object.keys(eX).length} \xfcr\xfcn ayarlÄ±`:"ÃœrÃ¼n Ekle"]})]}),e2&&(0,a.jsxs)("div",{className:"space-y-3 border-t border-orange-200 pt-3",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(N.Input,{value:e1,onChange:e=>e5(e.target.value),placeholder:"ÃœrÃ¼n ara (ad veya kod)...",className:"pl-9 bg-white"}),e1&&(0,a.jsx)("button",{type:"button",onClick:()=>e5(""),className:"absolute right-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)(O.X,{className:"h-4 w-4 text-gray-400 hover:text-gray-600"})})]}),Object.keys(eX).length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg border overflow-hidden",children:[(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 bg-gray-100 border-b text-xs font-medium text-gray-600",children:[(0,a.jsx)("div",{className:"col-span-5",children:"ÃœrÃ¼n"}),(0,a.jsx)("div",{className:"col-span-3 text-center",children:"Ã–zel Fiyat"}),(0,a.jsx)("div",{className:"col-span-3 text-center",children:"Ä°ndirim %"}),(0,a.jsx)("div",{className:"col-span-1"})]}),(0,a.jsx)("div",{className:"max-h-40 overflow-y-auto",children:Object.entries(eX).map(([e,s])=>{let t=e3.find(a=>a.id===e);return(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-2 px-3 py-2 border-b last:border-b-0 items-center hover:bg-orange-50/50",children:[(0,a.jsxs)("div",{className:"col-span-5 flex items-center gap-2",children:[(0,a.jsx)(M.Package,{className:"h-4 w-4 text-orange-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-sm truncate",title:t?.name||e,children:t?.name||e})]}),(0,a.jsxs)("div",{className:"col-span-3 flex items-center justify-center gap-1",children:[(0,a.jsx)(N.Input,{type:"number",min:"0",step:"0.01",value:s.price||"",onChange:a=>{let t=parseFloat(a.target.value);eZ({...eX,[e]:{...s,price:t||void 0}})},placeholder:t?.price?.toFixed(2)||"0",className:"w-20 h-7 text-center text-sm"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"â‚¬"})]}),(0,a.jsxs)("div",{className:"col-span-3 flex items-center justify-center gap-1",children:[(0,a.jsx)(N.Input,{type:"number",min:"0",max:"50",value:s.discount||"",onChange:a=>{let t=parseFloat(a.target.value);eZ({...eX,[e]:{...s,discount:t||void 0}})},placeholder:"0",className:"w-14 h-7 text-center text-sm"}),(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"%"})]}),(0,a.jsx)("div",{className:"col-span-1 flex justify-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>{let a={...eX};delete a[e],eZ(a)},className:"p-1 hover:bg-red-100 rounded transition-colors",children:(0,a.jsx)(n.Trash2,{className:"h-4 w-4 text-red-500"})})})]},e)})})]}),e7?(0,a.jsxs)("div",{className:"flex items-center justify-center py-4",children:[(0,a.jsx)(L.Loader2,{className:"h-5 w-5 animate-spin text-orange-400"}),(0,a.jsx)("span",{className:"ml-2 text-sm text-gray-500",children:"ÃœrÃ¼nler yÃ¼kleniyor..."})]}):e1.length>=2?(0,a.jsxs)("div",{className:"bg-white rounded-lg border max-h-48 overflow-y-auto",children:[e3.filter(e=>!eX[e.id]&&(e.name?.toLowerCase().includes(e1.toLowerCase())||e.code?.toLowerCase().includes(e1.toLowerCase()))).slice(0,20).map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{eZ({...eX,[e.id]:{discount:0}}),e5("")},className:"w-full flex items-center gap-3 p-2.5 text-left hover:bg-orange-50 border-b last:border-b-0 transition-colors",children:[(0,a.jsx)(M.Package,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("span",{className:"text-sm font-medium block truncate",children:e.name}),e.code&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:e.code})]}),(0,a.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:["â‚¬",e.price?.toFixed(2)]})]},e.id)),0===e3.filter(e=>!eX[e.id]&&(e.name?.toLowerCase().includes(e1.toLowerCase())||e.code?.toLowerCase().includes(e1.toLowerCase()))).length&&(0,a.jsx)("p",{className:"text-sm text-gray-500 text-center py-4",children:"ÃœrÃ¼n bulunamadÄ±"})]}):(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center py-3 bg-white rounded-lg border border-dashed",children:"En az 2 karakter yazarak Ã¼rÃ¼n arayÄ±n"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:$.B2B_LANGUAGES.find(e=>e.code===eq)?.flag||"ðŸŒ"}),"Portal Dili"]}),(0,a.jsxs)(S.Select,{value:eq,onValueChange:e=>e_(e),children:[(0,a.jsx)(S.SelectTrigger,{children:(0,a.jsx)(S.SelectValue,{})}),(0,a.jsx)(S.SelectContent,{children:$.B2B_LANGUAGES.map(e=>(0,a.jsxs)(S.SelectItem,{value:e.code,children:[e.flag," ",e.name]},e.code))})]})]}),(0,a.jsxs)("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("h4",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(F.Shield,{className:"h-4 w-4"}),"Yetkiler"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)(K.Checkbox,{checked:eW.canOrder,onCheckedChange:e=>eJ({...eW,canOrder:!!e})}),(0,a.jsx)("span",{children:"SipariÅŸ"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)(K.Checkbox,{checked:eW.canViewPrices,onCheckedChange:e=>eJ({...eW,canViewPrices:!!e})}),(0,a.jsx)("span",{children:"Fiyatlar"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)(K.Checkbox,{checked:eW.canViewBalance,onCheckedChange:e=>eJ({...eW,canViewBalance:!!e})}),(0,a.jsx)("span",{children:"Bakiye"})]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer text-sm",children:[(0,a.jsx)(K.Checkbox,{checked:eW.canViewHistory,onCheckedChange:e=>eJ({...eW,canViewHistory:!!e})}),(0,a.jsx)("span",{children:"GeÃ§miÅŸ"})]})]})]})]})]})]})]}),(0,a.jsxs)(T.DialogFooter,{children:[(0,a.jsx)(y.Button,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Ä°ptal"}),(0,a.jsxs)(y.Button,{type:"submit",disabled:p,children:[p&&(0,a.jsx)(L.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),x?"GÃ¼ncelle":"Kaydet"]})]})]})]})})}let _={SI:"ðŸ‡¸ðŸ‡®",AT:"ðŸ‡¦ðŸ‡¹",DE:"ðŸ‡©ðŸ‡ª",IT:"ðŸ‡®ðŸ‡¹",HR:"ðŸ‡­ðŸ‡·",HU:"ðŸ‡­ðŸ‡º",CZ:"ðŸ‡¨ðŸ‡¿",PL:"ðŸ‡µðŸ‡±",FR:"ðŸ‡«ðŸ‡·",NL:"ðŸ‡³ðŸ‡±",BE:"ðŸ‡§ðŸ‡ª",TR:"ðŸ‡¹ðŸ‡·",ES:"ðŸ‡ªðŸ‡¸",GR:"ðŸ‡¬ðŸ‡·",SK:"ðŸ‡¸ðŸ‡°"},W={active:{label:"Aktif",color:"bg-green-100 text-green-700",icon:u.CheckCircle},inactive:{label:"Pasif",color:"bg-gray-100 text-gray-700",icon:j.XCircle},blocked:{label:"Blokeli",color:"bg-red-100 text-red-700",icon:p.AlertCircle}},J={individual:{label:"Bireysel",icon:d.Users},company:{label:"Kurumsal",icon:o.Building2}};function Q(){let[e,o]=(0,s.useState)([]),[j,T]=(0,s.useState)(!0),[I,B]=(0,s.useState)(""),[L,A]=(0,s.useState)("all"),[V,F]=(0,s.useState)("all"),[D,P]=(0,s.useState)(!1),[G,E]=(0,s.useState)(null),[z,M]=(0,s.useState)("name"),[O,H]=(0,s.useState)("asc");(0,s.useEffect)(()=>{(async()=>{try{let e=(await (0,k.getCachedDataArray)("partners")).filter(e=>{let a=e.type?.isCustomer||e.basic?.partnerTypes?.isCustomer,s=!1!==e.isActive&&e.basic?.status!=="deleted";return a&&s}).sort((e,a)=>{let s=e.basic?.name||e.name||e.companyName||"",t=a.basic?.name||a.name||a.companyName||"";return s.localeCompare(t)});o(e)}catch(e){console.error("Customers load error:",e)}finally{T(!1)}})()},[]);let R=(e,a)=>{if(void 0!==e[a])return e[a];let s={code:["basic","code"],name:["basic","name"],type:["basic","type"],status:["basic","status"],customerGroup:["basic","customerGroup"],email:["contact","email"],phone:["contact","phone"],mobile:["contact","mobile"],address:["addressInfo","street"],city:["addressInfo","city"],country:["addressInfo","country"],postalCode:["addressInfo","postalCode"],vatNumber:["financial","vatNumber"],taxNumber:["financial","taxNumber"],balance:["financial","balance"],creditLimit:["financial","creditLimit"],discount:["financial","discount"],paymentTerms:["financial","paymentTerms"]}[a];if(s){let[a,t]=s;return e[a]?.[t]}},K=e.filter(e=>{let a=R(e,"name")||R(e,"companyName")||"",s=R(e,"code")||"",t=R(e,"email")||"",l=R(e,"phone")||"",r=R(e,"status")||"active",i=R(e,"type")||"company",n=a.toLowerCase().includes(I.toLowerCase())||s.toLowerCase().includes(I.toLowerCase())||t.toLowerCase().includes(I.toLowerCase())||l.includes(I),c="all"===L||r===L,d="all"===V||i===V;return n&&c&&d}).sort((e,a)=>{let s,t;switch(z){case"code":s=R(e,"code")||"",t=R(a,"code")||"";break;case"name":s=R(e,"name")||R(e,"companyName")||"",t=R(a,"name")||R(a,"companyName")||"";break;case"city":s=R(e,"city")||"",t=R(a,"city")||"";break;case"country":s=R(e,"country")||"",t=R(a,"country")||"";break;case"balance":s=R(e,"balance")||0,t=R(a,"balance")||0;break;case"createdAt":s=e.createdAt||"",t=a.createdAt||"";break;default:s=R(e,"name")||"",t=R(a,"name")||""}if("balance"===z)return"asc"===O?s-t:t-s;if("code"===z){let e=String(s).localeCompare(String(t),"tr",{numeric:!0});return"asc"===O?e:-e}let l=String(s).localeCompare(String(t),"tr");return"asc"===O?l:-l}),U={total:e.length,active:e.filter(e=>"active"===(R(e,"status")||"active")).length,blocked:e.filter(e=>"blocked"===R(e,"status")).length,totalBalance:e.reduce((e,a)=>e+(R(a,"balance")||0),0)},$=e=>{E(e),P(!0)},Y=async e=>{let a=R(e,"name")||R(e,"companyName")||"Bu mÃ¼ÅŸteri";if(confirm(`"${a}" m\xfcÅŸterisini silmek istediÄŸinize emin misiniz?`))try{await (0,k.removeData)(`partners/${e.id}`)}catch(e){console.error("Delete error:",e),alert("Silme hatasÄ±: "+e.message)}};return j?(0,a.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(r.RefreshCw,{className:"h-8 w-8 animate-spin text-primary mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"MÃ¼ÅŸteriler yÃ¼kleniyor..."})]})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"MÃ¼ÅŸteriler"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"MÃ¼ÅŸteri kayÄ±tlarÄ±nÄ± yÃ¶netin ve takip edin"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(y.Button,{variant:"outline",size:"icon",onClick:()=>{T(!0),setTimeout(()=>T(!1),500)},children:(0,a.jsx)(r.RefreshCw,{className:`h-4 w-4 ${j?"animate-spin":""}`})}),(0,a.jsxs)(y.Button,{onClick:()=>{E(null),P(!0)},children:[(0,a.jsx)(t.Plus,{className:"h-4 w-4 mr-2"}),"Yeni MÃ¼ÅŸteri"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(f.Card,{children:(0,a.jsx)(f.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam MÃ¼ÅŸteri"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:U.total})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-amber-100 flex items-center justify-center",children:(0,a.jsx)(d.Users,{className:"h-6 w-6 text-amber-600"})})]})})}),(0,a.jsx)(f.Card,{children:(0,a.jsx)(f.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Aktif MÃ¼ÅŸteri"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600",children:U.active})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-green-100 flex items-center justify-center",children:(0,a.jsx)(u.CheckCircle,{className:"h-6 w-6 text-green-600"})})]})})}),(0,a.jsx)(f.Card,{children:(0,a.jsx)(f.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Blokeli"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-600",children:U.blocked})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-red-100 flex items-center justify-center",children:(0,a.jsx)(p.AlertCircle,{className:"h-6 w-6 text-red-600"})})]})})}),(0,a.jsx)(f.Card,{children:(0,a.jsx)(f.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Toplam Bakiye"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:(0,w.formatCurrency)(U.totalBalance)})]}),(0,a.jsx)("div",{className:"h-12 w-12 rounded-full bg-purple-100 flex items-center justify-center",children:(0,a.jsx)(h.CreditCard,{className:"h-6 w-6 text-purple-600"})})]})})})]}),(0,a.jsx)(f.Card,{children:(0,a.jsx)(f.CardContent,{className:"pt-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(l.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(N.Input,{placeholder:"MÃ¼ÅŸteri ara (isim, kod, email, telefon)...",value:I,onChange:e=>B(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(S.Select,{value:L,onValueChange:A,children:[(0,a.jsx)(S.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(S.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"all",children:"TÃ¼m Durumlar"}),(0,a.jsx)(S.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(S.SelectItem,{value:"inactive",children:"Pasif"}),(0,a.jsx)(S.SelectItem,{value:"blocked",children:"Blokeli"})]})]}),(0,a.jsxs)(S.Select,{value:V,onValueChange:F,children:[(0,a.jsx)(S.SelectTrigger,{className:"w-[180px]",children:(0,a.jsx)(S.SelectValue,{placeholder:"TÃ¼r"})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"all",children:"TÃ¼m TÃ¼rler"}),(0,a.jsx)(S.SelectItem,{value:"individual",children:"Bireysel"}),(0,a.jsx)(S.SelectItem,{value:"company",children:"Kurumsal"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 border-l pl-4",children:[(0,a.jsx)(g.ArrowUpDown,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsxs)(S.Select,{value:z,onValueChange:M,children:[(0,a.jsx)(S.SelectTrigger,{className:"w-[140px]",children:(0,a.jsx)(S.SelectValue,{placeholder:"SÄ±rala"})}),(0,a.jsxs)(S.SelectContent,{children:[(0,a.jsx)(S.SelectItem,{value:"name",children:"Ä°sim"}),(0,a.jsx)(S.SelectItem,{value:"code",children:"Kod"}),(0,a.jsx)(S.SelectItem,{value:"city",children:"Åžehir"}),(0,a.jsx)(S.SelectItem,{value:"country",children:"Ãœlke"}),(0,a.jsx)(S.SelectItem,{value:"balance",children:"Bakiye"}),(0,a.jsx)(S.SelectItem,{value:"createdAt",children:"Eklenme"})]})]}),(0,a.jsx)(y.Button,{variant:"outline",size:"icon",onClick:()=>H("asc"===O?"desc":"asc"),title:"asc"===O?"Artan":"Azalan",children:"asc"===O?(0,a.jsx)(b.ArrowUp,{className:"h-4 w-4"}):(0,a.jsx)(v.ArrowDown,{className:"h-4 w-4"})})]})]})})}),(0,a.jsxs)(f.Card,{children:[(0,a.jsx)(f.CardHeader,{children:(0,a.jsxs)(f.CardTitle,{className:"text-lg font-medium",children:["MÃ¼ÅŸteri Listesi",(0,a.jsxs)("span",{className:"ml-2 text-sm font-normal text-muted-foreground",children:["(",K.length," kayÄ±t)"]})]})}),(0,a.jsx)(f.CardContent,{children:(0,a.jsxs)(C.Table,{children:[(0,a.jsx)(C.TableHeader,{children:(0,a.jsxs)(C.TableRow,{children:[(0,a.jsx)(C.TableHead,{children:"Kod"}),(0,a.jsx)(C.TableHead,{children:"MÃ¼ÅŸteri AdÄ±"}),(0,a.jsx)(C.TableHead,{children:"TÃ¼r"}),(0,a.jsx)(C.TableHead,{children:"Ä°letiÅŸim"}),(0,a.jsx)(C.TableHead,{children:"Ãœlke / Åžehir"}),(0,a.jsx)(C.TableHead,{className:"text-right",children:"Bakiye"}),(0,a.jsx)(C.TableHead,{children:"Durum"}),(0,a.jsx)(C.TableHead,{className:"w-[100px]",children:"Ä°ÅŸlem"})]})}),(0,a.jsx)(C.TableBody,{children:0===K.length?(0,a.jsx)(C.TableRow,{children:(0,a.jsxs)(C.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,a.jsx)(d.Users,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium",children:"MÃ¼ÅŸteri bulunamadÄ±"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"HenÃ¼z mÃ¼ÅŸteri eklenmemiÅŸ veya arama kriterlerine uygun sonuÃ§ yok."})]})}):K.map(e=>{let s=R(e,"code")||"-",t=R(e,"name")||R(e,"companyName")||"-",l=R(e,"type")||"company",r=R(e,"email")||"",d=R(e,"phone")||R(e,"mobile")||"",o=R(e,"country")||"",h=R(e,"city")||"",u=R(e,"balance")||0,j=W[R(e,"status")||"active"]||W.active,p=J[l]||J.company,g=j.icon,b=p.icon;return(0,a.jsxs)(C.TableRow,{children:[(0,a.jsx)(C.TableCell,{className:"font-mono text-sm",children:s}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(b,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)("span",{className:"font-medium",children:t})]})}),(0,a.jsx)(C.TableCell,{children:p.label}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{className:"space-y-1 text-sm",children:[r&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(x.Mail,{className:"h-3 w-3"}),r]}),d&&(0,a.jsxs)("div",{className:"flex items-center gap-1 text-muted-foreground",children:[(0,a.jsx)(m.Phone,{className:"h-3 w-3"}),d]})]})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("span",{children:_[o]||o}),(0,a.jsx)("span",{children:h||"-"})]})}),(0,a.jsx)(C.TableCell,{className:"text-right font-mono",children:(0,a.jsx)("span",{className:u<0?"text-red-600":"",children:(0,w.formatCurrency)(u)})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("span",{className:`inline-flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${j.color}`,children:[(0,a.jsx)(g,{className:"h-3 w-3"}),j.label]})}),(0,a.jsx)(C.TableCell,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(y.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>$(e),children:(0,a.jsx)(c.Eye,{className:"h-4 w-4"})}),(0,a.jsx)(y.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>$(e),children:(0,a.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,a.jsx)(y.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>Y(e),children:(0,a.jsx)(n.Trash2,{className:"h-4 w-4"})})]})})]},e.id)})})]})})]}),(0,a.jsx)(q,{open:D,onOpenChange:P,customer:G,onSave:()=>P(!1)})]})}e.s(["default",()=>Q],69322)}]);