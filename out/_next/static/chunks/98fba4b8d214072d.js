(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(75157);let r=t.forwardRef(({className:e,type:t,...r},i)=>(0,a.jsx)("input",{type:t,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...r}));r.displayName="Input",e.s(["Input",()=>r])},86536,e=>{"use strict";let a=(0,e.i(75254).default)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);e.s(["Eye",()=>a],86536)},31278,e=>{"use strict";let a=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],31278)},7486,e=>{"use strict";let a=(0,e.i(75254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);e.s(["Building2",()=>a],7486)},78894,e=>{"use strict";let a=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>a],78894)},98919,e=>{"use strict";let a=(0,e.i(75254).default)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);e.s(["Shield",()=>a],98919)},18566,(e,a,t)=>{a.exports=e.r(76562)},6355,e=>{"use strict";var a=e.i(69457);let t=[{id:"u1",username:"muhammed.aliisik",password:"Atlas2025!",fullName:"Muhammed Ali Isik",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u2",username:"erol.bakirkaya",password:"Atlas2025!",fullName:"Erol Bakirkaya",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u3",username:"mehmet.yazici",password:"Atlas2025!",fullName:"Mehmet Yazici",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u4",username:"eyup.sahin",password:"Atlas2025!",fullName:"Eyup Sahin",role:"admin",branchId:"all",branchName:"Tum Subeler",status:"active"},{id:"u5",username:"mustafa.senturk",password:"Atlas2025!",fullName:"Mustafa Senturk",role:"depo_muduru",branchId:"merkez",branchName:"Merkez Depo",status:"active"},{id:"u6",username:"halit.isik",password:"Atlas2025!",fullName:"Halit Isik",role:"depo_muduru",branchId:"merkez",branchName:"Merkez Depo",status:"active"},{id:"u7",username:"senaide.ruslanov",password:"Atlas2025!",fullName:"Senaide Ruslanov",role:"finans",branchId:"merkez",branchName:"Merkez Depo",status:"active"},{id:"u8",username:"mert.demir",password:"Atlas2025!",fullName:"Mert Demir",role:"sofor",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"},{id:"u9",username:"banu.senturk",password:"Kasiyer2025!",fullName:"Banu Senturk",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u10",username:"nazan.bakirkaya",password:"Kasiyer2025!",fullName:"Nazan Bakirkaya",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u11",username:"sema.yazici",password:"Kasiyer2025!",fullName:"Sema Yazici",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u12",username:"meryem.isik",password:"Kasiyer2025!",fullName:"Meryem Isik",role:"kasiyer",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u13",username:"yasemin.ince",password:"Kasiyer2025!",fullName:"Yasemin Ince",role:"kasiyer",branchId:"desetka",branchName:"Desetka Market",status:"active"},{id:"u14",username:"ismail.aga",password:"Kasiyer2025!",fullName:"Ismail Aga",role:"kasiyer",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"},{id:"u15",username:"burak.uzun",password:"Kasap2025!",fullName:"Burak Uzun",role:"kasap",branchId:"balkan",branchName:"Balkan Market",status:"active"},{id:"u16",username:"adem.ayhan",password:"Kasap2025!",fullName:"Adem Ayhan",role:"kasap",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"},{id:"u17",username:"sevket.sucuk",password:"Kasap2025!",fullName:"Sevket Sucuk",role:"kasap",branchId:"mesnica",branchName:"Mesnica Kasap",status:"active"}];function s(e){let a=0,t="kasa_pro_2024_salt",s=t+e+t;for(let e=0;e<s.length;e++)a=(a<<5)-a+s.charCodeAt(e),a&=a;return"h$"+Math.abs(a).toString(36)+"_"+e.length}async function r(e,r){try{console.log("Authenticating user:",e);let i=t.find(a=>a.username.toLowerCase()===e.toLowerCase());if(i){if(console.log("System user found:",i.username),i.password===r)return console.log("Password match for system user"),{success:!0,user:{...i,password:""}};return console.log("Password mismatch for system user"),{success:!1,error:"Yanlis sifre"}}console.log("Checking Firestore users...");let l=await (0,a.getFirestoreData)("users");if(l&&l.length>0){let a=l.find(a=>a.username?.toLowerCase()===e.toLowerCase()||a.email?.toLowerCase()===e.toLowerCase());if(a){if(a.status&&"active"!==a.status&&"aktif"!==a.status)return{success:!1,error:"Bu hesap devre disi birakilmis"};let e=a.password||a.sifre;if(e===r||s(r)===e)return{success:!0,user:{...a,password:""}};return{success:!1,error:"Yanlis sifre"}}}console.log("Checking Firestore employees...");let n=await (0,a.getFirestoreData)("employees");if(n&&n.length>0){let a=n.find(a=>{let t=a.username||a.email||a.personal?.email;return t?.toLowerCase()===e.toLowerCase()});if(a){let t=a.password||a.sifre;if(t&&(t===r||s(r)===t))return{success:!0,user:{id:a.id,username:e,password:"",fullName:`${a.firstName||a.personal?.firstName||""} ${a.lastName||a.personal?.lastName||""}`.trim()||e,role:a.role||a.employment?.role||"user",branchId:a.branchId||a.employment?.branchId,branchName:a.branch||a.employment?.branch,status:a.status||a.employment?.status||"active"}}}}return{success:!1,error:"Kullanici bulunamadi veya sifre yanlis"}}catch(e){return console.error("Authentication error:",e),{success:!1,error:"Dogrulama sirasinda bir hata olustu: "+e.message}}}e.s(["authenticateUser",()=>r,"hashPassword",()=>s])},82943,e=>{"use strict";let a,t,s,r;var i,l=e.i(71645);let n=e=>{let a,t=new Set,s=(e,s)=>{let r="function"==typeof e?e(a):e;if(!Object.is(r,a)){let e=a;a=(null!=s?s:"object"!=typeof r||null===r)?r:Object.assign({},a,r),t.forEach(t=>t(a,e))}},r=()=>a,i={setState:s,getState:r,getInitialState:()=>l,subscribe:e=>(t.add(e),()=>t.delete(e))},l=a=e(s,r,i);return i},u=e=>a=>{try{let t=e(a);if(t instanceof Promise)return t;return{then:e=>u(e)(t),catch(e){return this}}}catch(e){return{then(e){return this},catch:a=>u(a)(e)}}},o=(s=(i=(a=(e,a)=>({user:null,isAuthenticated:!1,isLoading:!0,sessionExpiry:null,setUser:a=>{a?e({user:a,isAuthenticated:!0,isLoading:!1,sessionExpiry:Date.now()+288e5}):e({user:null,isAuthenticated:!1,isLoading:!1,sessionExpiry:null})},setLoading:a=>e({isLoading:a}),logout:()=>{e({user:null,isAuthenticated:!1,sessionExpiry:null}),localStorage.removeItem("auth-storage")},checkSession:()=>{let t=a();return!!t.sessionExpiry&&!!t.isAuthenticated&&(!(Date.now()>t.sessionExpiry)||(e({user:null,isAuthenticated:!1,sessionExpiry:null}),!1))}}),t={name:"auth-storage",partialize:e=>({user:e.user,isAuthenticated:e.isAuthenticated,sessionExpiry:e.sessionExpiry}),onRehydrateStorage:()=>e=>{e&&(e.sessionExpiry&&Date.now()>e.sessionExpiry&&(e.user=null,e.isAuthenticated=!1,e.sessionExpiry=null),e.isLoading=!1)}},(e,s,r)=>{let i,l={storage:function(e,a){let t;try{t=e()}catch(e){return}return{getItem:e=>{var a;let s=e=>null===e?null:JSON.parse(e,void 0),r=null!=(a=t.getItem(e))?a:null;return r instanceof Promise?r.then(s):s(r)},setItem:(e,a)=>t.setItem(e,JSON.stringify(a,void 0)),removeItem:e=>t.removeItem(e)}}(()=>localStorage),partialize:e=>e,version:0,merge:(e,a)=>({...a,...e}),...t},n=!1,o=new Set,d=new Set,c=l.storage;if(!c)return a((...a)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(...a)},s,r);let m=()=>{let e=l.partialize({...s()});return c.setItem(l.name,{state:e,version:l.version})},h=r.setState;r.setState=(e,a)=>(h(e,a),m());let p=a((...a)=>(e(...a),m()),s,r);r.getInitialState=()=>p;let b=()=>{var a,t;if(!c)return;n=!1,o.forEach(e=>{var a;return e(null!=(a=s())?a:p)});let r=(null==(t=l.onRehydrateStorage)?void 0:t.call(l,null!=(a=s())?a:p))||void 0;return u(c.getItem.bind(c))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let a=l.migrate(e.state,e.version);return a instanceof Promise?a.then(e=>[!0,e]):[!0,a]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(a=>{var t;let[r,n]=a;if(e(i=l.merge(n,null!=(t=s())?t:p),!0),r)return m()}).then(()=>{null==r||r(i,void 0),i=s(),n=!0,d.forEach(e=>e(i))}).catch(e=>{null==r||r(void 0,e)})};return r.persist={setOptions:e=>{l={...l,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>b(),hasHydrated:()=>n,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(d.add(e),()=>{d.delete(e)})},l.skipHydration||b(),i||p}))?n(i):n,Object.assign(r=e=>(function(e,a=e=>e){let t=l.default.useSyncExternalStore(e.subscribe,l.default.useCallback(()=>a(e.getState()),[e,a]),l.default.useCallback(()=>a(e.getInitialState()),[e,a]));return l.default.useDebugValue(t),t})(s,e),s),r);e.s(["useAuthStore",0,o],82943)},77705,e=>{"use strict";let a=(0,e.i(75254).default)("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);e.s(["EyeOff",()=>a],77705)},52683,e=>{"use strict";var a=e.i(43476),t=e.i(71645),s=e.i(18566),r=e.i(7486),i=e.i(86536),l=e.i(77705),n=e.i(31278),u=e.i(98919),o=e.i(78894),d=e.i(19455),c=e.i(93479),m=e.i(15288),h=e.i(82943),p=e.i(6355);function b(){let e=(0,s.useRouter)(),{setUser:b,isAuthenticated:f,user:y,checkSession:g}=(0,h.useAuthStore)(),[k,x]=(0,t.useState)(""),[v,N]=(0,t.useState)(""),[w,S]=(0,t.useState)(!1),[j,I]=(0,t.useState)(!1),[M,z]=(0,t.useState)(""),[A,C]=(0,t.useState)(0),[D,E]=(0,t.useState)(null);(0,t.useEffect)(()=>{f&&y&&g()&&e.replace("/dashboard")},[f,y,e,g]),(0,t.useEffect)(()=>{if(D&&Date.now()<D){let e=setInterval(()=>{Date.now()>=D&&(E(null),C(0))},1e3);return()=>clearInterval(e)}},[D]);let K=async a=>{if(a.preventDefault(),z(""),D&&Date.now()<D){let e=Math.ceil((D-Date.now())/1e3);z(`Cok fazla basarisiz deneme. ${e} saniye bekleyin.`);return}if(!k.trim())return void z("Kullanici adi gereklidir");if(!v)return void z("Sifre gereklidir");if(v.length<4)return void z("Sifre en az 4 karakter olmalidir");I(!0);try{let a=await (0,p.authenticateUser)(k.trim(),v);if(a.success&&a.user)C(0),b({uid:a.user.id,username:a.user.username,fullName:a.user.fullName,role:a.user.role,branchId:a.user.branchId,branchName:a.user.branchName,permissions:a.user.permissions}),e.push("/dashboard");else{let e=A+1;if(C(e),e>=5){let e=Date.now()+3e5;E(e),z("Cok fazla basarisiz deneme. 5 dakika beklemeniz gerekiyor.")}else z(a.error||"Giris basarisiz. Bilgilerinizi kontrol edin.")}}catch(e){console.error("Login error:",e),z("Bir hata olustu. Lutfen tekrar deneyin.")}finally{I(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-amber-50 via-white to-indigo-50 p-4",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),(0,a.jsxs)("div",{className:"w-full max-w-md relative",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary rounded-2xl shadow-lg shadow-primary/25 mb-4",children:(0,a.jsx)(r.Building2,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Atlas ERP"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Guvenli Isletme Yonetimi"})]}),(0,a.jsxs)(m.Card,{className:"shadow-xl border-0 bg-white/80 backdrop-blur",children:[(0,a.jsxs)(m.CardHeader,{className:"space-y-1 pb-4",children:[(0,a.jsxs)(m.CardTitle,{className:"text-2xl text-center flex items-center justify-center gap-2",children:[(0,a.jsx)(u.Shield,{className:"w-5 h-5 text-green-600"}),"Guvenli Giris"]}),(0,a.jsx)(m.CardDescription,{className:"text-center",children:"Hesabiniza giris yaparak devam edin"})]}),(0,a.jsxs)(m.CardContent,{children:[(0,a.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[M&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-600 text-sm flex items-start gap-2",children:[(0,a.jsx)(o.AlertTriangle,{className:"w-4 h-4 mt-0.5 shrink-0"}),(0,a.jsx)("span",{children:M})]}),D&&Date.now()<D&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200 text-amber-700 text-sm text-center",children:["Hesap kilitli. Kalan sure: ",(()=>{if(!D)return null;let e=D-Date.now();if(e<=0)return null;let a=Math.floor(e/6e4),t=Math.ceil(e%6e4/1e3);return`${a}:${t.toString().padStart(2,"0")}`})()]}),A>2&&A<5&&!D&&(0,a.jsxs)("div",{className:"p-2 rounded-lg bg-amber-50 border border-amber-200 text-amber-600 text-xs text-center",children:[5-A," deneme hakkiniz kaldi"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Kullanici Adi"}),(0,a.jsx)(c.Input,{type:"text",placeholder:"kullanici_adi",value:k,onChange:e=>x(e.target.value),className:"h-11",required:!0,disabled:j||null!==D&&Date.now()<D,autoComplete:"username"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Sifre"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Input,{type:w?"text":"password",placeholder:"********",value:v,onChange:e=>N(e.target.value),className:"h-11 pr-10",required:!0,disabled:j||null!==D&&Date.now()<D,autoComplete:"current-password"}),(0,a.jsx)("button",{type:"button",onClick:()=>S(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",tabIndex:-1,children:w?(0,a.jsx)(l.EyeOff,{className:"h-4 w-4"}):(0,a.jsx)(i.Eye,{className:"h-4 w-4"})})]})]}),(0,a.jsx)(d.Button,{type:"submit",className:"w-full h-11 text-base font-medium",disabled:j||null!==D&&Date.now()<D,children:j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Dogrulanıyor..."]}):"Giris Yap"})]}),(0,a.jsx)("div",{className:"mt-6 pt-6 border-t text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Sifremi unuttum veya hesabiniz yok mu?"," ",(0,a.jsx)("span",{className:"text-primary font-medium",children:"Yonetici ile iletisime gecin"})]})})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-100",children:(0,a.jsxs)("p",{className:"text-xs text-amber-600 text-center",children:[(0,a.jsx)(u.Shield,{className:"w-3 h-3 inline mr-1"}),"Bu sistem yetkili kullanicilara ozeldir. Tum girisler kayit altina alinmaktadir."]})}),(0,a.jsx)("p",{className:"text-center text-sm text-gray-400 mt-6",children:"© 2024 Atlas Group. Tum haklari saklidir."})]})]})}e.s(["default",()=>b])}]);