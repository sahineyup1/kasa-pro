(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,29329,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(19455),i=e.i(10204),l=e.i(67489),n=e.i(76639),s=e.i(77572),o=e.i(84774),c=e.i(69457),u=e.i(31278),d=e.i(16715),m=e.i(3281),h=e.i(88844),x=e.i(25652),p=e.i(35408),g=e.i(78894),b=e.i(69638),f=e.i(17923),v=e.i(12426),y=e.i(33785),j=e.i(94918),k=e.i(25949),S=e.i(33369),T=["axis","item"],C=(0,a.forwardRef)((e,t)=>a.createElement(S.CartesianChart,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:T,tooltipPayloadSearcher:k.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),N=a,w=e.i(7670),P=e.i(97865),A=e.i(22787),O=e.i(69212),I=e.i(94395),D=e.i(81977),E=e.i(79812),M=e.i(73393);e.i(47167);var B=e.i(18519),z=["x","y"];function K(){return(K=Object.assign.bind()).apply(null,arguments)}function L(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function R(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?L(Object(a),!0).forEach(function(t){var r,i,l;r=e,i=t,l=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in r?Object.defineProperty(r,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[i]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):L(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function F(e,t){var{x:a,y:r}=e,i=function(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}(e,z),l=parseInt("".concat(a),10),n=parseInt("".concat(r),10),s=parseInt("".concat(t.height||i.height),10),o=parseInt("".concat(t.width||i.width),10);return R(R(R(R(R({},t),i),l?{x:l}:{}),n?{y:n}:{}),{},{height:s,width:o,name:t.name,radius:t.radius})}function H(e){return a.createElement(B.Shape,K({shapeType:"rectangle",propTransformer:F,activeClassName:"recharts-active-bar"},e))}var V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(a,r)=>{if((0,I.isNumber)(e))return e;var i=(0,I.isNumber)(a)||(0,I.isNullish)(a);return i?e(a,r):(i||function(e,t){if(!e)throw Error("Invariant failed")}(!1,"minPointSize callback function received a value with type of ".concat(typeof a,". Currently only numbers or null/undefined are supported.")),t)}},G=e.i(94585),U=e.i(844);e.i(42696);var $=e.i(27241),_=e.i(15549),W=["children"],Y=(0,a.createContext)({data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0});function Z(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}(e,W);return a.createElement(Y.Provider,{value:r},t)}var q=e.i(59798),X=e.i(46710),J=e.i(61849),Q=e.i(61764),ee=e.i(92860),et=e.i(41088),ea=e.i(77320),er=e.i(22075),ei=e.i(91526),el=e.i(10439);function en(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function es(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?en(Object(a),!0).forEach(function(t){var r,i,l;r=e,i=t,l=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in r?Object.defineProperty(r,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[i]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):en(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var eo=(0,J.createSelector)([Q.selectUnfilteredCartesianItems,(e,t,a,r,i)=>i],(e,t)=>e.filter(e=>"bar"===e.type).find(e=>e.id===t)),ec=(0,J.createSelector)([eo],e=>null==e?void 0:e.maxBarSize),eu=(e,t,a)=>{var r=null!=a?a:e;if(!(0,I.isNullish)(r))return(0,I.getPercentValue)(r,t,0)},ed=(0,J.createSelector)([X.selectChartLayout,Q.selectUnfilteredCartesianItems,(e,t)=>t,(e,t,a)=>a,(e,t,a,r)=>r],(e,t,a,r,i)=>t.filter(t=>"horizontal"===e?t.xAxisId===a:t.yAxisId===r).filter(e=>e.isPanorama===i).filter(e=>!1===e.hide).filter(e=>"bar"===e.type)),em=(0,J.createSelector)([ed,ea.selectRootBarSize,(e,t,a)=>"horizontal"===(0,X.selectChartLayout)(e)?(0,Q.selectCartesianAxisSize)(e,"xAxis",t):(0,Q.selectCartesianAxisSize)(e,"yAxis",a)],(e,t,a)=>{var r=e.filter(el.isStacked),i=e.filter(e=>null==e.stackId);return[...Object.entries(r.reduce((e,t)=>(e[t.stackId]||(e[t.stackId]=[]),e[t.stackId].push(t),e),{})).map(e=>{var[r,i]=e;return{stackId:r,dataKeys:i.map(e=>e.dataKey),barSize:eu(t,a,i[0].barSize)}}),...i.map(e=>({stackId:void 0,dataKeys:[e.dataKey].filter(e=>null!=e),barSize:eu(t,a,e.barSize)}))]}),eh=(e,t,a,r)=>{var i,l;return"horizontal"===(0,X.selectChartLayout)(e)?(i=(0,Q.selectAxisWithScale)(e,"xAxis",t,r),l=(0,Q.selectTicksOfGraphicalItem)(e,"xAxis",t,r)):(i=(0,Q.selectAxisWithScale)(e,"yAxis",a,r),l=(0,Q.selectTicksOfGraphicalItem)(e,"yAxis",a,r)),(0,E.getBandSizeOfAxis)(i,l)},ex=(0,J.createSelector)([em,ea.selectRootMaxBarSize,ea.selectBarGap,ea.selectBarCategoryGap,(e,t,a,r,i)=>{var l,n,s,o,c=eo(e,t,a,r,i);if(null!=c){var u=(0,X.selectChartLayout)(e),d=(0,ea.selectRootMaxBarSize)(e),{maxBarSize:m}=c,h=(0,I.isNullish)(m)?d:m;return"horizontal"===u?(s=(0,Q.selectAxisWithScale)(e,"xAxis",t,r),o=(0,Q.selectTicksOfGraphicalItem)(e,"xAxis",t,r)):(s=(0,Q.selectAxisWithScale)(e,"yAxis",a,r),o=(0,Q.selectTicksOfGraphicalItem)(e,"yAxis",a,r)),null!=(l=null!=(n=(0,E.getBandSizeOfAxis)(s,o,!0))?n:h)?l:0}},eh,ec],(e,t,a,r,i,l,n)=>{var s=function(e,t,a,r,i){var l,n=r.length;if(!(n<1)){var s=(0,I.getPercentValue)(e,a,0,!0),o=[];if((0,er.isWellBehavedNumber)(r[0].barSize)){var c=!1,u=a/n,d=r.reduce((e,t)=>e+(t.barSize||0),0);(d+=(n-1)*s)>=a&&(d-=(n-1)*s,s=0),d>=a&&u>0&&(c=!0,u*=.9,d=n*u);var m={offset:((a-d)/2|0)-s,size:0};l=r.reduce((e,t)=>{var a,r=[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:m.offset+m.size+s,size:c?u:null!=(a=t.barSize)?a:0}}];return m=r[r.length-1].position,r},o)}else{var h=(0,I.getPercentValue)(t,a,0,!0);a-2*h-(n-1)*s<=0&&(s=0);var x=(a-2*h-(n-1)*s)/n;x>1&&(x>>=0);var p=(0,er.isWellBehavedNumber)(i)?Math.min(x,i):x;l=r.reduce((e,t,a)=>[...e,{stackId:t.stackId,dataKeys:t.dataKeys,position:{offset:h+(x+s)*a+(x-p)/2,size:p}}],o)}return l}}(a,r,i!==l?i:l,e,(0,I.isNullish)(n)?t:n);return i!==l&&null!=s&&(s=s.map(e=>es(es({},e),{},{position:es(es({},e.position),{},{offset:e.position.offset-i/2})}))),s}),ep=(0,J.createSelector)([ex,eo],(e,t)=>{if(null!=e&&null!=t){var a=e.find(e=>e.stackId===t.stackId&&null!=t.dataKey&&e.dataKeys.includes(t.dataKey));if(null!=a)return a.position}}),eg=(0,J.createSelector)([(e,t,a,r)=>"horizontal"===(0,X.selectChartLayout)(e)?(0,Q.selectStackGroups)(e,"yAxis",a,r):(0,Q.selectStackGroups)(e,"xAxis",t,r),eo],(e,t)=>{var a=(0,ei.getStackSeriesIdentifier)(t);if(!e||null==a||null==t)return;var{stackId:r}=t;if(null!=r){var i=e[r];if(i){var{stackedData:l}=i;if(l)return l.find(e=>e.key===a)}}}),eb=(0,J.createSelector)([et.selectChartOffsetInternal,et.selectAxisViewBox,(e,t,a,r)=>(0,Q.selectAxisWithScale)(e,"xAxis",t,r),(e,t,a,r)=>(0,Q.selectAxisWithScale)(e,"yAxis",a,r),(e,t,a,r)=>(0,Q.selectTicksOfGraphicalItem)(e,"xAxis",t,r),(e,t,a,r)=>(0,Q.selectTicksOfGraphicalItem)(e,"yAxis",a,r),ep,X.selectChartLayout,ee.selectChartDataWithIndexesIfNotInPanorama,eh,eg,eo,(e,t,a,r,i,l)=>l],(e,t,a,r,i,l,n,s,o,c,u,d,m)=>{var h,{chartData:x,dataStartIndex:p,dataEndIndex:g}=o;if(null!=d&&null!=n&&null!=t&&("horizontal"===s||"vertical"===s)&&null!=a&&null!=r&&null!=i&&null!=l&&null!=c){var{data:b}=d;if(null!=(h=null!=b&&b.length>0?b:null==x?void 0:x.slice(p,g+1)))return function(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:l,xAxis:n,yAxis:s,xAxisTicks:o,yAxisTicks:c,stackedData:u,displayedData:d,offset:m,cells:h,parentViewBox:x,dataStartIndex:p}=e,g="horizontal"===t?s:n,b=u?g.scale.domain():null,f=(0,E.getBaseValueOfBar)({numericAxis:g}),v=g.scale(f);return d.map((e,d)=>{u?y=(0,E.truncateByDomain)(u[d+p],b):Array.isArray(y=(0,E.getValueByDataKey)(e,a))||(y=[f,y]);var g=V(r,0)(y[1],d);if("horizontal"===t){var y,j,k,S,T,C,N,[w,P]=[s.scale(y[0]),s.scale(y[1])];j=(0,E.getCateCoordinateOfBar)({axis:n,ticks:o,bandSize:l,offset:i.offset,entry:e,index:d}),k=null!=(N=null!=P?P:w)?N:void 0,S=i.size;var A=w-P;if(T=(0,I.isNan)(A)?0:A,C={x:j,y:m.top,width:S,height:m.height},Math.abs(g)>0&&Math.abs(T)<Math.abs(g)){var O=(0,I.mathSign)(T||g)*(Math.abs(g)-Math.abs(T));k-=O,T+=O}}else{var[D,M]=[n.scale(y[0]),n.scale(y[1])];if(j=D,k=(0,E.getCateCoordinateOfBar)({axis:s,ticks:c,bandSize:l,offset:i.offset,entry:e,index:d}),S=M-D,T=i.size,C={x:m.left,y:k,width:m.width,height:T},Math.abs(g)>0&&Math.abs(S)<Math.abs(g)){var B=(0,I.mathSign)(S||g)*(Math.abs(g)-Math.abs(S));S+=B}}return null==j||null==k||null==S||null==T?null:eB(eB({},e),{},{stackedBarStart:v,x:j,y:k,width:S,height:T,value:u?y:y[1],payload:e,background:C,tooltipPosition:{x:j+S/2,y:k+T/2},parentViewBox:x},h&&h[d]&&h[d].props)}).filter(Boolean)}({layout:s,barSettings:d,pos:n,parentViewBox:t,bandSize:c,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:l,stackedData:u,displayedData:h,offset:e,cells:m,dataStartIndex:p})}}),ef=e.i(75337),ev=e.i(76735),ey=e.i(95146),ej=e.i(40657),ek=e.i(51883),eS=e.i(91187),eT=e.i(57999),eC=e.i(66576),eN=e.i(29601),ew=e.i(18457),eP=e.i(20135),eA=["onMouseEnter","onMouseLeave","onClick"],eO=["value","background","tooltipPosition"],eI=["id"],eD=["onMouseEnter","onClick","onMouseLeave"];function eE(){return(eE=Object.assign.bind()).apply(null,arguments)}function eM(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eB(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eM(Object(a),!0).forEach(function(t){var r,i,l;r=e,i=t,l=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in r?Object.defineProperty(r,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[i]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eM(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function ez(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var eK=N.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:l,hide:n,unit:s,tooltipType:o}=e,c={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:(0,E.getTooltipNameProp)(l,t),hide:n,type:o,color:i,unit:s}};return N.createElement(U.SetTooltipEntrySettings,{tooltipEntrySettings:c})});function eL(e){var t,a=(0,$.useAppSelector)(ev.selectActiveTooltipIndex),{data:r,dataKey:i,background:l,allOtherBarProps:n}=e,{onMouseEnter:s,onMouseLeave:o,onClick:c}=n,u=ez(n,eA),d=(0,G.useMouseEnterItemDispatch)(s,i),m=(0,G.useMouseLeaveItemDispatch)(o),h=(0,G.useMouseClickItemDispatch)(c,i);if(!l||null==r)return null;var x=(0,eT.svgPropertiesNoEventsFromUnknown)(l);return N.createElement(eN.ZIndexLayer,{zIndex:(t=ew.DefaultZIndexes.barBackground,l&&"object"==typeof l&&"zIndex"in l&&"number"==typeof l.zIndex&&(0,er.isWellBehavedNumber)(l.zIndex)?l.zIndex:t)},r.map((e,t)=>{var{value:r,background:n,tooltipPosition:s}=e,o=ez(e,eO);if(!n)return null;var c=d(e,t),p=m(e,t),g=h(e,t),b=eB(eB(eB(eB(eB({option:l,isActive:String(t)===a},o),{},{fill:"#eee"},n),x),(0,M.adaptEventsOfChild)(u,e,t)),{},{onMouseEnter:c,onMouseLeave:p,onClick:g,dataKey:i,index:t,className:"recharts-bar-background-rectangle"});return N.createElement(H,eE({key:"background-bar-".concat(t)},b))}))}function eR(e){var{showLabels:t,children:a,rects:r}=e,i=null==r?void 0:r.map(e=>{var t={x:e.x,y:e.y,width:e.width,lowerWidth:e.width,upperWidth:e.width,height:e.height};return eB(eB({},t),{},{value:e.value,payload:e.payload,parentViewBox:e.parentViewBox,viewBox:t,fill:e.fill})});return N.createElement(O.CartesianLabelListContextProvider,{value:t?i:void 0},a)}function eF(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:l,dataKey:n}=e,s=(0,$.useAppSelector)(ev.selectActiveTooltipIndex),o=(0,$.useAppSelector)(ev.selectActiveTooltipDataKey),c=a&&String(l)===s&&(null==o||n===o),u=c?a:t;return c?N.createElement(eN.ZIndexLayer,{zIndex:ew.DefaultZIndexes.activeBar},N.createElement(H,eE({},r,{name:String(r.name)},i,{isActive:c,option:u,index:l,dataKey:n}))):N.createElement(H,eE({},r,{name:String(r.name)},i,{isActive:c,option:u,index:l,dataKey:n}))}function eH(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:l}=e;return N.createElement(H,eE({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:l}))}function eV(e){var t,{data:a,props:r}=e,i=null!=(t=(0,eT.svgPropertiesNoEvents)(r))?t:{},{id:l}=i,n=ez(i,eI),{shape:s,dataKey:o,activeBar:c}=r,{onMouseEnter:u,onClick:d,onMouseLeave:m}=r,h=ez(r,eD),x=(0,G.useMouseEnterItemDispatch)(u,o),p=(0,G.useMouseLeaveItemDispatch)(m),g=(0,G.useMouseClickItemDispatch)(d,o);return a?N.createElement(N.Fragment,null,a.map((e,t)=>N.createElement(P.Layer,eE({key:"rectangle-".concat(null==e?void 0:e.x,"-").concat(null==e?void 0:e.y,"-").concat(null==e?void 0:e.value,"-").concat(t),className:"recharts-bar-rectangle"},(0,M.adaptEventsOfChild)(h,e,t),{onMouseEnter:x(e,t),onMouseLeave:p(e,t),onClick:g(e,t)}),c?N.createElement(eF,{shape:s,activeBar:c,baseProps:n,entry:e,index:t,dataKey:o}):N.createElement(eH,{shape:s,baseProps:n,entry:e,index:t,dataKey:o})))):null}function eG(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:l,animationBegin:n,animationDuration:s,animationEasing:o,onAnimationEnd:c,onAnimationStart:u}=t,d=a.current,m=(0,ej.useAnimationId)(t,"recharts-bar-"),[h,x]=(0,N.useState)(!1),p=(0,N.useCallback)(()=>{"function"==typeof c&&c(),x(!1)},[c]),g=(0,N.useCallback)(()=>{"function"==typeof u&&u(),x(!0)},[u]);return N.createElement(eR,{showLabels:!h,rects:r},N.createElement(eC.JavascriptAnimate,{animationId:m,begin:n,duration:s,isActive:l,easing:o,onAnimationEnd:p,onAnimationStart:g,key:m},e=>{var l=1===e?r:null==r?void 0:r.map((t,a)=>{var r=d&&d[a];if(r)return eB(eB({},t),{},{x:(0,I.interpolate)(r.x,t.x,e),y:(0,I.interpolate)(r.y,t.y,e),width:(0,I.interpolate)(r.width,t.width,e),height:(0,I.interpolate)(r.height,t.height,e)});if("horizontal"===i){var l=(0,I.interpolate)(0,t.height,e),n=(0,I.interpolate)(t.stackedBarStart,t.y,e);return eB(eB({},t),{},{y:n,height:l})}var s=(0,I.interpolate)(0,t.width,e),o=(0,I.interpolate)(t.stackedBarStart,t.x,e);return eB(eB({},t),{},{width:s,x:o})});return(e>0&&(a.current=null!=l?l:null),null==l)?null:N.createElement(P.Layer,null,N.createElement(eV,{props:t,data:l}))}),N.createElement(O.LabelListFromLabelProp,{label:t.label}),t.children)}function eU(e){var t=(0,N.useRef)(null);return N.createElement(eG,{previousRectanglesRef:t,props:e})}var e$=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:(0,E.getValueByDataKey)(e,t)}};class e_ extends N.PureComponent{render(){var{hide:e,data:t,dataKey:a,className:r,xAxisId:i,yAxisId:l,needClip:n,background:s,id:o}=this.props;if(e||null==t)return null;var c=(0,w.clsx)("recharts-bar",r);return N.createElement(P.Layer,{className:c,id:o},n&&N.createElement("defs",null,N.createElement(q.GraphicalItemClipPath,{clipPathId:o,xAxisId:i,yAxisId:l})),N.createElement(P.Layer,{className:"recharts-bar-rectangles",clipPath:n?"url(#clipPath-".concat(o,")"):void 0},N.createElement(eL,{data:t,dataKey:a,background:s,allOtherBarProps:this.props}),N.createElement(eU,this.props)))}}var eW={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:0,xAxisId:0,yAxisId:0,zIndex:ew.DefaultZIndexes.bar};function eY(e){var t,{xAxisId:a,yAxisId:r,hide:i,legendType:l,minPointSize:n,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:m}=(0,q.useNeedsClip)(a,r),h=(0,X.useChartLayout)(),x=(0,ef.useIsPanorama)(),p=(0,D.findAllByType)(e.children,A.Cell),g=(0,$.useAppSelector)(t=>eb(t,a,r,x,e.id,p));if("vertical"!==h&&"horizontal"!==h)return null;var b=null==g?void 0:g[0];return t=null==b||null==b.height||null==b.width?0:"vertical"===h?b.height/2:b.width/2,N.createElement(Z,{xAxisId:a,yAxisId:r,data:g,dataPointFormatter:e$,errorBarOffset:t},N.createElement(e_,eE({},e,{layout:h,needClip:m,data:g,xAxisId:a,yAxisId:r,hide:i,legendType:l,minPointSize:n,activeBar:s,animationBegin:o,animationDuration:c,animationEasing:u,isAnimationActive:d})))}var eZ=N.memo(function(e){var t=(0,ek.resolveDefaultProps)(e,eW),a=(0,ef.useIsPanorama)();return N.createElement(_.RegisterGraphicalItemId,{id:t.id,type:"bar"},e=>N.createElement(N.Fragment,null,N.createElement(ey.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:r,value:(0,E.getTooltipNameProp)(a,t),payload:e}]})(t)}),N.createElement(eK,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),N.createElement(eS.SetCartesianGraphicalItem,{type:"bar",id:e,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:(0,E.getNormalizedStackId)(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),N.createElement(eN.ZIndexLayer,{zIndex:t.zIndex},N.createElement(eY,eE({},t,{id:e})))))},eP.propsAreEqual);eZ.displayName="Bar";var eq=e.i(85183),eX=e.i(93230),eJ=e.i(72526),eQ=e.i(34239),e0=e.i(59559),e1=e.i(31195),e2=["axis"],e5=(0,a.forwardRef)((e,t)=>a.createElement(S.CartesianChart,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:e2,tooltipPayloadSearcher:k.arrayTooltipSearcher,categoricalChartProps:e,ref:t})),e4=a,e6=e.i(86031),e3=e.i(41818),e8=(e,t,a,r)=>(0,Q.selectAxisWithScale)(e,"xAxis",t,r),e9=(e,t,a,r)=>(0,Q.selectTicksOfGraphicalItem)(e,"xAxis",t,r),e7=(e,t,a,r)=>(0,Q.selectAxisWithScale)(e,"yAxis",a,r),te=(e,t,a,r)=>(0,Q.selectTicksOfGraphicalItem)(e,"yAxis",a,r),tt=(0,J.createSelector)([X.selectChartLayout,e8,e7,e9,te],(e,t,a,r,i)=>(0,E.isCategoricalAxis)(e,"xAxis")?(0,E.getBandSizeOfAxis)(t,r,!1):(0,E.getBandSizeOfAxis)(a,i,!1));function ta(e){return"line"===e.type}var tr=(0,J.createSelector)([Q.selectUnfilteredCartesianItems,(e,t,a,r,i)=>i],(e,t)=>e.filter(ta).find(e=>e.id===t)),ti=(0,J.createSelector)([X.selectChartLayout,e8,e7,e9,te,tr,tt,ee.selectChartDataWithIndexesIfNotInPanorama],(e,t,a,r,i,l,n,s)=>{var o,{chartData:c,dataStartIndex:u,dataEndIndex:d}=s;if(null!=l&&null!=t&&null!=a&&null!=r&&null!=i&&0!==r.length&&0!==i.length&&null!=n&&("horizontal"===e||"vertical"===e)){var{dataKey:m,data:h}=l;if(null!=(o=null!=h&&h.length>0?h:null==c?void 0:c.slice(u,d+1)))return function(e){var{layout:t,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:l,dataKey:n,bandSize:s,displayedData:o}=e;return o.map((e,o)=>{var c=(0,E.getValueByDataKey)(e,n);if("horizontal"===t)return{x:(0,E.getCateCoordinateOfLine)({axis:a,ticks:i,bandSize:s,entry:e,index:o}),y:(0,I.isNullish)(c)?null:r.scale(c),value:c,payload:e};var u=(0,I.isNullish)(c)?null:a.scale(c),d=(0,E.getCateCoordinateOfLine)({axis:r,ticks:l,bandSize:s,entry:e,index:o});return null==u||null==d?null:{x:u,y:d,value:c,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:a,xAxisTicks:r,yAxisTicks:i,dataKey:m,bandSize:n,displayedData:o})}}),tl=e.i(52734),tn=e.i(43404),ts=e.i(81583),to=["id"],tc=["type","layout","connectNulls","needClip","shape"],tu=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function td(){return(td=Object.assign.bind()).apply(null,arguments)}function tm(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function th(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tm(Object(a),!0).forEach(function(t){var r,i,l;r=e,i=t,l=a[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var r=a.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in r?Object.defineProperty(r,i,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[i]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tm(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function tx(e,t){if(null==e)return{};var a,r,i=function(e,t){if(null==e)return{};var a={};for(var r in e)if(({}).hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],-1===t.indexOf(a)&&({}).propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var tp=e4.memo(e=>{var{dataKey:t,data:a,stroke:r,strokeWidth:i,fill:l,name:n,hide:s,unit:o,tooltipType:c}=e,u={dataDefinedOnItem:a,positions:void 0,settings:{stroke:r,strokeWidth:i,fill:l,dataKey:t,nameKey:void 0,name:(0,E.getTooltipNameProp)(n,t),hide:s,type:c,color:r,unit:o}};return e4.createElement(U.SetTooltipEntrySettings,{tooltipEntrySettings:u})}),tg=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function tb(e){var{clipPathId:t,points:a,props:r}=e,{dot:i,dataKey:l,needClip:n}=r,{id:s}=r,o=tx(r,to),c=(0,eT.svgPropertiesNoEvents)(o);return e4.createElement(e6.Dots,{points:a,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:l,baseProps:c,needClip:n,clipPathId:t})}function tf(e){var{showLabels:t,children:a,points:r}=e,i=(0,e4.useMemo)(()=>null==r?void 0:r.map(e=>{var t,a,r={x:null!=(t=e.x)?t:0,y:null!=(a=e.y)?a:0,width:0,lowerWidth:0,upperWidth:0,height:0};return th(th({},r),{},{value:e.value,payload:e.payload,viewBox:r,parentViewBox:void 0,fill:void 0})}),[r]);return e4.createElement(O.CartesianLabelListContextProvider,{value:t?i:void 0},a)}function tv(e){var{clipPathId:t,pathRef:a,points:r,strokeDasharray:i,props:l}=e,{type:n,layout:s,connectNulls:o,needClip:c,shape:u}=l,d=tx(l,tc),m=th(th({},(0,tn.svgPropertiesAndEvents)(d)),{},{fill:"none",className:"recharts-line-curve",clipPath:c?"url(#clipPath-".concat(t,")"):void 0,points:r,type:n,layout:s,connectNulls:o,strokeDasharray:null!=i?i:l.strokeDasharray});return e4.createElement(e4.Fragment,null,(null==r?void 0:r.length)>1&&e4.createElement(B.Shape,td({shapeType:"curve",option:u},m,{pathRef:a})),e4.createElement(tb,{points:r,clipPathId:t,props:l}))}function ty(e){var{clipPathId:t,props:a,pathRef:r,previousPointsRef:i,longestAnimatedLengthRef:l}=e,{points:n,strokeDasharray:s,isAnimationActive:o,animationBegin:c,animationDuration:u,animationEasing:d,animateNewValues:m,width:h,height:x,onAnimationEnd:p,onAnimationStart:g}=a,b=i.current,f=(0,ej.useAnimationId)(n,"recharts-line-"),v=(0,e4.useRef)(f),[y,j]=(0,e4.useState)(!1),k=(0,e4.useCallback)(()=>{"function"==typeof p&&p(),j(!1)},[p]),S=(0,e4.useCallback)(()=>{"function"==typeof g&&g(),j(!0)},[g]),T=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(r.current),C=(0,e4.useRef)(0);v.current!==f&&(C.current=l.current,v.current=f);var N=C.current;return e4.createElement(tf,{points:n,showLabels:!y},a.children,e4.createElement(eC.JavascriptAnimate,{animationId:f,begin:c,duration:u,isActive:o,easing:d,onAnimationEnd:k,onAnimationStart:S,key:f},e=>{var c,u=Math.min((0,I.interpolate)(N,T+N,e),T);if(c=o?s?((e,t,a)=>{var r=a.reduce((e,t)=>e+t);if(!r)return tg(t,e);for(var i=Math.floor(e/r),l=e%r,n=t-e,s=[],o=0,c=0;o<a.length;c+=a[o],++o)if(c+a[o]>l){s=[...a.slice(0,o),l-c];break}var u=s.length%2==0?[0,n]:[n];return[...function(e,t){for(var a=e.length%2!=0?[...e,0]:e,r=[],i=0;i<t;++i)r=[...r,...a];return r}(a,i),...s,...u].map(e=>"".concat(e,"px")).join(", ")})(u,T,"".concat(s).split(/[,\s]+/gim).map(e=>parseFloat(e))):tg(T,u):null==s?void 0:String(s),e>0&&T>0&&(i.current=n,l.current=Math.max(l.current,u)),b){var d=b.length/n.length,p=1===e?n:n.map((t,a)=>{var r=Math.floor(a*d);if(b[r]){var i=b[r];return th(th({},t),{},{x:(0,I.interpolate)(i.x,t.x,e),y:(0,I.interpolate)(i.y,t.y,e)})}return m?th(th({},t),{},{x:(0,I.interpolate)(2*h,t.x,e),y:(0,I.interpolate)(x/2,t.y,e)}):th(th({},t),{},{x:t.x,y:t.y})});return i.current=p,e4.createElement(tv,{props:a,points:p,clipPathId:t,pathRef:r,strokeDasharray:c})}return e4.createElement(tv,{props:a,points:n,clipPathId:t,pathRef:r,strokeDasharray:c})}),e4.createElement(O.LabelListFromLabelProp,{label:a.label}))}function tj(e){var{clipPathId:t,props:a}=e,r=(0,e4.useRef)(null),i=(0,e4.useRef)(0),l=(0,e4.useRef)(null);return e4.createElement(ty,{props:a,clipPathId:t,previousPointsRef:r,longestAnimatedLengthRef:i,pathRef:l})}var tk=(e,t)=>{var a,r;return{x:null!=(a=e.x)?a:void 0,y:null!=(r=e.y)?r:void 0,value:e.value,errorVal:(0,E.getValueByDataKey)(e.payload,t)}};class tS extends e4.Component{render(){var{hide:e,dot:t,points:a,className:r,xAxisId:i,yAxisId:l,top:n,left:s,width:o,height:c,id:u,needClip:d,zIndex:m}=this.props;if(e)return null;var h=(0,w.clsx)("recharts-line",r),{r:x,strokeWidth:p}=(0,ts.getRadiusAndStrokeWidthFromDot)(t),g=(0,D.isClipDot)(t),b=2*x+p,f=d?"url(#clipPath-".concat(g?"":"dots-").concat(u,")"):void 0;return e4.createElement(eN.ZIndexLayer,{zIndex:m},e4.createElement(P.Layer,{className:h},d&&e4.createElement("defs",null,e4.createElement(q.GraphicalItemClipPath,{clipPathId:u,xAxisId:i,yAxisId:l}),!g&&e4.createElement("clipPath",{id:"clipPath-dots-".concat(u)},e4.createElement("rect",{x:s-b/2,y:n-b/2,width:o+b,height:c+b}))),e4.createElement(Z,{xAxisId:i,yAxisId:l,data:a,dataPointFormatter:tk,errorBarOffset:0},e4.createElement(tj,{props:this.props,clipPathId:u}))),e4.createElement(e3.ActivePoints,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:f}))}}var tT={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:ew.DefaultZIndexes.line,type:"linear"};function tC(e){var t=(0,ek.resolveDefaultProps)(e,tT),{activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:n,connectNulls:s,dot:o,hide:c,isAnimationActive:u,label:d,legendType:m,xAxisId:h,yAxisId:x,id:p}=t,g=tx(t,tu),{needClip:b}=(0,q.useNeedsClip)(h,x),f=(0,tl.usePlotArea)(),v=(0,X.useChartLayout)(),y=(0,ef.useIsPanorama)(),j=(0,$.useAppSelector)(e=>ti(e,h,x,y,p));if("horizontal"!==v&&"vertical"!==v||null==j||null==f)return null;var{height:k,width:S,x:T,y:C}=f;return e4.createElement(tS,td({},g,{id:p,connectNulls:s,dot:o,activeDot:a,animateNewValues:r,animationBegin:i,animationDuration:l,animationEasing:n,isAnimationActive:u,hide:c,label:d,legendType:m,xAxisId:h,yAxisId:x,points:j,layout:v,height:k,width:S,left:T,top:C,needClip:b}))}var tN=e4.memo(function(e){var t=(0,ek.resolveDefaultProps)(e,tT),a=(0,ef.useIsPanorama)();return e4.createElement(_.RegisterGraphicalItemId,{id:t.id,type:"line"},e=>e4.createElement(e4.Fragment,null,e4.createElement(ey.SetLegendPayload,{legendPayload:(e=>{var{dataKey:t,name:a,stroke:r,legendType:i,hide:l}=e;return[{inactive:l,dataKey:t,type:i,color:r,value:(0,E.getTooltipNameProp)(a,t),payload:e}]})(t)}),e4.createElement(tp,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),e4.createElement(eS.SetCartesianGraphicalItem,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:a}),e4.createElement(tC,td({},t,{id:e}))))},eP.propsAreEqual);tN.displayName="Line";var tw=e.i(41891),tP=e.i(38814),tA=e.i(1725),tO=e.i(237),tI=e.i(70016),tD=e.i(78631);function tE({title:e,value:a,icon:r,color:i="blue",change:l,changeType:n}){return(0,t.jsxs)("div",{className:`rounded-lg border-l-4 p-4 ${{blue:"border-l-blue-500 bg-blue-50",green:"border-l-green-500 bg-green-50",red:"border-l-red-500 bg-red-50",amber:"border-l-amber-500 bg-amber-50",purple:"border-l-purple-500 bg-purple-50"}[i]}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e}),r]}),(0,t.jsxs)("div",{className:"flex items-end gap-2",children:[(0,t.jsx)("span",{className:`text-2xl font-bold ${{blue:"text-blue-600",green:"text-green-600",red:"text-red-600",amber:"text-amber-600",purple:"text-purple-600"}[i]}`,children:a}),l&&(0,t.jsxs)("span",{className:`text-sm flex items-center ${"up"===n?"text-green-600":"text-red-600"}`,children:["up"===n?(0,t.jsx)(x.TrendingUp,{className:"h-3 w-3 mr-1"}):(0,t.jsx)(p.TrendingDown,{className:"h-3 w-3 mr-1"}),l]})]})]})}function tM({status:e}){let a={normal:(0,t.jsx)(b.CheckCircle,{className:"h-3 w-3 mr-1"}),low:(0,t.jsx)(g.AlertTriangle,{className:"h-3 w-3 mr-1"}),critical:(0,t.jsx)(g.AlertTriangle,{className:"h-3 w-3 mr-1"}),out:(0,t.jsx)(g.AlertTriangle,{className:"h-3 w-3 mr-1"})};return(0,t.jsxs)("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${{normal:"bg-green-100 text-green-800",low:"bg-amber-100 text-amber-800",critical:"bg-orange-100 text-orange-800",out:"bg-red-100 text-red-800"}[e]}`,children:[a[e],{normal:"Normal",low:"Dusuk",critical:"Kritik",out:"Stok Yok"}[e]]})}function tB({abcClass:e}){return(0,t.jsx)("span",{className:`inline-flex items-center justify-center w-8 h-8 rounded-full text-sm font-bold border-2 ${{A:"bg-red-100 text-red-800 border-red-300",B:"bg-amber-100 text-amber-800 border-amber-300",C:"bg-green-100 text-green-800 border-green-300"}[e]}`,children:e})}function tz({open:e,onOpenChange:p,reportType:k="stock"}){let[S,T]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[P,O]=(0,a.useState)(!0),[I,D]=(0,a.useState)("all"),[E,M]=(0,a.useState)("all"),[B,z]=(0,a.useState)("overview");(0,a.useEffect)(()=>{if(!e)return;O(!0);let t=(0,c.subscribeToRTDB)("products",e=>{console.log("ReportDialog: products loaded",e.length),T(e||[])}),a=(0,c.subscribeToRTDB)("branches",e=>{console.log("ReportDialog: branches loaded",e.length),w(e||[]),O(!1)});return()=>{t(),a()}},[e]);let K=e=>e.stock?.totalStock!==void 0?e.stock.totalStock:void 0!==e.stock_qty?e.stock_qty:0,L=e=>e.pricing?.baseCost!==void 0?e.pricing.baseCost:void 0!==e.cost?e.cost:0,R=e=>e.basic?.name||e.name||"-",F=e=>e.basic?.category||"-",H=(e,t)=>t&&e.stock?.branchStock?.[t]&&e.stock.branchStock[t].minStock||10,V=(0,a.useMemo)(()=>{let e=S.length,t=0,a=0,r=0,i=0,l=0;S.forEach(e=>{let n=K(e),s=L(e),o=H(e);if(t+=n*s,n<=0?r++:n<o&&a++,n>0&&o>0){let e=o/7;e>0&&(i+=n/e,l++)}});let n=l>0?Math.round(i/l):0,s=n>0?(365/n).toFixed(1):"0";return{totalProducts:e,totalValue:t,lowStockCount:a,outOfStockCount:r,avgStockDays:n,turnoverRate:s}},[S]),G=(0,a.useMemo)(()=>S.map(e=>{let t=K(e),a=L(e),r=H(e),i=r/7,l=i>0?Math.round(t/i):0;return{id:e.id,name:R(e),category:F(e),currentStock:t,minStock:r,maxStock:10*r,status:t<=0?"out":t<.3*r?"critical":t<r?"low":"normal",stockDays:l,unitCost:a,totalValue:t*a}}).filter(e=>"all"===E||("normal"===E?"normal"===e.status:"low"===E?"low"===e.status||"critical"===e.status:"out"!==E||"out"===e.status)).sort((e,t)=>e.currentStock-t.currentStock),[S,E]),U=(0,a.useMemo)(()=>{let e=0,t=0,a={name:"-",value:0},r=S.filter(e=>K(e)>0).map(r=>{let i=K(r),l=L(r),n=i*l,s=0,o=0;r.pricing?.branchPricing&&Object.values(r.pricing.branchPricing).forEach(e=>{e?.unitPrice>0&&(s+=e.unitPrice,o++)});let c=i*(s=o>0?s/o:1.4*l),u=s>0?(s-l)/s*100:0;return e+=n,t+=c,n>a.value&&(a={name:R(r),value:n}),{id:r.id,name:R(r),category:F(r),unitCost:l,stock:i,totalCost:n,unitPrice:s,potentialRevenue:c,profitMargin:u}}).sort((e,t)=>t.totalCost-e.totalCost),i=r.length>0?e/r.reduce((e,t)=>e+t.stock,0):0;return{data:r,totalInventoryValue:e,totalPotentialRevenue:t,avgUnitCost:i,highestValueProduct:a}},[S]),$=(0,a.useMemo)(()=>{let e=G.filter(e=>"out"===e.status||"critical"===e.status).length,t=G.filter(e=>"low"===e.status).length;return{items:G.filter(e=>"normal"!==e.status).map(e=>{let t=S.find(t=>t.id===e.id),a=Math.max(0,e.minStock-e.currentStock),r="out"===e.status?1:"critical"===e.status?2:3,i=2*e.minStock;return{...e,shortage:a,priority:r,priorityLabel:1===r?"ACIL":2===r?"Yuksek":"Orta",supplier:t?.supplier?.supplierName||"-",leadTime:t?.supplier?.leadTime||2,reorderQty:i}}).sort((e,t)=>e.priority-t.priority||t.shortage-e.shortage),criticalCount:e,warningCount:t}},[G,S]),_=(0,a.useMemo)(()=>{let e={},t=0;return S.forEach(a=>{let r=F(a),i=K(a),l=L(a),n=i*l;e[r]||(e[r]={productCount:0,totalStock:0,stockValue:0,totalPrice:0,priceCount:0,totalMargin:0,marginCount:0}),e[r].productCount++,e[r].totalStock+=i,e[r].stockValue+=n,t+=n,a.pricing?.branchPricing&&Object.values(a.pricing.branchPricing).forEach(t=>{if(t?.unitPrice>0&&(e[r].totalPrice+=t.unitPrice,e[r].priceCount++,l>0)){let a=(t.unitPrice-l)/t.unitPrice*100;e[r].totalMargin+=a,e[r].marginCount++}})}),Object.entries(e).map(([e,a])=>({category:e,productCount:a.productCount,totalStock:a.totalStock,stockValue:a.stockValue,percentage:t>0?a.stockValue/t*100:0,avgPrice:a.priceCount>0?a.totalPrice/a.priceCount:0,avgMargin:a.marginCount>0?a.totalMargin/a.marginCount:0})).sort((e,t)=>t.stockValue-e.stockValue)},[S]),W=(0,a.useMemo)(()=>{let e=S.map(e=>({name:R(e),value:K(e)*L(e)})).filter(e=>e.value>0).sort((e,t)=>t.value-e.value),t=e.reduce((e,t)=>e+t.value,0),a=0;return e.map(e=>{let r,i,l,n=t>0?e.value/t*100:0;return(a+=n)<=80?(r="A",i="Siki kontrol",l="Gunluk takip"):a<=95?(r="B",i="Duzenli kontrol",l="Haftalik takip"):(r="C",i="Temel kontrol",l="Aylik takip"),{name:e.name,value:e.value,contribution:n,cumulative:a,abcClass:r,recommendation:i,action:l}})},[S]);(0,a.useMemo)(()=>{let e={};return N.forEach(t=>{e[t.id]={name:t.name||t.id,totalProducts:0,totalStock:0,stockValue:0,lowStockCount:0,totalStockDays:0,stockDaysCount:0}}),S.forEach(t=>{let a=L(t);t.stock?.branchStock&&Object.entries(t.stock.branchStock).forEach(([t,r])=>{if(!e[t])return;let i=r?.currentStock||0,l=r?.minStock||10;if(e[t].totalProducts++,e[t].totalStock+=i,e[t].stockValue+=i*a,i<l&&e[t].lowStockCount++,i>0&&l>0){let a=l/7;a>0&&(e[t].totalStockDays+=i/a,e[t].stockDaysCount++)}})}),Object.values(e).filter(e=>e.totalProducts>0).map(e=>{let t=e.stockDaysCount>0?Math.round(e.totalStockDays/e.stockDaysCount):0,a=t>0?(365/t).toFixed(1):"0";return{...e,avgStockDays:t,turnover:a}})},[S,N]);let Y=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#ec4899","#84cc16"],Z=(0,a.useMemo)(()=>{let e=V.totalValue;return["Ocak","Subat","Mart","Nisan","Mayis","Haziran"].map((t,a)=>({name:t,stokDegeri:Math.round(e*(.7+.06*a)*(1+(.1*Math.random()-.05))),urunSayisi:Math.round(V.totalProducts*(.85+.03*a)),dusukStok:Math.max(0,Math.round(V.lowStockCount*(1.3-.08*a)))}))},[V]),q=(0,a.useMemo)(()=>_.slice(0,6).map((e,t)=>({name:e.category.length>15?e.category.substring(0,15)+"...":e.category,value:Math.round(e.stockValue),color:Y[t%Y.length]})),[_]),X=(0,a.useMemo)(()=>{let e=W.filter(e=>"A"===e.abcClass).length,t=W.filter(e=>"B"===e.abcClass).length,a=W.filter(e=>"C"===e.abcClass).length;return[{name:"A Sinifi",urunSayisi:e,deger:Math.round(W.filter(e=>"A"===e.abcClass).reduce((e,t)=>e+t.value,0)),color:"#ef4444"},{name:"B Sinifi",urunSayisi:t,deger:Math.round(W.filter(e=>"B"===e.abcClass).reduce((e,t)=>e+t.value,0)),color:"#f59e0b"},{name:"C Sinifi",urunSayisi:a,deger:Math.round(W.filter(e=>"C"===e.abcClass).reduce((e,t)=>e+t.value,0)),color:"#10b981"}]},[W]);return(0,t.jsx)(n.Dialog,{open:e,onOpenChange:p,children:(0,t.jsxs)(n.DialogContent,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,t.jsx)(n.DialogHeader,{className:"border-b pb-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(n.DialogTitle,{className:"text-xl font-semibold flex items-center gap-2",children:[(0,t.jsx)(f.BarChart3,{className:"h-6 w-6 text-purple-600"}),"Stok Analizi & Raporlari"]}),(0,t.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Detayli stok durumu, degerleme ve analiz raporlari"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{O(!0),setTimeout(()=>O(!1),500)},disabled:P,children:[(0,t.jsx)(d.RefreshCw,{className:`h-4 w-4 mr-2 ${P?"animate-spin":""}`}),"Yenile"]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{try{let e=tI.utils.book_new(),t=[["STOK ANALIZ RAPORU","","",""],["Rapor Tarihi:",new Date().toLocaleDateString("tr-TR"),"",""],["","","",""],["GENEL OZET","","",""],["Toplam Urun",V.totalProducts],["Toplam Stok Degeri",`€${V.totalValue.toLocaleString("tr-TR",{minimumFractionDigits:2})}`],["Dusuk Stok Urun",V.lowStockCount],["Stok Yok",V.outOfStockCount],["Ortalama Stok Gunu",V.avgStockDays],["Devir Hizi",`${V.turnoverRate}x`]],a=tI.utils.aoa_to_sheet(t);tI.utils.book_append_sheet(e,a,"Ozet");let r=G.map(e=>[e.name,e.category,e.currentStock,e.minStock,e.maxStock,"normal"===e.status?"Normal":"low"===e.status?"Dusuk":"critical"===e.status?"Kritik":"Stok Yok",e.stockDays,e.unitCost,e.totalValue]),i=tI.utils.aoa_to_sheet([["Urun Adi","Kategori","Mevcut Stok","Min Stok","Max Stok","Durum","Stok Gunu","Birim Maliyet","Toplam Deger"],...r]);tI.utils.book_append_sheet(e,i,"Stok Durumu");let l=U.data.map(e=>[e.name,e.category,e.unitCost,e.stock,e.totalCost,e.unitPrice,e.potentialRevenue,e.profitMargin.toFixed(1)]),n=tI.utils.aoa_to_sheet([["Urun Adi","Kategori","Birim Maliyet","Stok","Toplam Maliyet","Satis Fiyati","Potansiyel Gelir","Kar Marji %"],...l]);tI.utils.book_append_sheet(e,n,"Degerleme");let s=$.items.map(e=>[e.name,e.currentStock,e.minStock,e.shortage,e.priorityLabel,e.supplier,e.leadTime,e.reorderQty]),o=tI.utils.aoa_to_sheet([["Urun Adi","Mevcut Stok","Min Stok","Eksik Miktar","Oncelik","Tedarikci","Teslimat Suresi","Onerilen Siparis"],...s]);tI.utils.book_append_sheet(e,o,"Dusuk Stok");let c=_.map(e=>[e.category,e.productCount,e.totalStock,e.stockValue,e.percentage.toFixed(1),e.avgPrice,e.avgMargin.toFixed(1)]),u=tI.utils.aoa_to_sheet([["Kategori","Urun Sayisi","Toplam Stok","Stok Degeri","% Payi","Ort. Fiyat","Ort. Kar Marji %"],...c]);tI.utils.book_append_sheet(e,u,"Kategori Analizi");let d=W.map(e=>[e.abcClass,e.name,e.value,e.contribution.toFixed(2),e.cumulative.toFixed(2),e.recommendation,e.action]),m=tI.utils.aoa_to_sheet([["Sinif","Urun Adi","Stok Degeri","% Katki","Kumulatif %","Oneri","Aksiyon"],...d]);tI.utils.book_append_sheet(e,m,"ABC Analizi");let h=tI.write(e,{bookType:"xlsx",type:"array"}),x=new Blob([h],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),p=`Stok_Raporu_${new Date().toISOString().split("T")[0]}.xlsx`;(0,tD.saveAs)(x,p)}catch(e){console.error("Excel export error:",e),alert("Excel dosyasi olusturulamadi: "+e.message)}},children:[(0,t.jsx)(j.FileSpreadsheet,{className:"h-4 w-4 mr-2"}),"Excel"]}),(0,t.jsxs)(r.Button,{variant:"outline",size:"sm",onClick:()=>{window.print()},children:[(0,t.jsx)(m.Printer,{className:"h-4 w-4 mr-2"}),"Yazdir"]})]})]})}),(0,t.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,t.jsxs)(s.Tabs,{value:B,onValueChange:z,className:"w-full",children:[(0,t.jsxs)(s.TabsList,{className:"grid w-full grid-cols-7 mb-4",children:[(0,t.jsx)(s.TabsTrigger,{value:"overview",children:"Genel Bakis"}),(0,t.jsx)(s.TabsTrigger,{value:"trend",children:"Trend Analizi"}),(0,t.jsx)(s.TabsTrigger,{value:"stock",children:"Stok Durumu"}),(0,t.jsx)(s.TabsTrigger,{value:"valuation",children:"Degerleme"}),(0,t.jsx)(s.TabsTrigger,{value:"lowstock",children:"Dusuk Stok"}),(0,t.jsx)(s.TabsTrigger,{value:"category",children:"Kategori"}),(0,t.jsx)(s.TabsTrigger,{value:"abc",children:"ABC Analizi"})]}),(0,t.jsxs)(s.TabsContent,{value:"overview",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(tE,{title:"Toplam Urun",value:V.totalProducts.toString(),icon:(0,t.jsx)(h.Package,{className:"h-5 w-5 text-blue-600"}),color:"blue"}),(0,t.jsx)(tE,{title:"Toplam Deger",value:`€${V.totalValue.toLocaleString("tr-TR",{minimumFractionDigits:0})}`,icon:(0,t.jsx)(v.DollarSign,{className:"h-5 w-5 text-green-600"}),color:"green"}),(0,t.jsx)(tE,{title:"Dusuk Stok",value:V.lowStockCount.toString(),icon:(0,t.jsx)(g.AlertTriangle,{className:"h-5 w-5 text-amber-600"}),color:"amber"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(tE,{title:"Stok Yok",value:V.outOfStockCount.toString(),icon:(0,t.jsx)(g.AlertTriangle,{className:"h-5 w-5 text-red-600"}),color:"red"}),(0,t.jsx)(tE,{title:"Ort. Stok Gunu",value:`${V.avgStockDays} gun`,icon:(0,t.jsx)(f.BarChart3,{className:"h-5 w-5 text-purple-600"}),color:"purple"}),(0,t.jsx)(tE,{title:"Devir Hizi",value:`${V.turnoverRate}x`,icon:(0,t.jsx)(x.TrendingUp,{className:"h-5 w-5 text-blue-600"}),color:"blue"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:"Kategori Dagilimi"}),(0,t.jsx)("div",{className:"h-[250px]",children:(0,t.jsx)(e1.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(tw.PieChart,{children:[(0,t.jsx)(tP.Pie,{data:q,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,percent:t})=>`${e} ${(100*(t||0)).toFixed(0)}%`,outerRadius:80,fill:"#8884d8",dataKey:"value",children:q.map((e,a)=>(0,t.jsx)(A.Cell,{fill:e.color},`cell-${a}`))}),(0,t.jsx)(eQ.Tooltip,{formatter:e=>`€${e.toLocaleString("tr-TR")}`})]})})})]})]}),(0,t.jsxs)(s.TabsContent,{value:"trend",className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Stok Degeri Trendi (Son 6 Ay)"}),(0,t.jsx)("div",{className:"h-[280px]",children:(0,t.jsx)(e1.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(tA.AreaChart,{data:Z,children:[(0,t.jsx)(eJ.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(eq.XAxis,{dataKey:"name"}),(0,t.jsx)(eX.YAxis,{tickFormatter:e=>`€${(e/1e3).toFixed(0)}K`}),(0,t.jsx)(eQ.Tooltip,{formatter:e=>`€${e.toLocaleString("tr-TR")}`}),(0,t.jsx)(e0.Legend,{}),(0,t.jsx)(tO.Area,{type:"monotone",dataKey:"stokDegeri",name:"Stok Degeri",stroke:"#3b82f6",fill:"#93c5fd",strokeWidth:2})]})})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Urun Sayisi Trendi"}),(0,t.jsx)("div",{className:"h-[220px]",children:(0,t.jsx)(e1.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(e5,{data:Z,children:[(0,t.jsx)(eJ.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(eq.XAxis,{dataKey:"name"}),(0,t.jsx)(eX.YAxis,{}),(0,t.jsx)(eQ.Tooltip,{}),(0,t.jsx)(e0.Legend,{}),(0,t.jsx)(tN,{type:"monotone",dataKey:"urunSayisi",name:"Urun Sayisi",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981"}})]})})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Dusuk Stok Urun Trendi"}),(0,t.jsx)("div",{className:"h-[220px]",children:(0,t.jsx)(e1.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(C,{data:Z,children:[(0,t.jsx)(eJ.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(eq.XAxis,{dataKey:"name"}),(0,t.jsx)(eX.YAxis,{}),(0,t.jsx)(eQ.Tooltip,{}),(0,t.jsx)(e0.Legend,{}),(0,t.jsx)(eZ,{dataKey:"dusukStok",name:"Dusuk Stok",fill:"#f59e0b",radius:[4,4,0,0]})]})})})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"ABC Sinifi Dagilimi"}),(0,t.jsx)("div",{className:"h-[220px]",children:(0,t.jsx)(e1.ResponsiveContainer,{width:"100%",height:"100%",children:(0,t.jsxs)(C,{data:X,layout:"vertical",children:[(0,t.jsx)(eJ.CartesianGrid,{strokeDasharray:"3 3"}),(0,t.jsx)(eq.XAxis,{type:"number",tickFormatter:e=>`€${(e/1e3).toFixed(0)}K`}),(0,t.jsx)(eX.YAxis,{dataKey:"name",type:"category",width:80}),(0,t.jsx)(eQ.Tooltip,{formatter:e=>`€${e.toLocaleString("tr-TR")}`}),(0,t.jsx)(e0.Legend,{}),(0,t.jsx)(eZ,{dataKey:"deger",name:"Stok Degeri",radius:[0,4,4,0],children:X.map((e,a)=>(0,t.jsx)(A.Cell,{fill:e.color},`cell-${a}`))})]})})})]})]}),(0,t.jsxs)(s.TabsContent,{value:"stock",className:"space-y-4",children:[(0,t.jsx)("div",{className:"flex gap-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(i.Label,{children:"Durum:"}),(0,t.jsxs)(l.Select,{value:E,onValueChange:M,children:[(0,t.jsx)(l.SelectTrigger,{className:"w-[150px]",children:(0,t.jsx)(l.SelectValue,{})}),(0,t.jsxs)(l.SelectContent,{children:[(0,t.jsx)(l.SelectItem,{value:"all",children:"Tumu"}),(0,t.jsx)(l.SelectItem,{value:"normal",children:"Normal"}),(0,t.jsx)(l.SelectItem,{value:"low",children:"Dusuk"}),(0,t.jsx)(l.SelectItem,{value:"out",children:"Stok Yok"})]})]})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg border max-h-[400px] overflow-auto",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{children:"Urun"}),(0,t.jsx)(o.TableHead,{children:"Kategori"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Mevcut"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Min"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Max"}),(0,t.jsx)(o.TableHead,{children:"Durum"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Stok Gunu"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Birim Deger"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,t.jsx)(o.TableBody,{children:P?(0,t.jsx)(o.TableRow,{children:(0,t.jsx)(o.TableCell,{colSpan:9,className:"text-center py-8",children:(0,t.jsx)(u.Loader2,{className:"h-6 w-6 animate-spin mx-auto"})})}):0===G.length?(0,t.jsx)(o.TableRow,{children:(0,t.jsx)(o.TableCell,{colSpan:9,className:"text-center py-8 text-gray-500",children:"Urun bulunamadi"})}):G.slice(0,50).map(e=>(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(o.TableCell,{className:"text-gray-600",children:e.category}),(0,t.jsx)(o.TableCell,{className:`text-right font-medium ${"out"===e.status?"text-red-600":"normal"!==e.status?"text-amber-600":""}`,children:e.currentStock.toFixed(1)}),(0,t.jsx)(o.TableCell,{className:"text-right",children:e.minStock}),(0,t.jsx)(o.TableCell,{className:"text-right",children:e.maxStock}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(tM,{status:e.status})}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:[e.stockDays," gun"]}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:["€",e.unitCost.toFixed(2)]}),(0,t.jsxs)(o.TableCell,{className:"text-right font-medium",children:["€",e.totalValue.toFixed(2)]})]},e.id))})]})})]}),(0,t.jsxs)(s.TabsContent,{value:"valuation",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(tE,{title:"Toplam Envanter",value:`€${U.totalInventoryValue.toLocaleString("tr-TR",{minimumFractionDigits:0})}`,icon:(0,t.jsx)(y.Warehouse,{className:"h-5 w-5 text-purple-600"}),color:"purple"}),(0,t.jsx)(tE,{title:"Ort. Birim Maliyet",value:`€${U.avgUnitCost.toFixed(2)}`,icon:(0,t.jsx)(v.DollarSign,{className:"h-5 w-5 text-blue-600"}),color:"blue"}),(0,t.jsx)(tE,{title:"En Degerli Urun",value:U.highestValueProduct.name.substring(0,15),icon:(0,t.jsx)(x.TrendingUp,{className:"h-5 w-5 text-green-600"}),color:"green"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border max-h-[350px] overflow-auto",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{children:"Urun"}),(0,t.jsx)(o.TableHead,{children:"Kategori"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Birim Maliyet"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Stok"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Toplam Maliyet"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Satis Fiyati"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Potansiyel Gelir"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Kar Marji"})]})}),(0,t.jsx)(o.TableBody,{children:U.data.slice(0,50).map(e=>(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(o.TableCell,{className:"text-gray-600",children:e.category}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:["€",e.unitCost.toFixed(2)]}),(0,t.jsx)(o.TableCell,{className:"text-right",children:e.stock.toFixed(1)}),(0,t.jsxs)(o.TableCell,{className:"text-right font-medium",children:["€",e.totalCost.toFixed(2)]}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:["€",e.unitPrice.toFixed(2)]}),(0,t.jsxs)(o.TableCell,{className:"text-right text-green-600",children:["€",e.potentialRevenue.toFixed(2)]}),(0,t.jsxs)(o.TableCell,{className:`text-right font-medium ${e.profitMargin<10?"text-red-600":e.profitMargin<20?"text-amber-600":"text-green-600"}`,children:[e.profitMargin.toFixed(1),"%"]})]},e.id))})]})})]}),(0,t.jsxs)(s.TabsContent,{value:"lowstock",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsx)(tE,{title:"Kritik (Stok Yok)",value:$.criticalCount.toString(),icon:(0,t.jsx)(g.AlertTriangle,{className:"h-5 w-5 text-red-600"}),color:"red"}),(0,t.jsx)(tE,{title:"Uyari (Dusuk)",value:$.warningCount.toString(),icon:(0,t.jsx)(g.AlertTriangle,{className:"h-5 w-5 text-amber-600"}),color:"amber"}),(0,t.jsx)(tE,{title:"Siparis Onerisi",value:`${$.items.length} urun`,icon:(0,t.jsx)(h.Package,{className:"h-5 w-5 text-blue-600"}),color:"blue"})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border max-h-[350px] overflow-auto",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{children:"Urun"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Mevcut"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Min"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Eksik"}),(0,t.jsx)(o.TableHead,{children:"Oncelik"}),(0,t.jsx)(o.TableHead,{children:"Tedarikci"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Teslimat"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Onerilen Siparis"})]})}),(0,t.jsx)(o.TableBody,{children:0===$.items.length?(0,t.jsx)(o.TableRow,{children:(0,t.jsxs)(o.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:[(0,t.jsx)(b.CheckCircle,{className:"h-8 w-8 mx-auto mb-2 text-green-500"}),"Tum urunler yeterli stokta"]})}):$.items.map(e=>(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{className:"font-medium",children:e.name}),(0,t.jsx)(o.TableCell,{className:`text-right font-medium ${"out"===e.status?"text-red-600":"text-amber-600"}`,children:e.currentStock.toFixed(1)}),(0,t.jsx)(o.TableCell,{className:"text-right",children:e.minStock}),(0,t.jsx)(o.TableCell,{className:"text-right text-red-600 font-medium",children:e.shortage.toFixed(1)}),(0,t.jsx)(o.TableCell,{children:(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${1===e.priority?"bg-red-100 text-red-800":2===e.priority?"bg-orange-100 text-orange-800":"bg-amber-100 text-amber-800"}`,children:e.priorityLabel})}),(0,t.jsx)(o.TableCell,{children:e.supplier}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:[e.leadTime," gun"]}),(0,t.jsx)(o.TableCell,{className:"text-right font-medium",children:e.reorderQty})]},e.id))})]})}),$.items.length>0&&(0,t.jsxs)(r.Button,{className:"w-full",size:"lg",children:[(0,t.jsx)(h.Package,{className:"h-4 w-4 mr-2"}),"Toplu Siparis Olustur (",$.items.length," urun)"]})]}),(0,t.jsx)(s.TabsContent,{value:"category",className:"space-y-4",children:(0,t.jsx)("div",{className:"bg-white rounded-lg border max-h-[450px] overflow-auto",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{children:"Kategori"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Urun Sayisi"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Toplam Stok"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Stok Degeri"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"% Payi"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Ort. Fiyat"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Ort. Kar Marji"})]})}),(0,t.jsx)(o.TableBody,{children:_.map(e=>(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{className:"font-medium",children:e.category}),(0,t.jsx)(o.TableCell,{className:"text-right",children:e.productCount}),(0,t.jsx)(o.TableCell,{className:"text-right",children:e.totalStock.toFixed(0)}),(0,t.jsxs)(o.TableCell,{className:"text-right font-medium",children:["€",e.stockValue.toLocaleString("tr-TR",{minimumFractionDigits:0})]}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:[e.percentage.toFixed(1),"%"]}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:["€",e.avgPrice.toFixed(2)]}),(0,t.jsxs)(o.TableCell,{className:`text-right font-medium ${e.avgMargin<10?"text-red-600":e.avgMargin<20?"text-amber-600":"text-green-600"}`,children:[e.avgMargin.toFixed(1),"%"]})]},e.category))})]})})}),(0,t.jsxs)(s.TabsContent,{value:"abc",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-800 mb-2",children:"ABC Analizi - Deger Bazli Siniflandirma"}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tB,{abcClass:"A"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"A Sinifi:"})," %80 deger, %20 urun (Kritik)"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tB,{abcClass:"B"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"B Sinifi:"})," %15 deger, %30 urun (Onemli)"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tB,{abcClass:"C"}),(0,t.jsxs)("span",{children:[(0,t.jsx)("strong",{children:"C Sinifi:"})," %5 deger, %50 urun (Dusuk)"]})]})]})]}),(0,t.jsx)("div",{className:"bg-white rounded-lg border max-h-[350px] overflow-auto",children:(0,t.jsxs)(o.Table,{children:[(0,t.jsx)(o.TableHeader,{children:(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableHead,{className:"w-[60px]",children:"Sinif"}),(0,t.jsx)(o.TableHead,{children:"Urun Adi"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Stok Degeri"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"% Katki"}),(0,t.jsx)(o.TableHead,{className:"text-right",children:"Kumulatif %"}),(0,t.jsx)(o.TableHead,{children:"Oneri"}),(0,t.jsx)(o.TableHead,{children:"Aksiyon"})]})}),(0,t.jsx)(o.TableBody,{children:W.slice(0,50).map((e,a)=>(0,t.jsxs)(o.TableRow,{children:[(0,t.jsx)(o.TableCell,{children:(0,t.jsx)(tB,{abcClass:e.abcClass})}),(0,t.jsx)(o.TableCell,{className:"font-medium",children:e.name}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:["€",e.value.toLocaleString("tr-TR",{minimumFractionDigits:0})]}),(0,t.jsxs)(o.TableCell,{className:"text-right",children:[e.contribution.toFixed(2),"%"]}),(0,t.jsxs)(o.TableCell,{className:`text-right font-medium ${e.cumulative<=80?"text-red-600":e.cumulative<=95?"text-amber-600":"text-green-600"}`,children:[e.cumulative.toFixed(2),"%"]}),(0,t.jsx)(o.TableCell,{children:e.recommendation}),(0,t.jsx)(o.TableCell,{className:"text-gray-600",children:e.action})]},a))})]})})]})]})}),(0,t.jsx)("div",{className:"border-t pt-4 flex justify-end",children:(0,t.jsx)(r.Button,{variant:"outline",onClick:()=>p(!1),children:"Kapat"})})]})})}e.s(["ReportDialog",()=>tz],29329)}]);