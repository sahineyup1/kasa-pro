(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,32854,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(19455),t=e.i(93479),r=e.i(67489),i=e.i(77572),n=e.i(84774),c=e.i(55146),d=e.i(69457),o=e.i(7233),x=e.i(16715),m=e.i(41071),h=e.i(55436),u=e.i(40160),j=e.i(86536),g=e.i(14764),p=e.i(27612),b=e.i(88511),N=e.i(33785),y=e.i(88844),v=e.i(78894),T=e.i(3116),w=e.i(1928),f=e.i(78583),S=e.i(69638),C=e.i(91741),k=e.i(75254);let D=(0,k.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var I=e.i(25652),L=e.i(15788),B=e.i(76639),H=e.i(24687),M=e.i(10204),R=e.i(31278),A=e.i(87316),F=e.i(84614);function O({status:e}){let s={pending:(0,a.jsx)(T.Clock,{className:"h-3 w-3 mr-1"}),sent:(0,a.jsx)(g.Send,{className:"h-3 w-3 mr-1"}),processing:(0,a.jsx)(R.Loader2,{className:"h-3 w-3 mr-1 animate-spin"}),completed:(0,a.jsx)(S.CheckCircle,{className:"h-3 w-3 mr-1"})};return(0,a.jsxs)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",sent:"bg-amber-100 text-amber-800",processing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800"}[e]||"bg-gray-100 text-gray-600"}`,children:[s[e],{pending:"Bekliyor",sent:"Gonderildi",processing:"Isleniyor",completed:"Tamamlandi"}[e]||e]})}function $({open:e,onOpenChange:s,list:t}){return t?(0,a.jsx)(B.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(B.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(B.DialogHeader,{children:(0,a.jsxs)(B.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.ClipboardList,{className:"h-5 w-5"}),"Eksik Listesi Detayi"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Liste No"}),(0,a.jsx)("p",{className:"font-mono font-medium",children:t.listNo||"-"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Durum"}),(0,a.jsx)("div",{children:(0,a.jsx)(O,{status:t.status||"pending"})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Olusturma Tarihi"}),(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(A.Calendar,{className:"h-4 w-4 text-gray-400"}),t.createdAt?new Date(t.createdAt).toLocaleString("tr-TR"):"-"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Olusturan"}),(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(F.User,{className:"h-4 w-4 text-gray-400"}),t.createdBy||"-"]})]}),t.sentAt&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Gonderim Tarihi"}),(0,a.jsx)("p",{className:"text-sm",children:new Date(t.sentAt).toLocaleString("tr-TR")})]}),t.completedAt&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Tamamlanma Tarihi"}),(0,a.jsx)("p",{className:"text-sm",children:new Date(t.completedAt).toLocaleString("tr-TR")})]}),t.transferNumber&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Transfer No"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:t.transferNumber})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(M.Label,{className:"text-sm font-medium mb-2 block",children:["Urunler (",t.items?.length||0,")"]}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Urun Adi"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(n.TableHead,{children:"Birim"})]})}),(0,a.jsx)(n.TableBody,{children:t.items&&t.items.length>0?t.items.map((e,s)=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.productName}),(0,a.jsx)(n.TableCell,{className:"text-right",children:e.quantity}),(0,a.jsx)(n.TableCell,{children:e.unit||"Adet"})]},s)):(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:3,className:"text-center text-gray-500 py-4",children:"Urun bulunmuyor"})})})]})})]}),t.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{className:"text-sm font-medium mb-2 block",children:"Notlar"}),(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:t.notes})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>s(!1),children:"Kapat"})})]})]})}):null}function z({open:e,onOpenChange:i,onSuccess:c}){let[x,m]=(0,s.useState)([]),[u,j]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[N,v]=(0,s.useState)(!1),[T,w]=(0,s.useState)(!1),[f,S]=(0,s.useState)(""),[k,D]=(0,s.useState)(null),[I,L]=(0,s.useState)(1),[A,F]=(0,s.useState)("Adet");(0,s.useEffect)(()=>{if(!e)return;let a=(0,d.subscribeToRTDB)("products",e=>{m(e||[]),v(!1)});return()=>a()},[e]),(0,s.useEffect)(()=>{e||(j([]),b(""),S(""),D(null),L(1),F("Adet"))},[e]);let O=x.filter(e=>{if(!f)return!1;let a=e.basic?.name||e.name||"",s=e.barcodes?.mainBarcode||e.barcode||"",l=f.toLowerCase();return a.toLowerCase().includes(l)||s.includes(l)}).slice(0,10),$=async()=>{if(0===u.length)return void alert("En az bir urun eklemelisiniz");w(!0);try{let e=new Date,a=`EKS-${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}-${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}`;await (0,d.pushData)("missing_lists",{listNo:a,branchId:"default",status:"pending",items:u,notes:g,createdAt:e.toISOString(),createdBy:"admin"}),i(!1),c?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{w(!1)}};return(0,a.jsx)(B.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)(B.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(B.DialogHeader,{children:(0,a.jsxs)(B.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(C.ClipboardList,{className:"h-5 w-5"}),"Yeni Eksik Listesi"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(M.Label,{children:"Urun Ekle"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Urun adi veya barkod ile ara...",value:f,onChange:e=>{S(e.target.value),D(null)},className:"pl-10"}),O.length>0&&!k&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:O.map(e=>(0,a.jsxs)("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 flex items-center gap-2",onClick:()=>{D(e),S(e.basic?.name||e.name||"")},children:[(0,a.jsx)(y.Package,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:e.basic?.name||e.name}),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-auto",children:e.barcodes?.mainBarcode||e.barcode})]},e.id))})]}),(0,a.jsx)(t.Input,{type:"number",placeholder:"Miktar",value:I,onChange:e=>L(Number(e.target.value)),className:"w-24",min:1}),(0,a.jsxs)(r.Select,{value:A,onValueChange:F,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-24",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"Adet",children:"Adet"}),(0,a.jsx)(r.SelectItem,{value:"Kg",children:"Kg"}),(0,a.jsx)(r.SelectItem,{value:"Lt",children:"Lt"}),(0,a.jsx)(r.SelectItem,{value:"Paket",children:"Paket"}),(0,a.jsx)(r.SelectItem,{value:"Koli",children:"Koli"})]})]}),(0,a.jsx)(l.Button,{onClick:()=>{if(!k||I<=0)return;let e=k.basic?.name||k.name||"",a=u.findIndex(e=>e.productId===k.id);if(a>=0){let e=[...u];e[a].quantity=(e[a].quantity||0)+I,j(e)}else j([...u,{productId:k.id,productName:e,quantity:I,unit:A}]);S(""),D(null),L(1)},disabled:!k,children:(0,a.jsx)(o.Plus,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(M.Label,{className:"mb-2 block",children:["Eklenen Urunler (",u.length,")"]}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Urun Adi"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(n.TableHead,{children:"Birim"}),(0,a.jsx)(n.TableHead,{className:"w-12"})]})}),(0,a.jsx)(n.TableBody,{children:0===u.length?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:4,className:"text-center text-gray-500 py-8",children:"Henuz urun eklenmedi"})}):u.map((e,s)=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.productName}),(0,a.jsx)(n.TableCell,{className:"text-right",children:e.quantity}),(0,a.jsx)(n.TableCell,{children:e.unit}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{j(u.filter((e,a)=>a!==s))},children:(0,a.jsx)(p.Trash2,{className:"h-4 w-4"})})})]},s))})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(H.Textarea,{id:"notes",placeholder:"Opsiyonel notlar...",value:g,onChange:e=>b(e.target.value),rows:3})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>i(!1),children:"Iptal"}),(0,a.jsxs)(l.Button,{onClick:$,disabled:T||0===u.length,children:[T&&(0,a.jsx)(R.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydet"]})]})]})]})})}var E=e.i(61659),U=e.i(87378),K=e.i(7486),q=e.i(26707);let P=(0,k.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var Y=e.i(99811);function V({status:e}){return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",approved:"bg-amber-100 text-amber-800",invoiced:"bg-purple-100 text-purple-800",shipped:"bg-cyan-100 text-cyan-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-600"}`,children:{pending:"Bekliyor",approved:"Onaylandi",invoiced:"Faturalandi",shipped:"Sevk Edildi",completed:"Tamamlandi",rejected:"Reddedildi"}[e]||e})}function _({open:e,onOpenChange:s,order:t}){if(!t)return null;let r=t.total||t.items?.reduce((e,a)=>e+(a.quantity||0)*(a.price||0),0)||0;return(0,a.jsx)(B.Dialog,{open:e,onOpenChange:s,children:(0,a.jsxs)(B.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(B.DialogHeader,{children:(0,a.jsxs)(B.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.ShoppingCart,{className:"h-5 w-5"}),"Siparis Detayi"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Siparis No"}),(0,a.jsx)("p",{className:"font-mono font-medium",children:t.orderNo||"-"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Durum"}),(0,a.jsx)("div",{children:(0,a.jsx)(V,{status:t.status||"pending"})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Musteri"}),(0,a.jsx)("p",{className:"font-medium",children:t.customerName||"-"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Kaynak"}),(0,a.jsx)("p",{className:"flex items-center gap-1 text-sm",children:"mobile"===t.source?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(q.Smartphone,{className:"h-4 w-4 text-amber-500"})," Mobil"]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(P,{className:"h-4 w-4 text-gray-500"})," Desktop"]})})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Siparis Tarihi"}),(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(A.Calendar,{className:"h-4 w-4 text-gray-400"}),t.createdAt?new Date(t.createdAt).toLocaleString("tr-TR"):"-"]})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Olusturan"}),(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,a.jsx)(F.User,{className:"h-4 w-4 text-gray-400"}),t.createdBy||"-"]})]}),t.approvedAt&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Onay Tarihi"}),(0,a.jsx)("p",{className:"text-sm",children:new Date(t.approvedAt).toLocaleString("tr-TR")})]}),t.invoiceId&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(M.Label,{className:"text-xs text-gray-500",children:"Fatura No"}),(0,a.jsx)("p",{className:"font-mono text-sm",children:t.invoiceId})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(M.Label,{className:"text-sm font-medium mb-2 block",children:["Urunler (",t.items?.length||0,")"]}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Urun Adi"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(n.TableHead,{children:"Birim"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Fiyat"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,a.jsx)(n.TableBody,{children:t.items&&t.items.length>0?(0,a.jsxs)(a.Fragment,{children:[t.items.map((e,s)=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.productName}),(0,a.jsx)(n.TableCell,{className:"text-right",children:e.quantity}),(0,a.jsx)(n.TableCell,{children:e.unit||"Adet"}),(0,a.jsxs)(n.TableCell,{className:"text-right",children:["€",(e.price||0).toFixed(2)]}),(0,a.jsxs)(n.TableCell,{className:"text-right font-medium",children:["€",((e.quantity||0)*(e.price||0)).toFixed(2)]})]},s)),(0,a.jsxs)(n.TableRow,{className:"bg-gray-50",children:[(0,a.jsx)(n.TableCell,{colSpan:4,className:"text-right font-semibold",children:"Toplam:"}),(0,a.jsxs)(n.TableCell,{className:"text-right font-bold text-lg",children:["€",r.toFixed(2)]})]})]}):(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:5,className:"text-center text-gray-500 py-4",children:"Urun bulunmuyor"})})})]})})]}),t.notes&&(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{className:"text-sm font-medium mb-2 block",children:"Notlar"}),(0,a.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:t.notes})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>s(!1),children:"Kapat"})})]})]})})}function G({open:e,onOpenChange:i,onSuccess:c}){let[x,m]=(0,s.useState)([]),[u,j]=(0,s.useState)([]),[g,b]=(0,s.useState)([]),[N,v]=(0,s.useState)(""),[T,f]=(0,s.useState)(""),[S,C]=(0,s.useState)(!1),[k,D]=(0,s.useState)(""),[I,L]=(0,s.useState)(null),[A,F]=(0,s.useState)(1),[O,$]=(0,s.useState)("Adet"),[z,E]=(0,s.useState)(0);(0,s.useEffect)(()=>{if(!e)return;let a=(0,d.subscribeToRTDB)("products",e=>{m(e||[])}),s=(0,d.subscribeToRTDB)("customers",e=>{j(e||[])});return()=>{a(),s()}},[e]),(0,s.useEffect)(()=>{e||(b([]),v(""),f(""),D(""),L(null),F(1),$("Adet"),E(0))},[e]);let U=x.filter(e=>{if(!k)return!1;let a=e.basic?.name||e.name||"",s=e.barcodes?.mainBarcode||e.barcode||"",l=k.toLowerCase();return a.toLowerCase().includes(l)||s.includes(l)}).slice(0,10),K=g.reduce((e,a)=>e+(a.quantity||0)*(a.price||0),0),q=async()=>{if(0===g.length)return void alert("En az bir urun eklemelisiniz");if(!T.trim())return void alert("Musteri adi giriniz");C(!0);try{let e=new Date,a=`SIP-${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}-${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}`;await (0,d.pushData)("orders",{orderNo:a,branchId:"default",source:"desktop",status:"pending",customerName:T,items:g,total:K,notes:N,createdAt:e.toISOString(),createdBy:"admin"}),i(!1),c?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{C(!1)}};return(0,a.jsx)(B.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)(B.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(B.DialogHeader,{children:(0,a.jsxs)(B.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.ShoppingCart,{className:"h-5 w-5"}),"Yeni Siparis"]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"customer",children:"Musteri *"}),(0,a.jsx)(t.Input,{id:"customer",placeholder:"Musteri adi...",value:T,onChange:e=>f(e.target.value),list:"customers-list"}),(0,a.jsx)("datalist",{id:"customers-list",children:u.map(e=>(0,a.jsx)("option",{value:e.name||e.companyName||""},e.id))})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(M.Label,{children:"Urun Ekle"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Urun ara...",value:k,onChange:e=>{D(e.target.value),L(null)},className:"pl-10"}),U.length>0&&!I&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:U.map(e=>(0,a.jsxs)("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 flex items-center gap-2",onClick:()=>{L(e),D(e.basic?.name||e.name||""),E(e.pricing?.sellPrice||e.price||0)},children:[(0,a.jsx)(y.Package,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:e.basic?.name||e.name}),(0,a.jsxs)("span",{className:"text-xs text-gray-500 ml-auto",children:["€",(e.pricing?.sellPrice||e.price||0).toFixed(2)]})]},e.id))})]}),(0,a.jsx)(t.Input,{type:"number",placeholder:"Miktar",value:A,onChange:e=>F(Number(e.target.value)),className:"w-20",min:1}),(0,a.jsxs)(r.Select,{value:O,onValueChange:$,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-24",children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"Adet",children:"Adet"}),(0,a.jsx)(r.SelectItem,{value:"Kg",children:"Kg"}),(0,a.jsx)(r.SelectItem,{value:"Lt",children:"Lt"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(Y.Euro,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{type:"number",placeholder:"Fiyat",value:z,onChange:e=>E(Number(e.target.value)),className:"w-24",min:0,step:.01})]}),(0,a.jsx)(l.Button,{onClick:()=>{if(!I||A<=0)return;let e=I.basic?.name||I.name||"";b([...g,{productId:I.id,productName:e,quantity:A,unit:O,price:z}]),D(""),L(null),F(1),E(0)},disabled:!I,children:(0,a.jsx)(o.Plus,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)(M.Label,{className:"mb-2 block",children:["Siparis Kalemleri (",g.length,")"]}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Urun"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(n.TableHead,{children:"Birim"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Fiyat"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Toplam"}),(0,a.jsx)(n.TableHead,{className:"w-12"})]})}),(0,a.jsx)(n.TableBody,{children:0===g.length?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center text-gray-500 py-8",children:"Henuz urun eklenmedi"})}):(0,a.jsxs)(a.Fragment,{children:[g.map((e,s)=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.productName}),(0,a.jsx)(n.TableCell,{className:"text-right",children:e.quantity}),(0,a.jsx)(n.TableCell,{children:e.unit}),(0,a.jsxs)(n.TableCell,{className:"text-right",children:["€",(e.price||0).toFixed(2)]}),(0,a.jsxs)(n.TableCell,{className:"text-right font-medium",children:["€",((e.quantity||0)*(e.price||0)).toFixed(2)]}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>{b(g.filter((e,a)=>a!==s))},children:(0,a.jsx)(p.Trash2,{className:"h-4 w-4"})})})]},s)),(0,a.jsxs)(n.TableRow,{className:"bg-gray-50",children:[(0,a.jsx)(n.TableCell,{colSpan:4,className:"text-right font-semibold",children:"Toplam:"}),(0,a.jsxs)(n.TableCell,{className:"text-right font-bold text-lg",children:["€",K.toFixed(2)]}),(0,a.jsx)(n.TableCell,{})]})]})})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(H.Textarea,{id:"notes",placeholder:"Opsiyonel notlar...",value:N,onChange:e=>v(e.target.value),rows:2})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>i(!1),children:"Iptal"}),(0,a.jsxs)(l.Button,{onClick:q,disabled:S||0===g.length,children:[S&&(0,a.jsx)(R.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydet"]})]})]})]})})}function W({open:e,onOpenChange:i,order:n,onSuccess:c}){let[o,x]=(0,s.useState)(""),[m,h]=(0,s.useState)(""),[u,j]=(0,s.useState)(""),[g,p]=(0,s.useState)("cash"),[b,N]=(0,s.useState)(0),[y,v]=(0,s.useState)(""),[T,w]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{e&&n&&(x(n.customerName||""),v(n.notes||""))},[e,n]),!n)return null;let S=n.items?.reduce((e,a)=>e+(a.quantity||0)*(a.price||0),0)||0,C=b/100*S,k=S-C,D=async()=>{w(!0);try{let e=new Date,a=`FTR-${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}-${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}`;await (0,d.pushData)("sale_invoices",{invoiceNo:a,orderId:n.id,orderNo:n.orderNo,customerName:o,taxId:m,address:u,paymentMethod:g,items:n.items,subtotal:S,discount:b,discountAmount:C,total:k,notes:y,branchId:n.branchId,createdAt:e.toISOString(),createdBy:"admin"}),await (0,d.updateData)(`orders/${n.id}`,{status:"invoiced",invoiceId:a,invoicedAt:e.toISOString(),invoicedBy:"admin"}),i(!1),c?.()}catch(e){console.error("Invoice error:",e),alert("Fatura olusturma hatasi: "+e.message)}finally{w(!1)}};return(0,a.jsx)(B.Dialog,{open:e,onOpenChange:i,children:(0,a.jsxs)(B.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(B.DialogHeader,{children:(0,a.jsxs)(B.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(f.FileText,{className:"h-5 w-5"}),"Faturaya Cevir - ",n.orderNo]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"invoiceCustomer",children:"Musteri Adi"}),(0,a.jsx)(t.Input,{id:"invoiceCustomer",value:o,onChange:e=>x(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"taxId",children:"Vergi No"}),(0,a.jsx)(t.Input,{id:"taxId",value:m,onChange:e=>h(e.target.value),placeholder:"Opsiyonel"})]}),(0,a.jsxs)("div",{className:"col-span-2",children:[(0,a.jsx)(M.Label,{htmlFor:"address",children:"Adres"}),(0,a.jsx)(t.Input,{id:"address",value:u,onChange:e=>j(e.target.value),placeholder:"Opsiyonel"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{children:"Odeme Yontemi"}),(0,a.jsxs)(r.Select,{value:g,onValueChange:p,children:[(0,a.jsx)(r.SelectTrigger,{children:(0,a.jsx)(r.SelectValue,{})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"cash",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(U.Banknote,{className:"h-4 w-4"})," Nakit"]})}),(0,a.jsx)(r.SelectItem,{value:"credit_card",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(E.CreditCard,{className:"h-4 w-4"})," Kredi Karti"]})}),(0,a.jsx)(r.SelectItem,{value:"bank_transfer",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsx)(K.Building2,{className:"h-4 w-4"})," Havale/EFT"]})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"discount",children:"Iskonto (%)"}),(0,a.jsx)(t.Input,{id:"discount",type:"number",value:b,onChange:e=>N(Number(e.target.value)),min:0,max:100})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Ara Toplam:"}),(0,a.jsxs)("span",{children:["€",S.toFixed(2)]})]}),b>0&&(0,a.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,a.jsxs)("span",{children:["Iskonto (",b,"%):"]}),(0,a.jsxs)("span",{children:["-€",C.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[(0,a.jsx)("span",{children:"Toplam:"}),(0,a.jsxs)("span",{children:["€",k.toFixed(2)]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"invoiceNotes",children:"Fatura Notlari"}),(0,a.jsx)(H.Textarea,{id:"invoiceNotes",value:y,onChange:e=>v(e.target.value),rows:2})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>i(!1),children:"Iptal"}),(0,a.jsxs)(l.Button,{onClick:D,disabled:T,children:[T&&(0,a.jsx)(R.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Fatura Olustur"]})]})]})]})})}function Q({open:e,onOpenChange:r,order:i,onSuccess:c}){let[x,m]=(0,s.useState)([]),[u,j]=(0,s.useState)([]),[g,b]=(0,s.useState)(""),[N,v]=(0,s.useState)(""),[T,f]=(0,s.useState)(!1),[S,C]=(0,s.useState)(""),[k,D]=(0,s.useState)(null),[I,L]=(0,s.useState)(1),[A,F]=(0,s.useState)("Adet"),[O,$]=(0,s.useState)(0);if((0,s.useEffect)(()=>{if(!e)return;let a=(0,d.subscribeToRTDB)("products",e=>{m(e||[])});return()=>a()},[e]),(0,s.useEffect)(()=>{e&&i&&(j(i.items||[]),b(i.notes||""),v(i.customerName||""))},[e,i]),!i)return null;let z=x.filter(e=>{if(!S)return!1;let a=e.basic?.name||e.name||"",s=e.barcodes?.mainBarcode||e.barcode||"",l=S.toLowerCase();return a.toLowerCase().includes(l)||s.includes(l)}).slice(0,10),E=u.reduce((e,a)=>e+(a.quantity||0)*(a.price||0),0),U=async()=>{if(0===u.length)return void alert("En az bir urun olmalidir");f(!0);try{await (0,d.updateData)(`orders/${i.id}`,{customerName:N,items:u,total:E,notes:g,updatedAt:new Date().toISOString()}),r(!1),c?.()}catch(e){console.error("Update error:",e),alert("Guncelleme hatasi: "+e.message)}finally{f(!1)}};return(0,a.jsx)(B.Dialog,{open:e,onOpenChange:r,children:(0,a.jsxs)(B.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(B.DialogHeader,{children:(0,a.jsxs)(B.DialogTitle,{className:"flex items-center gap-2",children:[(0,a.jsx)(w.ShoppingCart,{className:"h-5 w-5"}),"Siparis Duzenle - ",i.orderNo]})}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"editCustomer",children:"Musteri"}),(0,a.jsx)(t.Input,{id:"editCustomer",value:N,onChange:e=>v(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(M.Label,{children:"Urun Ekle"}),(0,a.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Urun ara...",value:S,onChange:e=>{C(e.target.value),D(null)},className:"pl-10"}),z.length>0&&!k&&(0,a.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:z.map(e=>(0,a.jsxs)("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 flex items-center gap-2",onClick:()=>{D(e),C(e.basic?.name||e.name||""),$(e.pricing?.sellPrice||e.price||0)},children:[(0,a.jsx)(y.Package,{className:"h-4 w-4 text-gray-400"}),(0,a.jsx)("span",{className:"font-medium",children:e.basic?.name||e.name})]},e.id))})]}),(0,a.jsx)(t.Input,{type:"number",value:I,onChange:e=>L(Number(e.target.value)),className:"w-20",min:1}),(0,a.jsx)(t.Input,{type:"number",value:O,onChange:e=>$(Number(e.target.value)),className:"w-24",min:0,step:.01}),(0,a.jsx)(l.Button,{onClick:()=>{if(!k||I<=0)return;let e=k.basic?.name||k.name||"";j([...u,{productId:k.id,productName:e,quantity:I,unit:A,price:O}]),C(""),D(null),L(1),$(0)},disabled:!k,children:(0,a.jsx)(o.Plus,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{className:"mb-2 block",children:"Siparis Kalemleri"}),(0,a.jsx)("div",{className:"border rounded-lg",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Urun"}),(0,a.jsx)(n.TableHead,{className:"text-right w-24",children:"Miktar"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Fiyat"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Toplam"}),(0,a.jsx)(n.TableHead,{className:"w-12"})]})}),(0,a.jsxs)(n.TableBody,{children:[u.map((e,s)=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.productName}),(0,a.jsx)(n.TableCell,{className:"text-right",children:(0,a.jsx)(t.Input,{type:"number",value:e.quantity,onChange:e=>{var a;let l;return a=Number(e.target.value),void((l=[...u])[s].quantity=a,j(l))},className:"w-20 h-8 text-right",min:1})}),(0,a.jsxs)(n.TableCell,{className:"text-right",children:["€",(e.price||0).toFixed(2)]}),(0,a.jsxs)(n.TableCell,{className:"text-right font-medium",children:["€",((e.quantity||0)*(e.price||0)).toFixed(2)]}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>{j(u.filter((e,a)=>a!==s))},children:(0,a.jsx)(p.Trash2,{className:"h-4 w-4"})})})]},s)),(0,a.jsxs)(n.TableRow,{className:"bg-gray-50",children:[(0,a.jsx)(n.TableCell,{colSpan:3,className:"text-right font-semibold",children:"Toplam:"}),(0,a.jsxs)(n.TableCell,{className:"text-right font-bold text-lg",children:["€",E.toFixed(2)]}),(0,a.jsx)(n.TableCell,{})]})]})]})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(M.Label,{htmlFor:"editNotes",children:"Notlar"}),(0,a.jsx)(H.Textarea,{id:"editNotes",value:g,onChange:e=>b(e.target.value),rows:2})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),children:"Iptal"}),(0,a.jsxs)(l.Button,{onClick:U,disabled:T,children:[T&&(0,a.jsx)(R.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydet"]})]})]})]})})}function J({status:e}){return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",approved:"bg-amber-100 text-amber-800",invoiced:"bg-purple-100 text-purple-800",shipped:"bg-cyan-100 text-cyan-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[e]||"bg-gray-100 text-gray-600"}`,children:{pending:"Bekliyor",approved:"Onaylandi",invoiced:"Faturalandi",shipped:"Sevk Edildi",completed:"Tamamlandi",rejected:"Reddedildi"}[e]||e})}function X({status:e}){return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",sent:"bg-amber-100 text-amber-800",processing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800"}[e]||"bg-gray-100 text-gray-600"}`,children:{pending:"Bekliyor",sent:"Gonderildi",processing:"Isleniyor",completed:"Tamamlandi"}[e]||e})}function Z({stock:e,minStock:s}){return e<=0?(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,a.jsx)(v.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Stok Yok"]}):e<s?(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:"Dusuk"}):(0,a.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Normal"})}function ee({icon:e,title:s,value:l,color:t="gray"}){return(0,a.jsx)("div",{className:`rounded-lg p-4 ${{blue:"bg-amber-50",green:"bg-green-50",red:"bg-red-50",amber:"bg-amber-50",purple:"bg-purple-50",gray:"bg-gray-50"}[t]}`,children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`p-2 rounded-lg ${{blue:"bg-amber-100 text-amber-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600",gray:"bg-gray-100 text-gray-600"}[t]}`,children:e}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:s}),(0,a.jsx)("p",{className:`text-xl font-semibold ${{blue:"text-amber-600",green:"text-green-600",red:"text-red-600",amber:"text-amber-600",purple:"text-purple-600",gray:"text-gray-900"}[t]}`,children:l})]})]})})}function ea(){let[e,k]=(0,s.useState)("dashboard"),[B,H]=(0,s.useState)([]),[M,R]=(0,s.useState)([]),[A,F]=(0,s.useState)([]),[O,E]=(0,s.useState)([]),[U,K]=(0,s.useState)([]),[q,P]=(0,s.useState)(!0),[Y,V]=(0,s.useState)(""),[ea,es]=(0,s.useState)("all"),[el,et]=(0,s.useState)("all"),[er,ei]=(0,s.useState)(!1),[en,ec]=(0,s.useState)(!1),[ed,eo]=(0,s.useState)(null),[ex,em]=(0,s.useState)(!1),[eh,eu]=(0,s.useState)(!1),[ej,eg]=(0,s.useState)(!1),[ep,eb]=(0,s.useState)(!1),[eN,ey]=(0,s.useState)(null);(0,s.useEffect)(()=>{P(!0);let e=(0,d.subscribeToRTDB)("products",e=>{H(e||[])}),a=(0,d.subscribeToRTDB)("missing_lists",e=>{R(e||[])}),s=(0,d.subscribeToRTDB)("inventory_counts",e=>{F(e||[])}),l=(0,d.subscribeToRTDB)("orders",e=>{K(e||[]),P(!1)});return()=>{e(),a(),s(),l()}},[]);let ev=(0,s.useMemo)(()=>{let e=B.length,a=B.filter(e=>{let a=e.stock?.totalStock??e.stock_qty??0;return a<(e.stock?.minStock??10)&&a>0}).length,s=B.filter(e=>(e.stock?.totalStock??e.stock_qty??0)<=0).length,l=U.filter(e=>"pending"===e.status).length;return{totalProducts:e,lowStock:a,outOfStock:s,pendingOrders:l,completedOrders:U.filter(e=>"completed"===e.status).length,missingItems:M.filter(e=>"pending"===e.status).length}},[B,U,M]),eT=(0,s.useMemo)(()=>{let e=M.length,a=M.filter(e=>"pending"===e.status).length;return{total:e,pending:a,sent:M.filter(e=>"sent"===e.status).length,completed:M.filter(e=>"completed"===e.status).length}},[M]),ew=(0,s.useMemo)(()=>{let e=U.length,a=U.filter(e=>"pending"===e.status).length,s=U.filter(e=>"approved"===e.status).length;return{total:e,pending:a,approved:s,invoiced:U.filter(e=>"invoiced"===e.status).length,completed:U.filter(e=>"completed"===e.status).length}},[U]),ef=(0,s.useMemo)(()=>{let e=new Date,a=new Date(e.getFullYear(),e.getMonth()+1,0),s=new Date(e.getFullYear(),e.getMonth()+2,0),l=0,t=0,r=0;return O.forEach(i=>{let n;if(!i.expiryDate)return;if(i.expiryDate.includes(".")){let e=i.expiryDate.split(".");n=new Date(parseInt(e[2]),parseInt(e[1])-1,parseInt(e[0]))}else n=new Date(i.expiryDate);let c=i.quantity||0;r+=c,n<=a&&n>=e?l++:n<=s&&n>a&&t++}),{total:O.length,expiringThisMonth:l,expiringNextMonth:t,totalQuantity:r}},[O]),eS=(0,s.useMemo)(()=>M.filter(e=>{let a=!Y||e.listNo?.toLowerCase().includes(Y.toLowerCase()),s="all"===ea||e.status===ea;return a&&s}).sort((e,a)=>new Date(a.createdAt||"").getTime()-new Date(e.createdAt||"").getTime()),[M,Y,ea]),eC=(0,s.useMemo)(()=>U.filter(e=>{let a=!Y||e.orderNo?.toLowerCase().includes(Y.toLowerCase())||e.customerName?.toLowerCase().includes(Y.toLowerCase()),s="all"===ea||e.status===ea;return a&&s}).sort((e,a)=>new Date(a.createdAt||"").getTime()-new Date(e.createdAt||"").getTime()),[U,Y,ea]),ek=(0,s.useMemo)(()=>A.filter(e=>{let a=!Y||e.barcode?.toLowerCase().includes(Y.toLowerCase())||e.name?.toLowerCase().includes(Y.toLowerCase()),s="all"===el||e.branch===el;return a&&s}).sort((e,a)=>new Date(a.updatedAt||"").getTime()-new Date(e.updatedAt||"").getTime()),[A,Y,el]),eD=()=>{P(!0),setTimeout(()=>P(!1),500)},eI=e=>{alert(`${e} Excel export - Yakin zamanda`)},eL=async e=>{if(confirm(`"${e.listNo}" listesini depoya gondermek istediginize emin misiniz?`))try{await (0,d.updateData)(`missing_lists/${e.id}`,{status:"sent",sentAt:new Date().toISOString(),sentBy:"admin"})}catch(e){console.error("Send error:",e),alert("Gonderme hatasi: "+e.message)}},eB=async e=>{if(confirm(`"${e.listNo}" listesini silmek istediginize emin misiniz?`))try{await (0,d.removeData)(`missing_lists/${e.id}`)}catch(e){console.error("Delete error:",e),alert("Silme hatasi: "+e.message)}},eH=async e=>{if(confirm(`"${e.listNo}" listesini tamamlandi olarak isaretlemek istediginize emin misiniz?`))try{await (0,d.updateData)(`missing_lists/${e.id}`,{status:"completed",completedAt:new Date().toISOString(),completedBy:"admin"})}catch(e){console.error("Complete error:",e),alert("Tamamlama hatasi: "+e.message)}},eM=async e=>{if(confirm(`"${e.orderNo}" siparisini onaylamak istediginize emin misiniz?`))try{await (0,d.updateData)(`orders/${e.id}`,{status:"approved",approvedAt:new Date().toISOString(),approvedBy:"admin"})}catch(e){console.error("Approve error:",e),alert("Onaylama hatasi: "+e.message)}},eR=async e=>{if(confirm(`"${e.orderNo}" siparisini reddetmek istediginize emin misiniz?`))try{await (0,d.updateData)(`orders/${e.id}`,{status:"rejected",rejectedAt:new Date().toISOString(),rejectedBy:"admin"})}catch(e){console.error("Reject error:",e),alert("Reddetme hatasi: "+e.message)}},eA=async e=>{if(confirm(`"${e.orderNo}" siparisini tamamlamak istediginize emin misiniz?`))try{await (0,d.updateData)(`orders/${e.id}`,{status:"completed",completedAt:new Date().toISOString(),completedBy:"admin"})}catch(e){console.error("Complete error:",e),alert("Tamamlama hatasi: "+e.message)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,a.jsx)("div",{className:"bg-white border-b px-4 lg:px-8 py-4 lg:py-6",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl lg:text-2xl font-semibold text-gray-900",children:"Depo Yonetimi"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Stok takibi, eksik listesi, envanter ve siparis islemleri"})]}),(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:eD,disabled:q,children:[(0,a.jsx)(x.RefreshCw,{className:`h-4 w-4 mr-2 ${q?"animate-spin":""}`}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Yenile"})]})})]})}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:(0,a.jsxs)(i.Tabs,{value:e,onValueChange:k,className:"w-full",children:[(0,a.jsxs)(i.TabsList,{className:"grid w-full grid-cols-5 mb-6",children:[(0,a.jsxs)(i.TabsTrigger,{value:"dashboard",className:"text-xs sm:text-sm",children:[(0,a.jsx)(N.Warehouse,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Depo"})," Ozeti"]}),(0,a.jsxs)(i.TabsTrigger,{value:"missing",className:"text-xs sm:text-sm",children:[(0,a.jsx)(C.ClipboardList,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Eksik"})," Liste"]}),(0,a.jsxs)(i.TabsTrigger,{value:"inventory",className:"text-xs sm:text-sm",children:[(0,a.jsx)(y.Package,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Envanter"})," Sayim"]}),(0,a.jsxs)(i.TabsTrigger,{value:"lots",className:"text-xs sm:text-sm",children:[(0,a.jsx)(D,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Lot/SKT"]}),(0,a.jsxs)(i.TabsTrigger,{value:"orders",className:"text-xs sm:text-sm",children:[(0,a.jsx)(w.ShoppingCart,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Satis"})," Siparis"]})]}),(0,a.jsxs)(i.TabsContent,{value:"dashboard",className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stok Durumu"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(y.Package,{className:"h-5 w-5"}),title:"Toplam Urun",value:ev.totalProducts,color:"blue"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(v.AlertTriangle,{className:"h-5 w-5"}),title:"Dusuk Stok",value:ev.lowStock,color:"amber"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(y.Package,{className:"h-5 w-5"}),title:"Tukenen Urunler",value:ev.outOfStock,color:"red"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Islemler"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(w.ShoppingCart,{className:"h-5 w-5"}),title:"Bekleyen Siparisler",value:ev.pendingOrders,color:"purple"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(C.ClipboardList,{className:"h-5 w-5"}),title:"Eksik Urunler",value:ev.missingItems,color:"amber"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(S.CheckCircle,{className:"h-5 w-5"}),title:"Tamamlanan Siparisler",value:ev.completedOrders,color:"green"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dusuk Stoklu Urunler"}),(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Urun Adi"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Mevcut"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Minimum"}),(0,a.jsx)(n.TableHead,{children:"Durum"})]})}),(0,a.jsxs)(n.TableBody,{children:[B.filter(e=>(e.stock?.totalStock??e.stock_qty??0)<(e.stock?.minStock??10)).slice(0,10).map(e=>{let s=e.stock?.totalStock??e.stock_qty??0,l=e.stock?.minStock??10;return(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.basic?.name||e.name||"-"}),(0,a.jsx)(n.TableCell,{className:`text-right font-medium ${s<=0?"text-red-600":"text-amber-600"}`,children:s}),(0,a.jsx)(n.TableCell,{className:"text-right text-gray-600",children:l}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(Z,{stock:s,minStock:l})})]},e.id)}),0===B.filter(e=>(e.stock?.totalStock??e.stock_qty??0)<(e.stock?.minStock??10)).length&&(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:4,className:"text-center py-8 text-gray-500",children:"Dusuk stoklu urun yok"})})]})]})})]})]}),(0,a.jsxs)(i.TabsContent,{value:"missing",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(f.FileText,{className:"h-5 w-5"}),title:"Toplam Liste",value:eT.total,color:"blue"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(T.Clock,{className:"h-5 w-5"}),title:"Bekleyen",value:eT.pending,color:"amber"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(g.Send,{className:"h-5 w-5"}),title:"Gonderilmis",value:eT.sent,color:"purple"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(S.CheckCircle,{className:"h-5 w-5"}),title:"Tamamlanan",value:eT.completed,color:"green"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Liste no ara...",value:Y,onChange:e=>V(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(r.Select,{value:ea,onValueChange:es,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,a.jsx)(r.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"all",children:"Tum durumlar"}),(0,a.jsx)(r.SelectItem,{value:"pending",children:"Bekleyen"}),(0,a.jsx)(r.SelectItem,{value:"sent",children:"Gonderilmis"}),(0,a.jsx)(r.SelectItem,{value:"completed",children:"Tamamlanan"})]})]})]}),(0,a.jsxs)(l.Button,{onClick:()=>ec(!0),children:[(0,a.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Liste"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Liste No"}),(0,a.jsx)(n.TableHead,{children:"Tarih"}),(0,a.jsx)(n.TableHead,{children:"Durum"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Urun Sayisi"}),(0,a.jsx)(n.TableHead,{className:"hidden lg:table-cell",children:"Not"}),(0,a.jsx)(n.TableHead,{className:"w-[60px]"})]})}),(0,a.jsx)(n.TableBody,{children:q?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===eS.length?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Eksik listesi bulunamadi"})}):eS.slice(0,50).map(e=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-mono font-medium",children:e.listNo||"-"}),(0,a.jsx)(n.TableCell,{children:e.createdAt?.split("T")[0]||"-"}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(X,{status:e.status||"pending"})}),(0,a.jsx)(n.TableCell,{className:"text-right",children:e.items?.length||0}),(0,a.jsx)(n.TableCell,{className:"hidden lg:table-cell text-gray-600 text-sm truncate max-w-[200px]",children:e.notes||"-"}),(0,a.jsx)(n.TableCell,{children:(0,a.jsxs)(c.DropdownMenu,{children:[(0,a.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(c.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>{eo(e),ei(!0)},children:[(0,a.jsx)(j.Eye,{className:"h-4 w-4 mr-2"}),"Goruntule"]}),"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>eL(e),children:[(0,a.jsx)(g.Send,{className:"h-4 w-4 mr-2"}),"Depoya Gonder"]}),(0,a.jsx)(c.DropdownMenuSeparator,{}),(0,a.jsxs)(c.DropdownMenuItem,{className:"text-red-600",onClick:()=>eB(e),children:[(0,a.jsx)(p.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]}),"sent"===e.status&&(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>eH(e),children:[(0,a.jsx)(S.CheckCircle,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})})]},e.id))})]})})]}),(0,a.jsxs)(i.TabsContent,{value:"inventory",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(f.FileText,{className:"h-5 w-5"}),title:"Toplam Kayit",value:A.length,color:"blue"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(N.Warehouse,{className:"h-5 w-5"}),title:"Subeler",value:new Set(A.map(e=>e.branch)).size,color:"purple"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(y.Package,{className:"h-5 w-5"}),title:"Farkli Urun",value:new Set(A.map(e=>e.barcode)).size,color:"green"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(I.TrendingUp,{className:"h-5 w-5"}),title:"Toplam Miktar",value:A.reduce((e,a)=>e+(a.qty||0),0),color:"amber"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:max-w-md",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Barkod veya urun ara...",value:Y,onChange:e=>V(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(r.Select,{value:el,onValueChange:et,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,a.jsx)(r.SelectValue,{placeholder:"Sube"})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"all",children:"Tum subeler"}),(0,a.jsx)(r.SelectItem,{value:"merkez",children:"Merkez Depo"}),(0,a.jsx)(r.SelectItem,{value:"atlas",children:"Atlas Mesnica"}),(0,a.jsx)(r.SelectItem,{value:"desetka",children:"Desetka Market"})]})]}),(0,a.jsxs)(l.Button,{variant:"outline",onClick:()=>eI("inventory"),children:[(0,a.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Excel"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Sube"}),(0,a.jsx)(n.TableHead,{children:"Barkod"}),(0,a.jsx)(n.TableHead,{children:"Urun Adi"}),(0,a.jsx)(n.TableHead,{children:"SKT"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(n.TableHead,{className:"hidden lg:table-cell",children:"Son Guncelleme"})]})}),(0,a.jsx)(n.TableBody,{children:q?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===ek.length?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Envanter kaydi bulunamadi"})}):ek.slice(0,100).map(e=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{children:e.branch||"-"}),(0,a.jsx)(n.TableCell,{className:"font-mono text-sm",children:e.barcode||"-"}),(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.name||"-"}),(0,a.jsx)(n.TableCell,{children:e.skt||"-"}),(0,a.jsx)(n.TableCell,{className:"text-right font-medium",children:e.qty||0}),(0,a.jsx)(n.TableCell,{className:"hidden lg:table-cell text-gray-600 text-sm",children:e.updatedAt?.split("T")[0]||"-"})]},e.id))})]})})]}),(0,a.jsxs)(i.TabsContent,{value:"lots",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(y.Package,{className:"h-5 w-5"}),title:"Toplam Lot",value:ef.total,color:"blue"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(v.AlertTriangle,{className:"h-5 w-5"}),title:"Bu Ay Dolacak",value:ef.expiringThisMonth,color:"red"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(T.Clock,{className:"h-5 w-5"}),title:"Gelecek Ay",value:ef.expiringNextMonth,color:"amber"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(I.TrendingUp,{className:"h-5 w-5"}),title:"Toplam Miktar",value:ef.totalQuantity,color:"green"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:max-w-md",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Barkod veya urun ara...",value:Y,onChange:e=>V(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(l.Button,{variant:"outline",onClick:()=>eI("lots"),children:[(0,a.jsx)(u.Download,{className:"h-4 w-4 mr-2"}),"Excel"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Barkod"}),(0,a.jsx)(n.TableHead,{children:"Urun Adi"}),(0,a.jsx)(n.TableHead,{children:"Lot ID"}),(0,a.jsx)(n.TableHead,{children:"SKT"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Miktar"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Kalan Gun"})]})}),(0,a.jsx)(n.TableBody,{children:q?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===O.length?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Lot kaydi bulunamadi"})}):O.filter(e=>{if(!Y)return!0;let a=Y.toLowerCase();return e.barcode?.toLowerCase().includes(a)||e.productName?.toLowerCase().includes(a)}).slice(0,100).map(e=>{let s=0;if(e.expiryDate){let a;if(e.expiryDate.includes(".")){let s=e.expiryDate.split(".");a=new Date(parseInt(s[2]),parseInt(s[1])-1,parseInt(s[0]))}else a=new Date(e.expiryDate);s=Math.ceil((a.getTime()-Date.now())/864e5)}return(0,a.jsxs)(n.TableRow,{className:s<7?"bg-red-50":s<15?"bg-amber-50":"",children:[(0,a.jsx)(n.TableCell,{className:"font-mono text-sm",children:e.barcode||e.mainBarcode||"-"}),(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.productName||"-"}),(0,a.jsx)(n.TableCell,{className:"font-mono text-sm",children:e.lotNumber||e.lotId||"-"}),(0,a.jsx)(n.TableCell,{children:e.expiryDate||"-"}),(0,a.jsx)(n.TableCell,{className:"text-right font-medium",children:e.quantity||0}),(0,a.jsxs)(n.TableCell,{className:`text-right font-medium ${s<7?"text-red-600":s<15?"text-amber-600":"text-green-600"}`,children:[s," gun"]})]},e.id)})})]})})]}),(0,a.jsxs)(i.TabsContent,{value:"orders",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,a.jsx)(ee,{icon:(0,a.jsx)(w.ShoppingCart,{className:"h-5 w-5"}),title:"Toplam Siparis",value:ew.total,color:"blue"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(T.Clock,{className:"h-5 w-5"}),title:"Bekleyen",value:ew.pending,color:"amber"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(S.CheckCircle,{className:"h-5 w-5"}),title:"Onaylanan",value:ew.approved,color:"green"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(f.FileText,{className:"h-5 w-5"}),title:"Faturalanan",value:ew.invoiced,color:"purple"}),(0,a.jsx)(ee,{icon:(0,a.jsx)(y.Package,{className:"h-5 w-5"}),title:"Tamamlanan",value:ew.completed,color:"gray"})]}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,a.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,a.jsx)(h.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Siparis no veya musteri ara...",value:Y,onChange:e=>V(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(r.Select,{value:ea,onValueChange:es,children:[(0,a.jsx)(r.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,a.jsx)(r.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(r.SelectContent,{children:[(0,a.jsx)(r.SelectItem,{value:"all",children:"Tum durumlar"}),(0,a.jsx)(r.SelectItem,{value:"pending",children:"Bekleyen"}),(0,a.jsx)(r.SelectItem,{value:"approved",children:"Onaylanan"}),(0,a.jsx)(r.SelectItem,{value:"invoiced",children:"Faturalanan"}),(0,a.jsx)(r.SelectItem,{value:"completed",children:"Tamamlanan"}),(0,a.jsx)(r.SelectItem,{value:"rejected",children:"Reddedilen"})]})]})]}),(0,a.jsxs)(l.Button,{onClick:()=>eu(!0),children:[(0,a.jsx)(o.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Siparis"]})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(n.Table,{children:[(0,a.jsx)(n.TableHeader,{children:(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableHead,{children:"Siparis No"}),(0,a.jsx)(n.TableHead,{children:"Tarih"}),(0,a.jsx)(n.TableHead,{children:"Musteri"}),(0,a.jsx)(n.TableHead,{children:"Durum"}),(0,a.jsx)(n.TableHead,{className:"hidden lg:table-cell",children:"Kaynak"}),(0,a.jsx)(n.TableHead,{className:"text-right",children:"Urun"}),(0,a.jsx)(n.TableHead,{className:"text-right hidden sm:table-cell",children:"Toplam"}),(0,a.jsx)(n.TableHead,{className:"w-[60px]"})]})}),(0,a.jsx)(n.TableBody,{children:q?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===eC.length?(0,a.jsx)(n.TableRow,{children:(0,a.jsx)(n.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Siparis bulunamadi"})}):eC.slice(0,50).map(e=>(0,a.jsxs)(n.TableRow,{children:[(0,a.jsx)(n.TableCell,{className:"font-mono font-medium",children:e.orderNo||"-"}),(0,a.jsx)(n.TableCell,{children:e.createdAt?.split("T")[0]||"-"}),(0,a.jsx)(n.TableCell,{className:"font-medium",children:e.customerName||"-"}),(0,a.jsx)(n.TableCell,{children:(0,a.jsx)(J,{status:e.status||"pending"})}),(0,a.jsx)(n.TableCell,{className:"hidden lg:table-cell",children:"mobile"===e.source?(0,a.jsx)("span",{className:"text-amber-600",children:"Mobil"}):(0,a.jsx)("span",{className:"text-gray-600",children:"Desktop"})}),(0,a.jsx)(n.TableCell,{className:"text-right",children:e.items?.length||0}),(0,a.jsx)(n.TableCell,{className:"text-right font-medium hidden sm:table-cell",children:e.total?`€${e.total.toFixed(2)}`:"-"}),(0,a.jsx)(n.TableCell,{children:(0,a.jsxs)(c.DropdownMenu,{children:[(0,a.jsx)(c.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(c.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>{ey(e),em(!0)},children:[(0,a.jsx)(j.Eye,{className:"h-4 w-4 mr-2"}),"Goruntule"]}),"pending"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>{ey(e),eg(!0)},children:[(0,a.jsx)(b.Edit,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>eM(e),children:[(0,a.jsx)(S.CheckCircle,{className:"h-4 w-4 mr-2"}),"Onayla"]}),(0,a.jsx)(c.DropdownMenuSeparator,{}),(0,a.jsxs)(c.DropdownMenuItem,{className:"text-red-600",onClick:()=>eR(e),children:[(0,a.jsx)(p.Trash2,{className:"h-4 w-4 mr-2"}),"Reddet"]})]}),"approved"===e.status&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>{ey(e),eb(!0)},children:[(0,a.jsx)(f.FileText,{className:"h-4 w-4 mr-2"}),"Faturala"]}),(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>eA(e),children:[(0,a.jsx)(L.Truck,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]}),"invoiced"===e.status&&(0,a.jsxs)(c.DropdownMenuItem,{onClick:()=>eA(e),children:[(0,a.jsx)(S.CheckCircle,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})})]},e.id))})]})})]})]})}),(0,a.jsx)($,{open:er,onOpenChange:ei,list:ed}),(0,a.jsx)(z,{open:en,onOpenChange:ec,onSuccess:eD}),(0,a.jsx)(_,{open:ex,onOpenChange:em,order:eN}),(0,a.jsx)(G,{open:eh,onOpenChange:eu,onSuccess:eD}),(0,a.jsx)(Q,{open:ej,onOpenChange:eg,order:eN,onSuccess:eD}),(0,a.jsx)(W,{open:ep,onOpenChange:eb,order:eN,onSuccess:eD})]})}e.s(["default",()=>ea],32854)}]);