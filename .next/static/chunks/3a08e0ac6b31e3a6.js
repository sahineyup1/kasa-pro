(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63875,e=>{"use strict";var a=e.i(43476),s=e.i(71645),l=e.i(19455),t=e.i(93479),i=e.i(67489),r=e.i(84774),n=e.i(55146),c=e.i(69457),d=e.i(10204),o=e.i(24687),m=e.i(57428),h=e.i(76639),x=e.i(77572),u=e.i(31278);let p=(0,e.i(75254).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var g=e.i(73884),j=e.i(48256);let b=[{code:"SI",label:"Slovenya (SI)"},{code:"AT",label:"Avusturya (AT)"},{code:"DE",label:"Almanya (DE)"},{code:"IT",label:"Italya (IT)"},{code:"HR",label:"Hirvatistan (HR)"},{code:"HU",label:"Macaristan (HU)"},{code:"CZ",label:"Cek Cumhuriyeti (CZ)"},{code:"PL",label:"Polonya (PL)"},{code:"FR",label:"Fransa (FR)"},{code:"NL",label:"Hollanda (NL)"},{code:"BE",label:"Belcika (BE)"}],v=[{value:"wholesaler",label:"Toptanci"},{value:"manufacturer",label:"Uretici"},{value:"distributor",label:"Distributor"}],y=["EUR","USD","GBP","TRY"],N=["0","5","9.5","22"];function S(e,a,s,l){if(!e)return l;let t=e;for(let e of a)if(t&&"object"==typeof t&&e in t)t=t[e];else{t=void 0;break}if(null!=t)return t;let i=e[s];return null!=i?i:l}function T({open:e,onOpenChange:r,supplier:n,onSave:T}){let f=!!n,[C,k]=(0,s.useState)(""),[I,w]=(0,s.useState)(!1),[A,D]=(0,s.useState)(null),[B,L]=(0,s.useState)(""),[F,R]=(0,s.useState)(""),[O,P]=(0,s.useState)("SI"),[V,H]=(0,s.useState)("wholesaler"),[E,U]=(0,s.useState)(!0),[M,$]=(0,s.useState)(""),[K,z]=(0,s.useState)(""),[_,G]=(0,s.useState)(!1),[Y,Z]=(0,s.useState)(""),[W,X]=(0,s.useState)(""),[q,J]=(0,s.useState)(""),[Q,ee]=(0,s.useState)(""),[ea,es]=(0,s.useState)(""),[el,et]=(0,s.useState)(""),[ei,er]=(0,s.useState)(""),[en,ec]=(0,s.useState)("30"),[ed,eo]=(0,s.useState)("EUR"),[em,eh]=(0,s.useState)(""),[ex,eu]=(0,s.useState)(""),[ep,eg]=(0,s.useState)("9.5"),[ej,eb]=(0,s.useState)(!1),[ev,ey]=(0,s.useState)(""),[eN,eS]=(0,s.useState)(""),[eT,ef]=(0,s.useState)(""),[eC,ek]=(0,s.useState)(!1);(0,s.useEffect)(()=>{e&&(n?(L(S(n,["basic","name"],"name","")),R(S(n,["basic","shortName"],"shortName","")),P(S(n,["basic","country"],"country","SI")),H(S(n,["basic","type"],"type","wholesaler")),U(S(n,["basic","isActive"],"isActive",!0)),$(S(n,["basic","categories"],"categories",[]).join(", ")),z(S(n,["tax","taxId"],"taxId","")),G(S(n,["tax","reverseCharge"],"reverseCharge",!1)),Z(S(n,["contact","address","street"],"street","")),X(S(n,["contact","address","city"],"city","")),J(S(n,["contact","address","postalCode"],"postalCode","")),ee(S(n,["contact","phone"],"phone","")),es(S(n,["contact","email"],"email","")),et(S(n,["contact","contactPerson","name"],"contactPersonName","")),er(S(n,["contact","contactPerson","phone"],"contactPersonPhone","")),ec(String(S(n,["payment","paymentTermDays"],"paymentTermDays",30))),eo(S(n,["payment","currency"],"currency","EUR")),eh(S(n,["payment","bankDetails","bankName"],"bankName","")),eu(S(n,["payment","bankDetails","iban"],"iban","")),eg(String(S(n,["tax","defaultVatRate"],"defaultVatRate",9.5))),eb(S(n,["shipping","transportIncluded"],"transportIncluded",!1)),ey(String(S(n,["shipping","transportFee"],"transportFee",0)||"")),eS(String(S(n,["shipping","minOrderAmount"],"minOrderAmount",0)||"")),ef(S(n,["settings","notes"],"notes","")),k(S(n,["tax","taxId"],"taxId","")),S(n,["tax","vies_validated"],"vies_validated",!1)&&D({valid:!0,message:"Onceden dogrulanmis",companyName:S(n,["tax","vies_company_name"],"vies_company_name",void 0)})):(L(""),R(""),P("SI"),H("wholesaler"),U(!0),$(""),z(""),G(!1),Z(""),X(""),J(""),ee(""),es(""),et(""),er(""),ec("30"),eo("EUR"),eh(""),eu(""),eg("9.5"),eb(!1),ey(""),eS(""),ef(""),k(""),D(null)))},[e,n]);let eI=async()=>{if(C.trim()){w(!0),D(null);try{await new Promise(e=>setTimeout(e,1500));let e=C.replace(/\s/g,"").toUpperCase();if(!/^[A-Z]{2}[0-9A-Z]{8,12}$/.test(e))return void D({valid:!1,message:"Gecersiz VAT numarasi formati. Ornek: SI12345678"});let a=e.substring(0,2),s={SI:"Primer d.o.o.",AT:"Muster GmbH",DE:"Beispiel AG",IT:"Esempio S.r.l.",HR:"Primjer d.o.o."},l={SI:"Slovenska cesta 123, 1000 Ljubljana",AT:"Hauptstrasse 456, 1010 Wien",DE:"Musterweg 789, 10115 Berlin",IT:"Via Esempio 321, 00100 Roma",HR:"Ulica Primjer 654, 10000 Zagreb"};if(D({valid:!0,message:"VAT numarasi dogrulandi",companyName:s[a]||"Test Company",companyAddress:l[a]||"Test Address"}),s[a]&&(L(s[a]),R(s[a].substring(0,30))),b.find(e=>e.code===a)&&P(a),l[a]){let e=l[a].split(", ");if(e.length>=1&&Z(e[0]),e.length>=2){let a=e[1],s=a.match(/^(\d+)\s+(.+)$/);s?(J(s[1]),X(s[2])):X(a)}}z(e),"SI"!==a&&G(!0)}catch(e){D({valid:!1,message:"VIES servisi hata verdi: "+e.message})}finally{w(!1)}}},ew=async()=>{if(!B.trim())return void alert("Lutfen tedarikci adi girin!");if(ea&&!ea.includes("@"))return void alert("Gecersiz email adresi!");ek(!0);try{let e={basic:{name:B.trim(),shortName:F.trim()||B.trim().substring(0,30),country:O,type:V,isActive:E,categories:M.split(",").map(e=>e.trim()).filter(Boolean)},contact:{address:{street:Y.trim(),city:W.trim(),postalCode:q.trim()},phone:Q.trim(),email:ea.trim(),contactPerson:{name:el.trim(),phone:ei.trim()}},payment:{paymentTermDays:parseInt(en)||30,currency:ed,bankDetails:{bankName:em.trim(),iban:ex.trim()}},tax:{taxId:K.trim(),reverseCharge:_,defaultVatRate:parseFloat(ep)||9.5,...A?.valid&&{vies_validated:!0,vies_validation_date:new Date().toISOString(),vies_company_name:A.companyName}},shipping:{transportIncluded:ej,transportFee:parseFloat(ev)||0,minOrderAmount:parseFloat(eN)||0},settings:{notes:eT.trim()},updatedAt:new Date().toISOString()};f&&n?.id?await (0,c.updateFirestoreData)("suppliers",n.id,e):await (0,c.addFirestoreData)("suppliers",{...e,createdAt:new Date().toISOString()}),r(!1),T?.()}catch(e){console.error("Save error:",e),alert("Kaydetme hatasi: "+e.message)}finally{ek(!1)}};return(0,a.jsx)(h.Dialog,{open:e,onOpenChange:r,children:(0,a.jsxs)(h.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,a.jsxs)(h.DialogHeader,{className:"border-b pb-4",children:[(0,a.jsx)(h.DialogTitle,{className:"text-xl font-semibold",children:f?"Tedarikci Duzenle":"Yeni Tedarikci"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:f?"Tedarikci bilgilerini guncelleyin":"Yeni tedarikci eklemek icin formu doldurun"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto py-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)(j.Globe,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("h3",{className:"font-semibold text-blue-900",children:"AB VAT Numarasi Dogrulama"})]}),(0,a.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"Sirket bilgilerini otomatik doldurmak icin AB VAT numarasi ile baslayin"}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(t.Input,{placeholder:"Orn: SI12345678, ATU12345678, DE123456789",value:C,onChange:e=>k(e.target.value.toUpperCase())})}),(0,a.jsx)(l.Button,{onClick:eI,disabled:I||!C.trim(),className:"min-w-[160px]",children:I?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Dogrulaniyor..."]}):"VIES ile Dogrula"})]}),A&&(0,a.jsxs)("div",{className:`mt-3 p-3 rounded-lg flex items-start gap-2 ${A.valid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[A.valid?(0,a.jsx)(p,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}):(0,a.jsx)(g.XCircle,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium",children:A.message}),A.companyName&&(0,a.jsxs)("p",{className:"text-sm mt-1",children:["Sirket: ",A.companyName]}),A.companyAddress&&(0,a.jsxs)("p",{className:"text-sm",children:["Adres: ",A.companyAddress]})]})]})]}),(0,a.jsxs)(x.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,a.jsxs)(x.TabsList,{className:"grid w-full grid-cols-5 mb-4",children:[(0,a.jsx)(x.TabsTrigger,{value:"basic",children:"Temel Bilgiler"}),(0,a.jsx)(x.TabsTrigger,{value:"contact",children:"Iletisim"}),(0,a.jsx)(x.TabsTrigger,{value:"payment",children:"Odeme & Finans"}),(0,a.jsx)(x.TabsTrigger,{value:"shipping",children:"Nakliye"}),(0,a.jsx)(x.TabsTrigger,{value:"settings",children:"Ayarlar"})]}),(0,a.jsxs)(x.TabsContent,{value:"basic",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"name",children:"Tedarikci Adi *"}),(0,a.jsx)(t.Input,{id:"name",value:B,onChange:e=>L(e.target.value),placeholder:"Orn: ABC Trading GmbH"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"shortName",children:"Kisa Isim"}),(0,a.jsx)(t.Input,{id:"shortName",value:F,onChange:e=>R(e.target.value),placeholder:"Orn: ABC"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"country",children:"Ulke *"}),(0,a.jsxs)(i.Select,{value:O,onValueChange:P,children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Ulke secin"})}),(0,a.jsx)(i.SelectContent,{children:b.map(e=>(0,a.jsx)(i.SelectItem,{value:e.code,children:e.label},e.code))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"type",children:"Tip"}),(0,a.jsxs)(i.Select,{value:V,onValueChange:H,children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Tip secin"})}),(0,a.jsx)(i.SelectContent,{children:v.map(e=>(0,a.jsx)(i.SelectItem,{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"taxId",children:"VAT/Vergi Numarasi"}),(0,a.jsx)(t.Input,{id:"taxId",value:K,onChange:e=>z(e.target.value.toUpperCase()),placeholder:"Orn: SI12345678"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"categories",children:"Kategoriler"}),(0,a.jsx)(t.Input,{id:"categories",value:M,onChange:e=>$(e.target.value),placeholder:"Orn: Et, Tavuk, Sakatatlar (virgul ile)"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-6 pt-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"isActive",checked:E,onCheckedChange:e=>U(e)}),(0,a.jsx)(d.Label,{htmlFor:"isActive",className:"font-normal",children:"Aktif Tedarikci"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"reverseCharge",checked:_,onCheckedChange:e=>G(e)}),(0,a.jsx)(d.Label,{htmlFor:"reverseCharge",className:"font-normal",children:"Reverse Charge (AB Tedarikcisi)"})]})]})]}),(0,a.jsxs)(x.TabsContent,{value:"contact",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Adres Bilgileri"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"street",children:"Cadde/Sokak"}),(0,a.jsx)(t.Input,{id:"street",value:Y,onChange:e=>Z(e.target.value),placeholder:"Orn: Hauptstrasse 123"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"city",children:"Sehir"}),(0,a.jsx)(t.Input,{id:"city",value:W,onChange:e=>X(e.target.value),placeholder:"Orn: Ljubljana"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"postalCode",children:"Posta Kodu"}),(0,a.jsx)(t.Input,{id:"postalCode",value:q,onChange:e=>J(e.target.value),placeholder:"Orn: 1000"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Iletisim Bilgileri"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"phone",children:"Telefon"}),(0,a.jsx)(t.Input,{id:"phone",value:Q,onChange:e=>ee(e.target.value),placeholder:"Orn: +386 1 234 5678"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(t.Input,{id:"email",type:"email",value:ea,onChange:e=>es(e.target.value),placeholder:"Orn: info@tedarikci.com"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"contactPerson",children:"Irtibat Kisisi"}),(0,a.jsx)(t.Input,{id:"contactPerson",value:el,onChange:e=>et(e.target.value),placeholder:"Orn: Ahmet Yilmaz"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"contactPhone",children:"Irtibat Telefonu"}),(0,a.jsx)(t.Input,{id:"contactPhone",value:ei,onChange:e=>er(e.target.value),placeholder:"Orn: +386 40 123 456"})]})]})]})]}),(0,a.jsxs)(x.TabsContent,{value:"payment",className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Odeme Bilgileri"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"paymentTermDays",children:"Odeme Vadesi (gun)"}),(0,a.jsx)(t.Input,{id:"paymentTermDays",type:"number",value:en,onChange:e=>ec(e.target.value),min:"0",max:"365"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"currency",children:"Para Birimi"}),(0,a.jsxs)(i.Select,{value:ed,onValueChange:eo,children:[(0,a.jsx)(i.SelectTrigger,{children:(0,a.jsx)(i.SelectValue,{placeholder:"Para birimi secin"})}),(0,a.jsx)(i.SelectContent,{children:y.map(e=>(0,a.jsx)(i.SelectItem,{value:e,children:e},e))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"bankName",children:"Banka Adi"}),(0,a.jsx)(t.Input,{id:"bankName",value:em,onChange:e=>eh(e.target.value),placeholder:"Orn: Nova KBM"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"iban",children:"IBAN"}),(0,a.jsx)(t.Input,{id:"iban",value:ex,onChange:e=>eu(e.target.value),placeholder:"Orn: SI56 0110 0100 0123 456"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"vatRate",children:"Varsayilan KDV Orani (%)"}),(0,a.jsxs)(i.Select,{value:ep,onValueChange:eg,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[200px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"KDV orani secin"})}),(0,a.jsx)(i.SelectContent,{children:N.map(e=>(0,a.jsxs)(i.SelectItem,{value:e,children:["%",e]},e))})]})]})]}),f&&n?.payment?.currentBalance!==void 0&&(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Bakiye Durumu"}),(0,a.jsx)("p",{className:`text-2xl font-bold ${(n.payment.currentBalance||0)>0?"text-red-600":0>(n.payment.currentBalance||0)?"text-green-600":""}`,children:(n.payment.currentBalance||0).toLocaleString("tr-TR",{style:"currency",currency:ed})})]})]}),(0,a.jsx)(x.TabsContent,{value:"shipping",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Nakliye Bilgileri"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(m.Checkbox,{id:"transportIncluded",checked:ej,onCheckedChange:e=>eb(e)}),(0,a.jsx)(d.Label,{htmlFor:"transportIncluded",className:"font-normal",children:"Nakliye Ucreti Dahil"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"transportFee",children:"Nakliye Ucreti (EUR)"}),(0,a.jsx)(t.Input,{id:"transportFee",type:"number",step:"0.01",value:ev,onChange:e=>ey(e.target.value),disabled:ej,placeholder:"0.00"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"minOrderAmount",children:"Minimum Siparis (EUR)"}),(0,a.jsx)(t.Input,{id:"minOrderAmount",type:"number",step:"0.01",value:eN,onChange:e=>eS(e.target.value),placeholder:"0.00"})]})]})]})}),(0,a.jsx)(x.TabsContent,{value:"settings",className:"space-y-4",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Diger Ayarlar"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(d.Label,{htmlFor:"notes",children:"Notlar"}),(0,a.jsx)(o.Textarea,{id:"notes",value:eT,onChange:e=>ef(e.target.value),placeholder:"Tedarikci hakkinda notlar...",rows:5})]})]})})]})]}),(0,a.jsxs)("div",{className:"border-t pt-4 flex justify-end gap-3",children:[(0,a.jsx)(l.Button,{variant:"outline",onClick:()=>r(!1),disabled:eC,children:"Iptal"}),(0,a.jsx)(l.Button,{onClick:ew,disabled:eC,children:eC?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):"Tedarikciyi Kaydet"})]})]})})}var f=e.i(7233),C=e.i(16715),k=e.i(41071),I=e.i(88699),w=e.i(27612),A=e.i(86536),D=e.i(55436),B=e.i(7486);function L({isActive:e}){return(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:e?"Aktif":"Pasif"})}let F={SI:"ðŸ‡¸ðŸ‡®",AT:"ðŸ‡¦ðŸ‡¹",DE:"ðŸ‡©ðŸ‡ª",IT:"ðŸ‡®ðŸ‡¹",HR:"ðŸ‡­ðŸ‡·",HU:"ðŸ‡­ðŸ‡º",CZ:"ðŸ‡¨ðŸ‡¿",PL:"ðŸ‡µðŸ‡±",FR:"ðŸ‡«ðŸ‡·",NL:"ðŸ‡³ðŸ‡±",BE:"ðŸ‡§ðŸ‡ª"};function R(e,a,s,l){let t=e;for(let e of a)if(t&&"object"==typeof t&&e in t)t=t[e];else{t=void 0;break}if(null!=t)return t;let i=e[s];return null!=i?i:l}function O(){let[e,d]=(0,s.useState)([]),[o,m]=(0,s.useState)(!0),[h,x]=(0,s.useState)(""),[u,p]=(0,s.useState)("all"),[g,b]=(0,s.useState)("all"),[v,y]=(0,s.useState)("all"),[N,S]=(0,s.useState)(!1),[O,P]=(0,s.useState)(null);(0,s.useEffect)(()=>{m(!0);let e=(0,c.subscribeToRTDB)("partners",e=>{d(e||[]),m(!1)});return()=>e()},[]);let V=(0,s.useMemo)(()=>e.filter(e=>{let a=R(e,["basic","name"],"name",""),s=R(e,["contact","email"],"email",""),l=R(e,["contact","phone"],"phone",""),t=R(e,["tax","taxId"],"taxId",""),i=h.toLowerCase(),r=!h||a.toLowerCase().includes(i)||s.toLowerCase().includes(i)||l.toLowerCase().includes(i)||t.toLowerCase().includes(i),n=R(e,["basic","isActive"],"isActive",!0),c="all"===u||"active"===u&&n||"inactive"===u&&!n,d=R(e,["basic","country"],"country",""),o="all"===g||d===g,m=R(e,["basic","categories"],"categories",[]),x="all"===v||m.some(e=>e.toLowerCase()===v.toLowerCase());return r&&c&&o&&x}),[e,h,u,g,v]),H=(0,s.useMemo)(()=>{let a=e.length;return{total:a,active:e.filter(e=>R(e,["basic","isActive"],"isActive",!0)).length,totalBalance:e.reduce((e,a)=>e+R(a,["payment","currentBalance"],"currentBalance",0),0)}},[e]),E=(0,s.useMemo)(()=>{let a=new Set;return e.forEach(e=>{let s=R(e,["basic","country"],"country","");s&&a.add(s)}),Array.from(a).sort()},[e]),U=(0,s.useMemo)(()=>{let a=new Set;return e.forEach(e=>{R(e,["basic","categories"],"categories",[]).forEach(e=>a.add(e))}),Array.from(a).sort()},[e]),M=async e=>{try{let a=!R(e,["basic","isActive"],"isActive",!0);e.basic?await (0,c.updateData)(`partners/${e.id}/basic`,{isActive:a}):await (0,c.updateData)(`partners/${e.id}`,{isActive:a,updatedAt:new Date().toISOString()})}catch(e){console.error("Status update error:",e),alert("Durum guncellenemedi: "+e.message)}},$=async e=>{let a=R(e,["basic","name"],"name","Tedarikci");if(confirm(`"${a}" tedarikciyi silmek istediginize emin misiniz?`))try{await (0,c.removeData)(`partners/${e.id}`)}catch(e){console.error("Delete error:",e),alert("Silme hatasi: "+e.message)}};return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,a.jsxs)("div",{className:"bg-white border-b px-8 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Tedarikciler"}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[H.total," tedarikci - ",H.active," aktif"]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>{m(!0),setTimeout(()=>m(!1),500)},disabled:o,children:[(0,a.jsx)(C.RefreshCw,{className:`h-4 w-4 mr-2 ${o?"animate-spin":""}`}),"Yenile"]}),(0,a.jsxs)(l.Button,{onClick:()=>{P(null),S(!0)},children:[(0,a.jsx)(f.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Tedarikci"]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(B.Building2,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:H.total})]})]})}),(0,a.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(B.Building2,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Aktif"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:H.active})]})]})}),(0,a.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)(j.Globe,{className:"h-5 w-5 text-purple-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Ulkeler"}),(0,a.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:E.length})]})]})}),(0,a.jsx)("div",{className:`${H.totalBalance>=0?"bg-red-50":"bg-green-50"} rounded-lg p-4`,children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:`p-2 ${H.totalBalance>=0?"bg-red-100":"bg-green-100"} rounded-lg`,children:(0,a.jsx)(B.Building2,{className:`h-5 w-5 ${H.totalBalance>=0?"text-red-600":"text-green-600"}`})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam Bakiye"}),(0,a.jsxs)("p",{className:`text-xl font-semibold ${H.totalBalance>=0?"text-red-600":"text-green-600"}`,children:[H.totalBalance>=0?"-":"+","â‚¬",Math.abs(H.totalBalance).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,a.jsx)(D.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)(t.Input,{placeholder:"Tedarikci ara...",value:h,onChange:e=>x(e.target.value),className:"pl-10"})]}),(0,a.jsxs)(i.Select,{value:u,onValueChange:p,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[150px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Durum"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Tum durumlar"}),(0,a.jsx)(i.SelectItem,{value:"active",children:"Aktif"}),(0,a.jsx)(i.SelectItem,{value:"inactive",children:"Pasif"})]})]}),(0,a.jsxs)(i.Select,{value:g,onValueChange:b,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[150px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Ulke"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Tum ulkeler"}),E.map(e=>(0,a.jsxs)(i.SelectItem,{value:e,children:[F[e]||""," ",e]},e))]})]}),(0,a.jsxs)(i.Select,{value:v,onValueChange:y,children:[(0,a.jsx)(i.SelectTrigger,{className:"w-[150px]",children:(0,a.jsx)(i.SelectValue,{placeholder:"Kategori"})}),(0,a.jsxs)(i.SelectContent,{children:[(0,a.jsx)(i.SelectItem,{value:"all",children:"Tum kategoriler"}),U.map(e=>(0,a.jsx)(i.SelectItem,{value:e,children:e},e))]})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,a.jsx)("div",{className:"bg-white rounded-lg border",children:(0,a.jsxs)(r.Table,{children:[(0,a.jsx)(r.TableHeader,{children:(0,a.jsxs)(r.TableRow,{children:[(0,a.jsx)(r.TableHead,{className:"w-[120px]",children:"Kod"}),(0,a.jsx)(r.TableHead,{children:"Tedarikci"}),(0,a.jsx)(r.TableHead,{children:"Tip"}),(0,a.jsx)(r.TableHead,{children:"Ulke"}),(0,a.jsx)(r.TableHead,{children:"Iletisim"}),(0,a.jsx)(r.TableHead,{children:"Telefon"}),(0,a.jsx)(r.TableHead,{children:"E-posta"}),(0,a.jsx)(r.TableHead,{className:"text-right",children:"Borc"}),(0,a.jsx)(r.TableHead,{className:"text-right",children:"Alacak"}),(0,a.jsx)(r.TableHead,{className:"text-right",children:"Bakiye"}),(0,a.jsx)(r.TableHead,{children:"Durum"}),(0,a.jsx)(r.TableHead,{className:"w-[60px]"})]})}),(0,a.jsx)(r.TableBody,{children:o?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:12,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===V.length?(0,a.jsx)(r.TableRow,{children:(0,a.jsx)(r.TableCell,{colSpan:12,className:"text-center py-8 text-gray-500",children:h||"all"!==u||"all"!==g||"all"!==v?"Filtrelere uygun tedarikci bulunamadi":"Henuz tedarikci eklenmemis"})}):V.map(e=>{let s=R(e,["tax","taxId"],"taxId","-"),t=R(e,["basic","name"],"name","Bilinmiyor"),i=R(e,["basic","type"],"type","wholesaler"),c=R(e,["basic","country"],"country","-"),d=R(e,["contact","contactPerson","name"],"contactPerson","-"),o=R(e,["contact","phone"],"phone","-"),m=R(e,["contact","email"],"email","-"),h=R(e,["basic","isActive"],"isActive",!0),x=R(e,["payment","currentBalance"],"currentBalance",0),u=x>=0?x:0,p=x<0?Math.abs(x):0;return(0,a.jsxs)(r.TableRow,{className:"hover:bg-gray-50",children:[(0,a.jsx)(r.TableCell,{className:"font-mono text-sm font-medium",children:s}),(0,a.jsx)(r.TableCell,{className:"font-medium",children:t}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:{wholesaler:"Toptanci",manufacturer:"Uretici",distributor:"Distributor",ToptancÄ±:"Toptanci",Ãœretici:"Uretici",DistribÃ¼tÃ¶r:"Distributor"}[i]||i}),(0,a.jsxs)(r.TableCell,{children:[F[c]||""," ",c]}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:d}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:o}),(0,a.jsx)(r.TableCell,{className:"text-gray-600",children:m}),(0,a.jsxs)(r.TableCell,{className:`text-right ${u>0?"text-red-600 font-medium":""}`,children:["â‚¬",u.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,a.jsxs)(r.TableCell,{className:`text-right ${p>0?"text-green-600 font-medium":""}`,children:["â‚¬",p.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,a.jsxs)(r.TableCell,{className:`text-right font-medium ${x>0?"text-red-600":x<0?"text-green-600":""}`,children:["â‚¬",x.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,a.jsx)(r.TableCell,{children:(0,a.jsx)(L,{isActive:h})}),(0,a.jsx)(r.TableCell,{children:(0,a.jsxs)(n.DropdownMenu,{children:[(0,a.jsx)(n.DropdownMenuTrigger,{asChild:!0,children:(0,a.jsx)(l.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,a.jsx)(k.MoreHorizontal,{className:"h-4 w-4"})})}),(0,a.jsxs)(n.DropdownMenuContent,{align:"end",children:[(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>{P(e),S(!0)},children:[(0,a.jsx)(A.Eye,{className:"h-4 w-4 mr-2"}),"Detaylari Goruntule"]}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>{P(e),S(!0)},children:[(0,a.jsx)(I.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsx)(n.DropdownMenuItem,{onClick:()=>M(e),children:h?"â¸ï¸ Pasif Yap":"â–¶ï¸ Aktif Yap"}),(0,a.jsx)(n.DropdownMenuSeparator,{}),(0,a.jsxs)(n.DropdownMenuItem,{onClick:()=>$(e),className:"text-red-600",children:[(0,a.jsx)(w.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]})]})})]},e.id)})})]})})}),(0,a.jsx)(T,{open:N,onOpenChange:S,supplier:O,onSave:()=>S(!1)})]})}e.s(["default",()=>O],63875)}]);