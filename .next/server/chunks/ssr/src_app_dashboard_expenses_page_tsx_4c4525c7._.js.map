{"version":3,"sources":["../../../../src/app/dashboard/expenses/page.tsx","../../../../src/components/dialogs/expense-dialog.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport {\r\n  Plus,\r\n  Search,\r\n  Filter,\r\n  Receipt,\r\n  Calendar,\r\n  Building2,\r\n  Edit,\r\n  Trash2,\r\n  Eye,\r\n  Download,\r\n  Loader2,\r\n} from 'lucide-react';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport {\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableHead,\r\n  TableHeader,\r\n  TableRow,\r\n} from '@/components/ui/table';\r\nimport { formatCurrency, formatDate } from '@/lib/utils';\r\nimport { subscribeToFirestore, deleteFirestoreData } from '@/services/firebase';\r\nimport { ExpenseDialog } from '@/components/dialogs/expense-dialog';\r\n\r\ninterface Expense {\r\n  id: string;\r\n  _id?: string;\r\n  documentNumber?: string;\r\n  documentDate?: string;\r\n  date?: string;\r\n  vendor?: string;\r\n  vendorId?: string;\r\n  vendorName?: string;\r\n  category: string;\r\n  categoryName?: string;\r\n  description?: string;\r\n  notes?: string;\r\n  amount?: number;\r\n  netAmount?: number;\r\n  vatAmount?: number;\r\n  ddvAmount?: number;\r\n  totalAmount?: number;\r\n  grossAmount?: number;\r\n  paymentMethod?: string;\r\n  paymentStatus?: string;\r\n  status?: string;\r\n  branchId?: string;\r\n  branchName?: string;\r\n  createdAt?: any;\r\n  createdBy?: string;\r\n  isActive?: boolean;\r\n}\r\n\r\nconst categoryLabels: Record<string, string> = {\r\n  fuel: 'Yakıt',\r\n  maintenance: 'Bakım/Onarım',\r\n  insurance: 'Sigorta',\r\n  rent: 'Kira',\r\n  utilities: 'Faturalar',\r\n  supplies: 'Malzeme',\r\n  other: 'Diğer',\r\n};\r\n\r\nconst statusLabels: Record<string, { label: string; color: string }> = {\r\n  pending: { label: 'Beklemede', color: 'bg-yellow-100 text-yellow-700' },\r\n  approved: { label: 'Onaylandı', color: 'bg-emerald-100 text-emerald-700' },\r\n  rejected: { label: 'Reddedildi', color: 'bg-red-100 text-red-700' },\r\n  paid: { label: 'Ödendi', color: 'bg-blue-100 text-blue-700' },\r\n};\r\n\r\nexport default function ExpensesPage() {\r\n  const [expenses, setExpenses] = useState<Expense[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedCategory, setSelectedCategory] = useState('all');\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [editingExpense, setEditingExpense] = useState<Expense | null>(null);\r\n\r\n  useEffect(() => {\r\n    // Firestore'dan masraf fişlerini dinle (erp_expenses collection)\r\n    const unsubscribe = subscribeToFirestore(\r\n      'expenses',\r\n      (data) => {\r\n        // Aktif kayıtları filtrele ve tarihe göre sırala\r\n        const activeExpenses = data\r\n          .filter((e: Expense) => e.isActive !== false)\r\n          .sort((a: Expense, b: Expense) => {\r\n            const dateA = a.documentDate || a.date || '';\r\n            const dateB = b.documentDate || b.date || '';\r\n            return dateB.localeCompare(dateA);\r\n          });\r\n        setExpenses(activeExpenses);\r\n        setLoading(false);\r\n      },\r\n      {\r\n        whereField: 'isActive',\r\n        whereOp: '==',\r\n        whereValue: true,\r\n      }\r\n    );\r\n\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const filteredExpenses = expenses.filter((expense) => {\r\n    const vendorText = expense.vendorName || expense.vendor || '';\r\n    const descText = expense.description || expense.notes || '';\r\n    const matchesSearch =\r\n      vendorText.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      descText.toLowerCase().includes(searchQuery.toLowerCase());\r\n    const matchesCategory =\r\n      selectedCategory === 'all' || expense.category === selectedCategory;\r\n    return matchesSearch && matchesCategory;\r\n  });\r\n\r\n  const stats = {\r\n    total: expenses.length,\r\n    totalAmount: expenses.reduce((sum, e) => sum + (e.grossAmount || e.totalAmount || 0), 0),\r\n    pending: expenses.filter((e) => (e.paymentStatus || e.status) === 'pending').length,\r\n    thisMonth: expenses.filter((e) => {\r\n      const dateStr = e.documentDate || e.date || '';\r\n      if (!dateStr) return false;\r\n      const expenseDate = new Date(dateStr);\r\n      const now = new Date();\r\n      return expenseDate.getMonth() === now.getMonth() && expenseDate.getFullYear() === now.getFullYear();\r\n    }).length,\r\n  };\r\n\r\n  const handleNewExpense = () => {\r\n    setEditingExpense(null);\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleEditExpense = (expense: Expense) => {\r\n    setEditingExpense(expense);\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleDeleteExpense = async (expense: Expense) => {\r\n    const displayName = expense.description || expense.vendorName || expense.vendor || 'Bu masraf';\r\n    if (confirm(`\"${displayName}\" masrafini silmek istediginize emin misiniz?`)) {\r\n      try {\r\n        await deleteFirestoreData('expenses', expense.id);\r\n      } catch (error) {\r\n        console.error('Delete error:', error);\r\n        alert('Silme hatasi: ' + (error as Error).message);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-96\">\r\n        <Loader2 className=\"h-8 w-8 animate-spin text-primary\" />\r\n        <span className=\"ml-2 text-muted-foreground\">Yükleniyor...</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Page Header */}\r\n      <div className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold tracking-tight\">Masraf Fişleri</h1>\r\n          <p className=\"text-muted-foreground\">\r\n            Masraf ve gider yönetimi\r\n          </p>\r\n        </div>\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button variant=\"outline\" size=\"sm\">\r\n            <Download className=\"h-4 w-4 mr-2\" />\r\n            Excel\r\n          </Button>\r\n          <Button size=\"sm\" onClick={handleNewExpense}>\r\n            <Plus className=\"h-4 w-4 mr-2\" />\r\n            Yeni Masraf\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Stats Cards */}\r\n      <div className=\"grid gap-4 md:grid-cols-4\">\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Toplam Masraf\r\n            </CardTitle>\r\n            <Receipt className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.total}</div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Toplam Tutar\r\n            </CardTitle>\r\n            <Building2 className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-primary\">\r\n              {formatCurrency(stats.totalAmount)}\r\n            </div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Bekleyen\r\n            </CardTitle>\r\n            <div className=\"h-2 w-2 rounded-full bg-yellow-500\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold text-yellow-600\">{stats.pending}</div>\r\n          </CardContent>\r\n        </Card>\r\n        <Card>\r\n          <CardHeader className=\"flex flex-row items-center justify-between pb-2\">\r\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">\r\n              Bu Ay\r\n            </CardTitle>\r\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\r\n          </CardHeader>\r\n          <CardContent>\r\n            <div className=\"text-2xl font-bold\">{stats.thisMonth}</div>\r\n          </CardContent>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <div className=\"flex flex-col gap-4 md:flex-row md:items-center md:justify-between\">\r\n            <div className=\"flex flex-1 gap-4\">\r\n              <div className=\"relative flex-1 max-w-sm\">\r\n                <Search className=\"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground\" />\r\n                <Input\r\n                  type=\"search\"\r\n                  placeholder=\"Cari veya açıklama ara...\"\r\n                  value={searchQuery}\r\n                  onChange={(e) => setSearchQuery(e.target.value)}\r\n                  className=\"pl-9\"\r\n                />\r\n              </div>\r\n              <div className=\"flex gap-2\">\r\n                <Button\r\n                  variant={selectedCategory === 'all' ? 'default' : 'outline'}\r\n                  size=\"sm\"\r\n                  onClick={() => setSelectedCategory('all')}\r\n                >\r\n                  Tümü\r\n                </Button>\r\n                {Object.entries(categoryLabels).map(([key, label]) => (\r\n                  <Button\r\n                    key={key}\r\n                    variant={selectedCategory === key ? 'default' : 'outline'}\r\n                    size=\"sm\"\r\n                    onClick={() => setSelectedCategory(key)}\r\n                    className=\"whitespace-nowrap\"\r\n                  >\r\n                    {label}\r\n                  </Button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Expenses Table */}\r\n      <Card>\r\n        <CardContent className=\"pt-6\">\r\n          <Table>\r\n            <TableHeader>\r\n              <TableRow>\r\n                <TableHead>Tarih</TableHead>\r\n                <TableHead>Cari/Tedarikçi</TableHead>\r\n                <TableHead>Kategori</TableHead>\r\n                <TableHead>Açıklama</TableHead>\r\n                <TableHead className=\"text-right\">Tutar</TableHead>\r\n                <TableHead className=\"text-right\">KDV</TableHead>\r\n                <TableHead className=\"text-right\">Toplam</TableHead>\r\n                <TableHead>Durum</TableHead>\r\n                <TableHead className=\"w-[100px]\">İşlem</TableHead>\r\n              </TableRow>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {filteredExpenses.length === 0 ? (\r\n                <TableRow>\r\n                  <TableCell colSpan={9} className=\"text-center py-12\">\r\n                    <Receipt className=\"h-12 w-12 text-muted-foreground mx-auto mb-4\" />\r\n                    <h3 className=\"text-lg font-medium\">Masraf bulunamadı</h3>\r\n                    <p className=\"text-muted-foreground\">\r\n                      Henüz masraf fişi eklenmemiş veya arama kriterlerine uygun sonuç yok.\r\n                    </p>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ) : (\r\n                filteredExpenses.map((expense) => {\r\n                  const expenseDate = expense.documentDate || expense.date || '';\r\n                  const vendorDisplay = expense.vendorName || expense.vendor || '-';\r\n                  const categoryDisplay = expense.categoryName || categoryLabels[expense.category] || expense.category || '-';\r\n                  const descDisplay = expense.description || expense.notes || '-';\r\n                  const netAmount = expense.netAmount || expense.amount || 0;\r\n                  const vatAmount = expense.ddvAmount || expense.vatAmount || 0;\r\n                  const totalAmount = expense.grossAmount || expense.totalAmount || 0;\r\n                  const status = expense.paymentStatus || expense.status || 'pending';\r\n\r\n                  return (\r\n                    <TableRow key={expense.id}>\r\n                      <TableCell className=\"font-medium\">\r\n                        {formatDate(expenseDate)}\r\n                      </TableCell>\r\n                      <TableCell>{vendorDisplay}</TableCell>\r\n                      <TableCell>{categoryDisplay}</TableCell>\r\n                      <TableCell className=\"max-w-[200px] truncate\">\r\n                        {descDisplay}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right font-mono\">\r\n                        {formatCurrency(netAmount)}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right font-mono text-muted-foreground\">\r\n                        {formatCurrency(vatAmount)}\r\n                      </TableCell>\r\n                      <TableCell className=\"text-right font-mono font-medium\">\r\n                        {formatCurrency(totalAmount)}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <span\r\n                          className={`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${\r\n                            statusLabels[status]?.color || 'bg-gray-100 text-gray-700'\r\n                          }`}\r\n                        >\r\n                          {statusLabels[status]?.label || status}\r\n                        </span>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <div className=\"flex items-center gap-1\">\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8\"\r\n                            onClick={() => handleEditExpense(expense)}\r\n                          >\r\n                            <Eye className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8\"\r\n                            onClick={() => handleEditExpense(expense)}\r\n                          >\r\n                            <Edit className=\"h-4 w-4\" />\r\n                          </Button>\r\n                          <Button\r\n                            variant=\"ghost\"\r\n                            size=\"icon\"\r\n                            className=\"h-8 w-8 text-destructive\"\r\n                            onClick={() => handleDeleteExpense(expense)}\r\n                          >\r\n                            <Trash2 className=\"h-4 w-4\" />\r\n                          </Button>\r\n                        </div>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  );\r\n                })\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Expense Dialog */}\r\n      <ExpenseDialog\r\n        open={dialogOpen}\r\n        onOpenChange={setDialogOpen}\r\n        expense={editingExpense}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { X, Calculator } from 'lucide-react';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Input } from '@/components/ui/input';\r\nimport { Label } from '@/components/ui/label';\r\nimport {\r\n  Select,\r\n  SelectContent,\r\n  SelectItem,\r\n  SelectTrigger,\r\n  SelectValue,\r\n} from '@/components/ui/select';\r\nimport { Textarea } from '@/components/ui/textarea';\r\nimport {\r\n  Dialog,\r\n  DialogContent,\r\n  DialogHeader,\r\n  DialogTitle,\r\n  DialogFooter,\r\n} from '@/components/ui/dialog';\r\nimport { addFirestoreData, updateFirestoreData, subscribeToFirestore } from '@/services/firebase';\r\n\r\n// DDV Oranları (Slovenya)\r\nconst DDV_RATES = [\r\n  { label: '22% - Standart', value: 22 },\r\n  { label: '9.5% - Indirimli', value: 9.5 },\r\n  { label: '5% - Kitap/E-kitap', value: 5 },\r\n  { label: '0% - Muaf', value: 0 },\r\n];\r\n\r\n// Kategoriler\r\nconst CATEGORIES = [\r\n  { value: 'electricity', label: 'Elektrik' },\r\n  { value: 'water', label: 'Su' },\r\n  { value: 'gas', label: 'Dogalgaz' },\r\n  { value: 'rent', label: 'Kira' },\r\n  { value: 'internet', label: 'Internet/Telefon' },\r\n  { value: 'personnel', label: 'Personel' },\r\n  { value: 'fuel', label: 'Yakit' },\r\n  { value: 'maintenance', label: 'Bakim-Onarim' },\r\n  { value: 'transport', label: 'Nakliye' },\r\n  { value: 'insurance', label: 'Sigorta' },\r\n  { value: 'consulting', label: 'Danismanlik' },\r\n  { value: 'advertising', label: 'Reklam' },\r\n  { value: 'stationery', label: 'Kirtasiye' },\r\n  { value: 'cleaning', label: 'Temizlik' },\r\n  { value: 'food', label: 'Yemek' },\r\n  { value: 'travel', label: 'Seyahat' },\r\n  { value: 'bank_fees', label: 'Banka Masraflari' },\r\n  { value: 'other', label: 'Diger' },\r\n];\r\n\r\n// Odeme Durumlari\r\nconst PAYMENT_STATUSES = [\r\n  { value: 'paid', label: 'Odendi' },\r\n  { value: 'pending', label: 'Bekliyor' },\r\n  { value: 'due', label: 'Vadeli' },\r\n];\r\n\r\n// Odeme Yontemleri\r\nconst PAYMENT_METHODS = [\r\n  { value: 'cash', label: 'Nakit' },\r\n  { value: 'bank', label: 'Banka Havalesi' },\r\n  { value: 'credit', label: 'Kredi Karti' },\r\n  { value: 'check', label: 'Cek' },\r\n];\r\n\r\ninterface ExpenseVendor {\r\n  id: string;\r\n  name: string;\r\n  category?: string;\r\n  taxNumber?: string;\r\n}\r\n\r\ninterface ExpenseDialogProps {\r\n  open: boolean;\r\n  onOpenChange: (open: boolean) => void;\r\n  expense?: any;\r\n  onSave?: () => void;\r\n}\r\n\r\nexport function ExpenseDialog({ open, onOpenChange, expense, onSave }: ExpenseDialogProps) {\r\n  const isEditMode = !!expense;\r\n\r\n  // Form state\r\n  const [invoiceNo, setInvoiceNo] = useState('');\r\n  const [invoiceDate, setInvoiceDate] = useState('');\r\n  const [serviceDate, setServiceDate] = useState('');\r\n  const [category, setCategory] = useState('other');\r\n  const [description, setDescription] = useState('');\r\n  const [vendorId, setVendorId] = useState('');\r\n  const [supplierDdvNo, setSupplierDdvNo] = useState('');\r\n  const [grossAmount, setGrossAmount] = useState('');\r\n  const [ddvRate, setDdvRate] = useState('22');\r\n  const [ddvAmount, setDdvAmount] = useState('');\r\n  const [netAmount, setNetAmount] = useState('');\r\n  const [paymentStatus, setPaymentStatus] = useState('paid');\r\n  const [paymentMethod, setPaymentMethod] = useState('cash');\r\n  const [dueDate, setDueDate] = useState('');\r\n  const [notes, setNotes] = useState('');\r\n  const [saving, setSaving] = useState(false);\r\n\r\n  // Vendors from Firebase\r\n  const [vendors, setVendors] = useState<ExpenseVendor[]>([]);\r\n\r\n  // Load vendors from Firestore\r\n  useEffect(() => {\r\n    const unsubscribe = subscribeToFirestore('expense_vendors', (data) => {\r\n      if (data && data.length > 0) {\r\n        const vendorList = data.map((v: any) => ({\r\n          id: v.id,\r\n          name: v.name || '',\r\n          category: v.category,\r\n          taxNumber: v.taxNumber || v.ddvNumber,\r\n        })).filter((v: ExpenseVendor) => v.name);\r\n        vendorList.sort((a: ExpenseVendor, b: ExpenseVendor) => a.name.localeCompare(b.name));\r\n        setVendors(vendorList);\r\n      }\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  // Reset form when dialog opens\r\n  useEffect(() => {\r\n    if (open) {\r\n      if (expense) {\r\n        // Edit mode - load expense data\r\n        setInvoiceNo(expense.invoiceNo || expense.documentNo || '');\r\n        setInvoiceDate(expense.invoiceDate || expense.documentDate || '');\r\n        setServiceDate(expense.serviceDate || expense.invoiceDate || '');\r\n        setCategory(expense.category || 'other');\r\n        setDescription(expense.description || '');\r\n        setVendorId(expense.vendorId || expense.supplierId || '');\r\n        setSupplierDdvNo(expense.supplierDdvNo || '');\r\n        setGrossAmount(String(expense.grossAmount || expense.totalAmount || expense.amount || ''));\r\n        setDdvRate(String(expense.ddvRate || 22));\r\n        setDdvAmount(String(expense.ddvAmount || expense.vatAmount || ''));\r\n        setNetAmount(String(expense.netAmount || ''));\r\n        setPaymentStatus(expense.paymentStatus || 'paid');\r\n        setPaymentMethod(expense.paymentMethod || 'cash');\r\n        setDueDate(expense.dueDate || '');\r\n        setNotes(expense.notes || '');\r\n      } else {\r\n        // New expense - reset form\r\n        const today = new Date().toISOString().split('T')[0];\r\n        setInvoiceNo('');\r\n        setInvoiceDate(today);\r\n        setServiceDate(today);\r\n        setCategory('other');\r\n        setDescription('');\r\n        setVendorId('');\r\n        setSupplierDdvNo('');\r\n        setGrossAmount('');\r\n        setDdvRate('22');\r\n        setDdvAmount('');\r\n        setNetAmount('');\r\n        setPaymentStatus('paid');\r\n        setPaymentMethod('cash');\r\n        setDueDate('');\r\n        setNotes('');\r\n      }\r\n    }\r\n  }, [open, expense]);\r\n\r\n  // Auto-fill DDV number when vendor is selected\r\n  useEffect(() => {\r\n    if (vendorId) {\r\n      const vendor = vendors.find(v => v.id === vendorId);\r\n      if (vendor?.taxNumber) {\r\n        setSupplierDdvNo(vendor.taxNumber);\r\n      }\r\n    }\r\n  }, [vendorId, vendors]);\r\n\r\n  // Calculate DDV from gross (extract DDV)\r\n  const calculateFromGross = () => {\r\n    const gross = parseFloat(grossAmount) || 0;\r\n    const rate = parseFloat(ddvRate) || 0;\r\n    if (gross > 0) {\r\n      const net = gross / (1 + rate / 100);\r\n      const ddv = gross - net;\r\n      setNetAmount(net.toFixed(2));\r\n      setDdvAmount(ddv.toFixed(2));\r\n    }\r\n  };\r\n\r\n  // Calculate gross from net (add DDV)\r\n  const calculateFromNet = () => {\r\n    const net = parseFloat(netAmount) || 0;\r\n    const rate = parseFloat(ddvRate) || 0;\r\n    if (net > 0) {\r\n      const ddv = net * (rate / 100);\r\n      const gross = net + ddv;\r\n      setGrossAmount(gross.toFixed(2));\r\n      setDdvAmount(ddv.toFixed(2));\r\n    }\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    // Validation\r\n    if (!invoiceNo.trim()) {\r\n      alert('Lutfen fatura numarasi girin!');\r\n      return;\r\n    }\r\n    if (!description.trim()) {\r\n      alert('Lutfen aciklama girin!');\r\n      return;\r\n    }\r\n    if (!netAmount || parseFloat(netAmount) <= 0) {\r\n      alert('Lutfen gecerli bir tutar girin!');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    try {\r\n      const vendor = vendors.find(v => v.id === vendorId);\r\n\r\n      const expenseData = {\r\n        // Invoice info\r\n        invoiceNo: invoiceNo.trim(),\r\n        documentNo: invoiceNo.trim(),\r\n        invoiceDate,\r\n        documentDate: invoiceDate,\r\n        serviceDate: serviceDate || invoiceDate,\r\n\r\n        // Category & description\r\n        category,\r\n        description: description.trim(),\r\n\r\n        // Vendor info\r\n        vendorId: vendorId || null,\r\n        vendorName: vendor?.name || '',\r\n        vendor: vendor?.name || '',\r\n        supplierId: vendorId || null,\r\n        supplierName: vendor?.name || '',\r\n        supplierDdvNo: supplierDdvNo.trim(),\r\n\r\n        // Amounts\r\n        netAmount: parseFloat(netAmount) || 0,\r\n        amount: parseFloat(netAmount) || 0,\r\n        ddvRate: parseFloat(ddvRate) || 22,\r\n        ddvAmount: parseFloat(ddvAmount) || 0,\r\n        vatAmount: parseFloat(ddvAmount) || 0,\r\n        grossAmount: parseFloat(grossAmount) || 0,\r\n        totalAmount: parseFloat(grossAmount) || 0,\r\n\r\n        // Payment\r\n        paymentStatus,\r\n        paymentMethod: paymentStatus === 'paid' ? paymentMethod : null,\r\n        paidAmount: paymentStatus === 'paid' ? parseFloat(grossAmount) || 0 : 0,\r\n        remainingAmount: paymentStatus === 'paid' ? 0 : parseFloat(grossAmount) || 0,\r\n        status: paymentStatus === 'paid' ? 'paid' : 'pending',\r\n\r\n        // Due date\r\n        dueDate: paymentStatus === 'due' ? dueDate : null,\r\n\r\n        // Meta\r\n        notes: notes.trim(),\r\n        currency: 'EUR',\r\n        source_type: 'manual',\r\n        updatedAt: new Date().toISOString(),\r\n      };\r\n\r\n      if (isEditMode && expense?.id) {\r\n        // Update existing in Firestore\r\n        await updateFirestoreData('expenses', expense.id, expenseData);\r\n      } else {\r\n        // Create new in Firestore\r\n        const newExpenseData = {\r\n          ...expenseData,\r\n          date: invoiceDate,\r\n          isActive: true,\r\n        };\r\n        await addFirestoreData('expenses', newExpenseData);\r\n      }\r\n\r\n      onOpenChange(false);\r\n      onSave?.();\r\n    } catch (error) {\r\n      console.error('Save error:', error);\r\n      alert('Kaydetme hatasi: ' + (error as Error).message);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Dialog open={open} onOpenChange={onOpenChange}>\r\n      <DialogContent className=\"max-w-3xl max-h-[90vh] overflow-y-auto\">\r\n        <DialogHeader>\r\n          <DialogTitle className=\"text-xl font-semibold\">\r\n            {isEditMode ? 'Masraf Fisi Duzenle' : 'Yeni Masraf Fisi'}\r\n          </DialogTitle>\r\n        </DialogHeader>\r\n\r\n        <div className=\"grid gap-6 py-4\">\r\n          {/* Fatura Bilgileri */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-medium text-muted-foreground border-b pb-2\">\r\n              Fatura Bilgileri\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"invoiceNo\">Fatura No *</Label>\r\n                <Input\r\n                  id=\"invoiceNo\"\r\n                  value={invoiceNo}\r\n                  onChange={(e) => setInvoiceNo(e.target.value)}\r\n                  placeholder=\"Orn: 2024-12345\"\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"category\">Kategori *</Label>\r\n                <Select value={category} onValueChange={setCategory}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Kategori seçin\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {CATEGORIES.map((cat) => (\r\n                      <SelectItem key={cat.value} value={cat.value}>\r\n                        {cat.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"invoiceDate\">Fatura Tarihi *</Label>\r\n                <Input\r\n                  id=\"invoiceDate\"\r\n                  type=\"date\"\r\n                  value={invoiceDate}\r\n                  onChange={(e) => setInvoiceDate(e.target.value)}\r\n                />\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"serviceDate\">Hizmet Tarihi</Label>\r\n                <Input\r\n                  id=\"serviceDate\"\r\n                  type=\"date\"\r\n                  value={serviceDate}\r\n                  onChange={(e) => setServiceDate(e.target.value)}\r\n                />\r\n              </div>\r\n            </div>\r\n            <div className=\"space-y-2\">\r\n              <Label htmlFor=\"description\">Aciklama *</Label>\r\n              <Input\r\n                id=\"description\"\r\n                value={description}\r\n                onChange={(e) => setDescription(e.target.value)}\r\n                placeholder=\"Masraf aciklamasi...\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tedarikci Bilgileri */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-medium text-muted-foreground border-b pb-2\">\r\n              Tedarikci Bilgileri\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"vendor\">Masraf Carisi</Label>\r\n                <Select value={vendorId} onValueChange={setVendorId}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"- Cari Secin -\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    <SelectItem value=\"\">- Cari Secin -</SelectItem>\r\n                    {vendors.map((vendor) => (\r\n                      <SelectItem key={vendor.id} value={vendor.id}>\r\n                        {vendor.name}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"supplierDdvNo\">Tedarikci DDV No</Label>\r\n                <Input\r\n                  id=\"supplierDdvNo\"\r\n                  value={supplierDdvNo}\r\n                  onChange={(e) => setSupplierDdvNo(e.target.value)}\r\n                  placeholder=\"SI12345678\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Tutar ve DDV */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-medium text-muted-foreground border-b pb-2\">\r\n              Tutar ve DDV\r\n            </h3>\r\n\r\n            {/* Brut giris */}\r\n            <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"flex-1 space-y-2\">\r\n                  <Label htmlFor=\"grossAmount\" className=\"text-red-700\">\r\n                    Toplam (Brut)\r\n                  </Label>\r\n                  <Input\r\n                    id=\"grossAmount\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={grossAmount}\r\n                    onChange={(e) => setGrossAmount(e.target.value)}\r\n                    placeholder=\"0.00\"\r\n                    className=\"text-lg font-semibold\"\r\n                  />\r\n                </div>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={calculateFromGross}\r\n                  className=\"mt-6 bg-red-600 text-white hover:bg-red-700\"\r\n                >\r\n                  <Calculator className=\"h-4 w-4 mr-2\" />\r\n                  DDV Cikar\r\n                </Button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* DDV Orani */}\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"ddvRate\">DDV Orani</Label>\r\n                <Select value={ddvRate} onValueChange={setDdvRate}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"DDV Oranı seçin\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {DDV_RATES.map((rate) => (\r\n                      <SelectItem key={rate.value} value={String(rate.value)}>\r\n                        {rate.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"ddvAmount\">DDV Tutari</Label>\r\n                <Input\r\n                  id=\"ddvAmount\"\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  value={ddvAmount}\r\n                  readOnly\r\n                  className=\"bg-muted\"\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Net giris */}\r\n            <div className=\"p-4 bg-emerald-50 border border-emerald-200 rounded-lg\">\r\n              <div className=\"flex items-center gap-4\">\r\n                <div className=\"flex-1 space-y-2\">\r\n                  <Label htmlFor=\"netAmount\" className=\"text-emerald-700\">\r\n                    Net (DDV Haric)\r\n                  </Label>\r\n                  <Input\r\n                    id=\"netAmount\"\r\n                    type=\"number\"\r\n                    step=\"0.01\"\r\n                    value={netAmount}\r\n                    onChange={(e) => setNetAmount(e.target.value)}\r\n                    placeholder=\"0.00\"\r\n                    className=\"text-lg font-semibold\"\r\n                  />\r\n                </div>\r\n                <Button\r\n                  type=\"button\"\r\n                  variant=\"outline\"\r\n                  onClick={calculateFromNet}\r\n                  className=\"mt-6 bg-emerald-600 text-white hover:bg-emerald-700\"\r\n                >\r\n                  <Calculator className=\"h-4 w-4 mr-2\" />\r\n                  DDV Ekle\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Odeme Bilgileri */}\r\n          <div className=\"space-y-4\">\r\n            <h3 className=\"text-sm font-medium text-muted-foreground border-b pb-2\">\r\n              Odeme Bilgileri\r\n            </h3>\r\n            <div className=\"grid grid-cols-2 gap-4\">\r\n              <div className=\"space-y-2\">\r\n                <Label htmlFor=\"paymentStatus\">Odeme Durumu *</Label>\r\n                <Select value={paymentStatus} onValueChange={setPaymentStatus}>\r\n                  <SelectTrigger>\r\n                    <SelectValue placeholder=\"Ödeme durumu seçin\" />\r\n                  </SelectTrigger>\r\n                  <SelectContent>\r\n                    {PAYMENT_STATUSES.map((status) => (\r\n                      <SelectItem key={status.value} value={status.value}>\r\n                        {status.label}\r\n                      </SelectItem>\r\n                    ))}\r\n                  </SelectContent>\r\n                </Select>\r\n              </div>\r\n\r\n              {paymentStatus === 'paid' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"paymentMethod\">Odeme Yontemi *</Label>\r\n                  <Select value={paymentMethod} onValueChange={setPaymentMethod}>\r\n                    <SelectTrigger>\r\n                      <SelectValue placeholder=\"Ödeme yöntemi seçin\" />\r\n                    </SelectTrigger>\r\n                    <SelectContent>\r\n                      {PAYMENT_METHODS.map((method) => (\r\n                        <SelectItem key={method.value} value={method.value}>\r\n                          {method.label}\r\n                        </SelectItem>\r\n                      ))}\r\n                    </SelectContent>\r\n                  </Select>\r\n                </div>\r\n              )}\r\n\r\n              {paymentStatus === 'due' && (\r\n                <div className=\"space-y-2\">\r\n                  <Label htmlFor=\"dueDate\">Vade Tarihi</Label>\r\n                  <Input\r\n                    id=\"dueDate\"\r\n                    type=\"date\"\r\n                    value={dueDate}\r\n                    onChange={(e) => setDueDate(e.target.value)}\r\n                  />\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Notlar */}\r\n          <div className=\"space-y-2\">\r\n            <Label htmlFor=\"notes\">Notlar</Label>\r\n            <Textarea\r\n              id=\"notes\"\r\n              value={notes}\r\n              onChange={(e) => setNotes(e.target.value)}\r\n              placeholder=\"Ek notlar, detaylar, referanslar...\"\r\n              rows={3}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <DialogFooter>\r\n          <Button variant=\"outline\" onClick={() => onOpenChange(false)} disabled={saving}>\r\n            Iptal\r\n          </Button>\r\n          <Button onClick={handleSave} disabled={saving}>\r\n            {saving ? 'Kaydediliyor...' : 'Kaydet'}\r\n          </Button>\r\n        </DialogFooter>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,MAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAAA,EAAA,EAAA,CAAA,CAAA,OAaA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAQA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OCzBA,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAOA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAUA,IAAM,EAAY,CAChB,CAAE,MAAO,iBAAkB,MAAO,EAAG,EACrC,CAAE,MAAO,mBAAoB,MAAO,GAAI,EACxC,CAAE,MAAO,qBAAsB,MAAO,CAAE,EACxC,CAAE,MAAO,YAAa,MAAO,CAAE,EAChC,CAGK,EAAa,CACjB,CAAE,MAAO,cAAe,MAAO,UAAW,EAC1C,CAAE,MAAO,QAAS,MAAO,IAAK,EAC9B,CAAE,MAAO,MAAO,MAAO,UAAW,EAClC,CAAE,MAAO,OAAQ,MAAO,MAAO,EAC/B,CAAE,MAAO,WAAY,MAAO,kBAAmB,EAC/C,CAAE,MAAO,YAAa,MAAO,UAAW,EACxC,CAAE,MAAO,OAAQ,MAAO,OAAQ,EAChC,CAAE,MAAO,cAAe,MAAO,cAAe,EAC9C,CAAE,MAAO,YAAa,MAAO,SAAU,EACvC,CAAE,MAAO,YAAa,MAAO,SAAU,EACvC,CAAE,MAAO,aAAc,MAAO,aAAc,EAC5C,CAAE,MAAO,cAAe,MAAO,QAAS,EACxC,CAAE,MAAO,aAAc,MAAO,WAAY,EAC1C,CAAE,MAAO,WAAY,MAAO,UAAW,EACvC,CAAE,MAAO,OAAQ,MAAO,OAAQ,EAChC,CAAE,MAAO,SAAU,MAAO,SAAU,EACpC,CAAE,MAAO,YAAa,MAAO,kBAAmB,EAChD,CAAE,MAAO,QAAS,MAAO,OAAQ,EAClC,CAGK,EAAmB,CACvB,CAAE,MAAO,OAAQ,MAAO,QAAS,EACjC,CAAE,MAAO,UAAW,MAAO,UAAW,EACtC,CAAE,MAAO,MAAO,MAAO,QAAS,EACjC,CAGK,EAAkB,CACtB,CAAE,MAAO,OAAQ,MAAO,OAAQ,EAChC,CAAE,MAAO,OAAQ,MAAO,gBAAiB,EACzC,CAAE,MAAO,SAAU,MAAO,aAAc,EACxC,CAAE,MAAO,QAAS,MAAO,KAAM,EAChC,CAgBM,SAAS,EAAc,MAAE,CAAI,cAAE,CAAY,SAAE,CAAO,QAAE,CAAM,CAAsB,EACvF,IAAM,EAAa,CAAC,CAAC,EAGf,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,SACnC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACzC,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7C,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACzC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,MACjC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAW,EAAa,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACrC,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,QAC7C,CAAC,EAAe,EAAiB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,QAC7C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAC7B,CAAC,EAAQ,EAAU,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAG/B,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAA0B,EAAE,EAG1D,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,IAAM,EAAc,CAAA,EAAA,EAAA,oBAAA,AAAoB,EAAC,kBAAmB,AAAC,IAC3D,GAAI,GAAQ,EAAK,MAAM,CAAG,EAAG,CAC3B,IAAM,EAAa,EAAK,GAAG,CAAC,AAAC,IAAW,AAAC,CACvC,GAAI,EAAE,EAAE,CACR,KAAM,EAAE,IAAI,EAAI,GAChB,SAAU,EAAE,QAAQ,CACpB,UAAW,EAAE,SAAS,EAAI,EAAE,SAAS,CACvC,CAAC,EAAG,MAAM,CAAC,AAAC,GAAqB,EAAE,IAAI,EACvC,EAAW,IAAI,CAAC,CAAC,EAAkB,IAAqB,EAAE,IAAI,CAAC,aAAa,CAAC,EAAE,IAAI,GACnF,EAAW,EACb,CACF,GACA,MAAO,IAAM,GACf,EAAG,EAAE,EAGL,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,EACF,GAAI,CADI,CAGN,EAAa,EAAQ,GAFV,MAEmB,EAAI,EAAQ,UAAU,EAAI,IACxD,EAAe,EAAQ,WAAW,EAAI,EAAQ,YAAY,EAAI,IAC9D,EAAe,EAAQ,WAAW,EAAI,EAAQ,WAAW,EAAI,IAC7D,EAAY,EAAQ,QAAQ,EAAI,SAChC,EAAe,EAAQ,WAAW,EAAI,IACtC,EAAY,EAAQ,QAAQ,EAAI,EAAQ,UAAU,EAAI,IACtD,EAAiB,EAAQ,aAAa,EAAI,IAC1C,EAAe,OAAO,EAAQ,WAAW,EAAI,EAAQ,WAAW,EAAI,EAAQ,MAAM,EAAI,KACtF,EAAW,OAAO,EAAQ,OAAO,EAAI,KACrC,EAAa,OAAO,EAAQ,SAAS,EAAI,EAAQ,SAAS,EAAI,KAC9D,EAAa,OAAO,EAAQ,SAAS,EAAI,KACzC,EAAiB,EAAQ,aAAa,EAAI,QAC1C,EAAiB,EAAQ,aAAa,EAAI,QAC1C,EAAW,EAAQ,OAAO,EAAI,IAC9B,EAAS,EAAQ,KAAK,EAAI,QACrB,CAEL,IAAM,EAAQ,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,CACpD,EAAa,IACb,EAAe,GACf,EAAe,GACf,EAAY,SACZ,EAAe,IACf,EAAY,IACZ,EAAiB,IACjB,EAAe,IACf,EAAW,MACX,EAAa,IACb,EAAa,IACb,EAAiB,QACjB,EAAiB,QACjB,EAAW,IACX,EAAS,GACX,CAEJ,EAAG,CAAC,EAAM,EAAQ,EAGlB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,EAAU,CACZ,IAAM,EAAS,EAAQ,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,EACtC,IAAQ,WACV,AADqB,EACJ,EAAO,SAAS,CAErC,CACF,EAAG,CAAC,EAAU,EAAQ,EA0BtB,IAAM,EAAa,UAEjB,GAAI,CAAC,EAAU,IAAI,GAAI,YACrB,MAAM,iCAGR,GAAI,CAAC,EAAY,IAAI,GAAI,YACvB,MAAM,0BAGR,GAAI,CAAC,GAAa,AAAyB,cAAd,GAAiB,YAC5C,MAAM,mCAIR,GAAU,GACV,GAAI,CACF,IAAM,EAAS,EAAQ,IAAI,CAAC,GAAK,EAAE,EAAE,GAAK,GAEpC,EAAc,CAElB,UAAW,EAAU,IAAI,GACzB,WAAY,EAAU,IAAI,eAC1B,EACA,aAAc,EACd,YAAa,GAAe,WAG5B,EACA,YAAa,EAAY,IAAI,GAG7B,SAAU,GAAY,KACtB,WAAY,GAAQ,MAAQ,GAC5B,OAAQ,GAAQ,MAAQ,GACxB,WAAY,GAAY,KACxB,aAAc,GAAQ,MAAQ,GAC9B,cAAe,EAAc,IAAI,GAGjC,UAAW,WAAW,IAAc,EACpC,OAAQ,WAAW,IAAc,EACjC,QAAS,WAAW,IAAY,GAChC,UAAW,WAAW,IAAc,EACpC,UAAW,WAAW,IAAc,EACpC,YAAa,WAAW,IAAgB,EACxC,YAAa,WAAW,IAAgB,gBAGxC,EACA,cAAiC,SAAlB,EAA2B,EAAgB,KAC1D,WAA8B,SAAlB,GAA2B,WAAW,IAAgB,EAClE,EADsE,cACnC,SAAlB,EAA2B,EAAI,WAAW,IAAgB,EAC3E,OAA0B,SAAlB,EAA2B,OAAS,UAG5C,QAAS,AAAkB,UAAQ,EAAU,KAG7C,MAAO,EAAM,IAAI,GACjB,SAAU,MACV,YAAa,SACb,UAAW,IAAI,OAAO,WAAW,EACnC,EAEA,GAAI,GAAc,GAAS,GAEzB,CAF6B,KAEvB,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,WAAY,EAAQ,EAAE,CAAE,OAC7C,CAEL,IAAM,EAAiB,CACrB,GAAG,CAAW,CACd,KAAM,EACN,UAAU,CACZ,CACA,OAAM,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,WAAY,EACrC,CAEA,GAAa,GACb,KACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,cAAe,GAC7B,MAAM,oBAAuB,EAAgB,OAAO,CACtD,QAAU,CACR,GAAU,EACZ,CACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAM,EAAM,aAAc,WAChC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,CAAC,UAAU,mDACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,UACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,iCACpB,EAAa,sBAAwB,uBAI1C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4BAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEAA0D,qBAGxE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,qBAAY,gBAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,YACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,uBAGhB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,oBAAW,eAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAU,cAAe,YACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,qBAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACX,EAAW,GAAG,CAAC,AAAC,GACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAiB,MAAO,EAAI,KAAK,UACzC,EAAI,KAAK,EADK,EAAI,KAAK,WAOlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,oBAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,OAGlD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,kBAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,UAIpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,uBAAc,eAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,YAAY,+BAMlB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEAA0D,wBAGxE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,kBAAS,kBACxB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAU,cAAe,YACtC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,qBAE3B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,aAAa,CAAA,WACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,MAAM,YAAG,mBACpB,EAAQ,GAAG,CAAC,AAAC,GACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAiB,MAAO,EAAO,EAAE,UACzC,EAAO,IAAI,EADG,EAAO,EAAE,YAOlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,yBAAgB,qBAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,gBACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAiB,EAAE,MAAM,CAAC,KAAK,EAChD,YAAY,wBAOpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEAA0D,iBAKxE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0DACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,cAAc,UAAU,wBAAe,kBAGtD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,cACH,KAAK,SACL,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,YAAY,OACZ,UAAU,6BAGd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,UACR,QAjPW,CAiPF,IAhPvB,IAAM,EAAQ,WAAW,IAAgB,EACnC,EAAO,WAAW,IAAY,EACpC,GAAI,EAAQ,EAAG,CACb,IAAM,EAAM,GAAS,EAAI,EAAO,CAAZ,EAAY,CAAG,CAC7B,EAAM,EAAQ,EACpB,EAAa,EAAI,OAAO,CAAC,IACzB,EAAa,EAAI,OAAO,CAAC,GAC3B,CACF,EAyOgB,UAAU,wDAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBAAiB,oBAO7C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBAAU,cACzB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAS,cAAe,YACrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,sBAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACX,EAAU,GAAG,CAAC,AAAC,GACd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAkB,MAAO,OAAO,EAAK,KAAK,WAClD,EAAK,KAAK,EADI,EAAK,KAAK,WAOnC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,qBAAY,eAC3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,YACH,KAAK,SACL,KAAK,OACL,MAAO,EACP,QAAQ,CAAA,CAAA,EACR,UAAU,mBAMhB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,YAAY,UAAU,4BAAmB,oBAGxD,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,YACH,KAAK,SACL,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAa,EAAE,MAAM,CAAC,KAAK,EAC5C,YAAY,OACZ,UAAU,6BAGd,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CACL,KAAK,SACL,QAAQ,UACR,QAhSS,CAgSA,IA/RvB,IAAM,EAAM,WAAW,IAAc,EAC/B,EAAO,WAAW,IAAY,EACpC,GAAI,EAAM,EAAG,CACX,IAAM,EAAa,EAAO,GAAG,CAAjB,EAEZ,EAAe,CADD,CADI,CACE,CAAA,EACC,OAAO,CAAC,IAC7B,EAAa,EAAI,OAAO,CAAC,GAC3B,CACF,EAwRgB,UAAU,gEAEV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,iBAAiB,sBAQ/C,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,mEAA0D,oBAGxE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,yBAAgB,mBAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAe,cAAe,YAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,yBAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACX,EAAiB,GAAG,CAAC,AAAC,GACrB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAoB,MAAO,EAAO,KAAK,UAC/C,EAAO,KAAK,EADE,EAAO,KAAK,WAQlB,SAAlB,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,yBAAgB,oBAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,MAAO,EAAe,cAAe,YAC3C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,YAAY,0BAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,aAAa,CAAA,UACX,EAAgB,GAAG,CAAE,AAAD,GACnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAoB,MAAO,EAAO,KAAK,UAC/C,EAAO,KAAK,EADE,EAAO,KAAK,WASpB,QAAlB,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,mBAAU,gBACzB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,GAAG,UACH,KAAK,OACL,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,aAQpD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CAAC,QAAQ,iBAAQ,WACvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CACP,GAAG,QACH,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAY,sCACZ,KAAM,UAKZ,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,YAAY,CAAA,WACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,QAAS,IAAM,GAAa,GAAQ,SAAU,WAAQ,UAGhF,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAS,EAAY,SAAU,WACpC,EAAS,kBAAoB,kBAM1C,CDzfA,IAAM,EAAyC,CAC7C,KAAM,QACN,YAAa,eACb,UAAW,UACX,KAAM,OACN,UAAW,YACX,SAAU,UACV,MAAO,OACT,EAEM,EAAiE,CACrE,QAAS,CAAE,MAAO,YAAa,MAAO,+BAAgC,EACtE,SAAU,CAAE,MAAO,YAAa,MAAO,iCAAkC,EACzE,SAAU,CAAE,MAAO,aAAc,MAAO,yBAA0B,EAClE,KAAM,CAAE,MAAO,SAAU,MAAO,2BAA4B,CAC9D,EAEe,SAAS,IACtB,GAAM,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAY,EAAE,EAChD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACjC,CAAC,EAAa,EAAe,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,EAAS,IACzC,CAAC,EAAkB,EAAoB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,OACnD,CAAC,EAAY,EAAc,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GACvC,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAiB,MAErE,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KAER,IAAM,EAAc,CAAA,EAAA,EAAA,oBAAA,AAAoB,EACtC,WACA,AAAC,IASC,EAPuB,EACpB,MAAM,CAAC,AAAC,CAMC,GAN6B,IAAf,EAAE,QAAQ,EACjC,IAAI,CAAC,CAAC,EAAY,KACjB,IAAM,EAAQ,EAAE,YAAY,EAAI,EAAE,IAAI,EAAI,GAE1C,MAAO,CADO,EAAE,YAAY,EAAI,EAAE,IAAI,EAAI,EAAA,EAC7B,aAAa,CAAC,EAC7B,IAEF,GAAW,EACb,EACA,CACE,WAAY,WACZ,QAAS,KACT,YAAY,CACd,GAGF,MAAO,IAAM,GACf,EAAG,EAAE,EAEL,IAAM,EAAmB,EAAS,MAAM,CAAC,AAAC,IACxC,IAAM,EAAa,EAAQ,UAAU,EAAI,EAAQ,MAAM,EAAI,GACrD,EAAW,EAAQ,WAAW,EAAI,EAAQ,KAAK,EAAI,GACnD,EACJ,EAAW,WAAW,GAAG,QAAQ,CAAC,EAAY,WAAW,KACzD,EAAS,WAAW,GAAG,QAAQ,CAAC,EAAY,WAAW,IACnD,EACiB,QAArB,GAA8B,EAAQ,QAAQ,GAAK,EACrD,OAAO,GAAiB,CAC1B,GAEM,EAAQ,CACZ,MAAO,EAAS,MAAM,CACtB,YAAa,EAAS,MAAM,CAAC,CAAC,EAAK,IAAM,EAAO,GAAE,CAAH,UAAc,EAAI,EAAE,WAAW,GAAI,CAAC,CAAG,GACtF,QAAS,EAAS,MAAM,CAAC,AAAC,GAAM,AAAkC,aAAjC,EAAE,aAAa,EAAI,EAAE,MAAA,AAAM,GAAiB,MAAM,CACnF,UAAW,EAAS,MAAM,CAAC,AAAC,IAC1B,IAAM,EAAU,EAAE,YAAY,EAAI,EAAE,IAAI,EAAI,GAC5C,GAAI,CAAC,EAAS,OAAO,EACrB,IAAM,EAAc,IAAI,KAAK,GACvB,EAAM,IAAI,KAChB,OAAO,EAAY,QAAQ,KAAO,EAAI,QAAQ,IAAM,EAAY,WAAW,KAAO,EAAI,WAAW,EACnG,GAAG,MACL,AADW,EAQL,EAAqB,AAAD,IACxB,EAAkB,GAClB,GAAc,EAChB,EAEM,EAAsB,MAAO,IACjC,IAAM,EAAc,EAAQ,WAAW,EAAI,EAAQ,UAAU,EAAI,EAAQ,MAAM,EAAI,YACnF,GAAI,QAAQ,CAAC,CAAC,EAAE,EAAY,6CAA6C,CAAC,EACxE,CAD2E,EACvE,CACF,MAAM,CAAA,EAAA,EAAA,mBAAA,AAAmB,EAAC,WAAY,EAAQ,EAAE,CAClD,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,gBAAiB,GAC/B,MAAM,iBAAoB,EAAgB,OAAO,CACnD,CAEJ,SAEA,AAAI,EAEA,CAAA,EAAA,EAAA,EAFS,EAET,EAAC,MAAA,CAAI,UAAU,kDACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,sCACnB,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,sCAA6B,qBAMjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8CACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,6CAAoC,mBAClD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,gCAIvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,QAAQ,UAAU,KAAK,eAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,iBAAiB,WAGvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,MAAM,CAAA,CAAC,KAAK,KAAK,QA9CD,CA8CU,IA7CjC,EAAkB,MAClB,GAAc,EAChB,YA4CU,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,iBAAiB,uBAOvC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sCACb,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,kBAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,qCAErB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,EAAM,KAAK,QAGpD,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,iBAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qCAEvB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACZ,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,EAAM,WAAW,SAIvC,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,aAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0CAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8CAAsC,EAAM,OAAO,QAGtE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,IAAI,CAAA,WACH,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,4DACpB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qDAA4C,UAGjE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,CAAC,UAAU,qCAEtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8BAAsB,EAAM,SAAS,WAM1D,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,8EACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8BACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,2EAClB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,KAAK,CAAA,CACJ,KAAK,SACL,YAAY,4BACZ,MAAO,EACP,SAAU,AAAC,GAAM,EAAe,EAAE,MAAM,CAAC,KAAK,EAC9C,UAAU,YAGd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAA8B,QAArB,EAA6B,UAAY,UAClD,KAAK,KACL,QAAS,IAAM,EAAoB,gBACpC,SAGA,OAAO,OAAO,CAAC,GAAgB,GAAG,CAAC,CAAC,CAAC,EAAK,EAAM,GAC/C,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAEL,QAAS,IAAqB,EAAM,UAAY,UAChD,KAAK,KACL,QAAS,IAAM,EAAoB,GACnC,UAAU,6BAET,GANI,gBAgBnB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,UACH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,CAAC,UAAU,gBACrB,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,KAAK,CAAA,WACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,WAAW,CAAA,UACV,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,UACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,mBACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,aACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,aACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sBAAa,UAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sBAAa,QAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sBAAa,WAClC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAC,UACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,qBAAY,eAGrC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACqB,IAA5B,EAAiB,MAAM,CACtB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,QAAQ,CAAA,UACP,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,SAAS,CAAA,CAAC,QAAS,EAAG,UAAU,8BAC/B,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAC,UAAU,iDACnB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,+BAAsB,sBACpC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,iCAAwB,+EAMzC,EAAiB,GAAG,CAAC,AAAC,IACpB,IAAM,EAAc,EAAQ,YAAY,EAAI,EAAQ,IAAI,EAAI,GACtD,EAAgB,EAAQ,UAAU,EAAI,EAAQ,MAAM,EAAI,IACxD,EAAkB,EAAQ,YAAY,EAAI,CAAc,CAAC,EAAQ,QAAQ,CAAC,EAAI,EAAQ,QAAQ,EAAI,IAClG,EAAc,EAAQ,WAAW,EAAI,EAAQ,KAAK,EAAI,IACtD,EAAY,EAAQ,SAAS,EAAI,EAAQ,MAAM,EAAI,EACnD,EAAY,EAAQ,SAAS,EAAI,EAAQ,SAAS,EAAI,EACtD,EAAc,EAAQ,WAAW,EAAI,EAAQ,WAAW,EAAI,EAC5D,EAAS,EAAQ,aAAa,EAAI,EAAQ,MAAM,EAAI,UAE1D,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,EAAA,QAAQ,CAAA,WACP,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,uBAClB,CAAA,EAAA,EAAA,UAAA,AAAU,EAAC,KAEd,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,IACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UAAE,IACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,kCAClB,IAEH,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,gCAClB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,sDAClB,CAAA,EAAA,EAAA,cAAA,AAAc,EAAC,KAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,CAAC,UAAU,4CAClB,CAAA,EAAA,EAAA,cAAc,AAAd,EAAe,KAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAW,CAAC,oEAAoE,EAC9E,CAAY,CAAC,EAAO,EAAE,OAAS,4BAAA,CAC/B,UAED,CAAY,CAAC,EAAO,EAAE,OAAS,MAGpC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,SAAS,CAAA,UACR,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,oCACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,QACR,KAAK,OACL,UAAU,UACV,QAAS,IAAM,EAAkB,YAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,GAAG,CAAA,CAAC,UAAU,cAEjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,QACR,KAAK,OACL,UAAU,UACV,QAAS,IAAM,EAAkB,YAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,IAAI,CAAA,CAAC,UAAU,cAElB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CACL,QAAQ,QACR,KAAK,OACL,UAAU,2BACV,QAAS,IAAM,EAAoB,YAEnC,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,MAAM,CAAA,CAAC,UAAU,qBAnDX,EAAQ,EAAE,CAyD7B,YAQV,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CACC,KAAM,EACN,aAAc,EACd,QAAS,MAIjB"}