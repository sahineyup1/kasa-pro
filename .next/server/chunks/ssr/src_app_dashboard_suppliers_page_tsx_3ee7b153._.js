module.exports=[45811,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(80701),g=a.i(6015),h=a.i(35732),i=a.i(29258),j=a.i(70430),k=a.i(29246),l=a.i(15055),m=a.i(14574),n=a.i(75083),o=a.i(96221);let p=(0,a.i(70106).default)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var q=a.i(62722),r=a.i(44494);let s=[{code:"SI",label:"Slovenya (SI)"},{code:"AT",label:"Avusturya (AT)"},{code:"DE",label:"Almanya (DE)"},{code:"IT",label:"Italya (IT)"},{code:"HR",label:"Hirvatistan (HR)"},{code:"HU",label:"Macaristan (HU)"},{code:"CZ",label:"Cek Cumhuriyeti (CZ)"},{code:"PL",label:"Polonya (PL)"},{code:"FR",label:"Fransa (FR)"},{code:"NL",label:"Hollanda (NL)"},{code:"BE",label:"Belcika (BE)"}],t=[{value:"wholesaler",label:"Toptanci"},{value:"manufacturer",label:"Uretici"},{value:"distributor",label:"Distributor"}],u=["EUR","USD","GBP","TRY"],v=["0","5","9.5","22"];function w(a,b,c,d){if(!a)return d;let e=a;for(let a of b)if(e&&"object"==typeof e&&a in e)e=e[a];else{e=void 0;break}if(null!=e)return e;let f=a[c];return null!=f?f:d}function x({open:a,onOpenChange:g,supplier:h,onSave:x}){let y=!!h,[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)("SI"),[L,M]=(0,c.useState)("wholesaler"),[N,O]=(0,c.useState)(!0),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(""),[T,U]=(0,c.useState)(!1),[V,W]=(0,c.useState)(""),[X,Y]=(0,c.useState)(""),[Z,$]=(0,c.useState)(""),[_,aa]=(0,c.useState)(""),[ab,ac]=(0,c.useState)(""),[ad,ae]=(0,c.useState)(""),[af,ag]=(0,c.useState)(""),[ah,ai]=(0,c.useState)("30"),[aj,ak]=(0,c.useState)("EUR"),[al,am]=(0,c.useState)(""),[an,ao]=(0,c.useState)(""),[ap,aq]=(0,c.useState)("9.5"),[ar,as]=(0,c.useState)(!1),[at,au]=(0,c.useState)(""),[av,aw]=(0,c.useState)(""),[ax,ay]=(0,c.useState)(""),[az,aA]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&(h?(G(w(h,["basic","name"],"name","")),I(w(h,["basic","shortName"],"shortName","")),K(w(h,["basic","country"],"country","SI")),M(w(h,["basic","type"],"type","wholesaler")),O(w(h,["basic","isActive"],"isActive",!0)),Q(w(h,["basic","categories"],"categories",[]).join(", ")),S(w(h,["tax","taxId"],"taxId","")),U(w(h,["tax","reverseCharge"],"reverseCharge",!1)),W(w(h,["contact","address","street"],"street","")),Y(w(h,["contact","address","city"],"city","")),$(w(h,["contact","address","postalCode"],"postalCode","")),aa(w(h,["contact","phone"],"phone","")),ac(w(h,["contact","email"],"email","")),ae(w(h,["contact","contactPerson","name"],"contactPersonName","")),ag(w(h,["contact","contactPerson","phone"],"contactPersonPhone","")),ai(String(w(h,["payment","paymentTermDays"],"paymentTermDays",30))),ak(w(h,["payment","currency"],"currency","EUR")),am(w(h,["payment","bankDetails","bankName"],"bankName","")),ao(w(h,["payment","bankDetails","iban"],"iban","")),aq(String(w(h,["tax","defaultVatRate"],"defaultVatRate",9.5))),as(w(h,["shipping","transportIncluded"],"transportIncluded",!1)),au(String(w(h,["shipping","transportFee"],"transportFee",0)||"")),aw(String(w(h,["shipping","minOrderAmount"],"minOrderAmount",0)||"")),ay(w(h,["settings","notes"],"notes","")),A(w(h,["tax","taxId"],"taxId","")),w(h,["tax","vies_validated"],"vies_validated",!1)&&E({valid:!0,message:"Onceden dogrulanmis",companyName:w(h,["tax","vies_company_name"],"vies_company_name",void 0)})):(G(""),I(""),K("SI"),M("wholesaler"),O(!0),Q(""),S(""),U(!1),W(""),Y(""),$(""),aa(""),ac(""),ae(""),ag(""),ai("30"),ak("EUR"),am(""),ao(""),aq("9.5"),as(!1),au(""),aw(""),ay(""),A(""),E(null)))},[a,h]);let aB=async()=>{if(z.trim()){C(!0),E(null);try{await new Promise(a=>setTimeout(a,1500));let a=z.replace(/\s/g,"").toUpperCase();if(!/^[A-Z]{2}[0-9A-Z]{8,12}$/.test(a))return void E({valid:!1,message:"Gecersiz VAT numarasi formati. Ornek: SI12345678"});let b=a.substring(0,2),c={SI:"Primer d.o.o.",AT:"Muster GmbH",DE:"Beispiel AG",IT:"Esempio S.r.l.",HR:"Primjer d.o.o."},d={SI:"Slovenska cesta 123, 1000 Ljubljana",AT:"Hauptstrasse 456, 1010 Wien",DE:"Musterweg 789, 10115 Berlin",IT:"Via Esempio 321, 00100 Roma",HR:"Ulica Primjer 654, 10000 Zagreb"};if(E({valid:!0,message:"VAT numarasi dogrulandi",companyName:c[b]||"Test Company",companyAddress:d[b]||"Test Address"}),c[b]&&(G(c[b]),I(c[b].substring(0,30))),s.find(a=>a.code===b)&&K(b),d[b]){let a=d[b].split(", ");if(a.length>=1&&W(a[0]),a.length>=2){let b=a[1],c=b.match(/^(\d+)\s+(.+)$/);c?($(c[1]),Y(c[2])):Y(b)}}S(a),"SI"!==b&&U(!0)}catch(a){E({valid:!1,message:"VIES servisi hata verdi: "+a.message})}finally{C(!1)}}},aC=async()=>{if(!F.trim())return void alert("Lutfen tedarikci adi girin!");if(ab&&!ab.includes("@"))return void alert("Gecersiz email adresi!");aA(!0);try{let a={basic:{name:F.trim(),shortName:H.trim()||F.trim().substring(0,30),country:J,type:L,isActive:N,categories:P.split(",").map(a=>a.trim()).filter(Boolean)},contact:{address:{street:V.trim(),city:X.trim(),postalCode:Z.trim()},phone:_.trim(),email:ab.trim(),contactPerson:{name:ad.trim(),phone:af.trim()}},payment:{paymentTermDays:parseInt(ah)||30,currency:aj,bankDetails:{bankName:al.trim(),iban:an.trim()}},tax:{taxId:R.trim(),reverseCharge:T,defaultVatRate:parseFloat(ap)||9.5,...D?.valid&&{vies_validated:!0,vies_validation_date:new Date().toISOString(),vies_company_name:D.companyName}},shipping:{transportIncluded:ar,transportFee:parseFloat(at)||0,minOrderAmount:parseFloat(av)||0},settings:{notes:ax.trim()},updatedAt:new Date().toISOString()};y&&h?.id?await (0,i.updateFirestoreData)("suppliers",h.id,a):await (0,i.addFirestoreData)("suppliers",{...a,createdAt:new Date().toISOString()}),g(!1),x?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{aA(!1)}};return(0,b.jsx)(m.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(m.DialogContent,{className:"max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)(m.DialogHeader,{className:"border-b pb-4",children:[(0,b.jsx)(m.DialogTitle,{className:"text-xl font-semibold",children:y?"Tedarikci Duzenle":"Yeni Tedarikci"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:y?"Tedarikci bilgilerini guncelleyin":"Yeni tedarikci eklemek icin formu doldurun"})]}),(0,b.jsxs)("div",{className:"flex-1 overflow-y-auto py-4",children:[(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)(r.Globe,{className:"h-5 w-5 text-blue-600"}),(0,b.jsx)("h3",{className:"font-semibold text-blue-900",children:"AB VAT Numarasi Dogrulama"})]}),(0,b.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"Sirket bilgilerini otomatik doldurmak icin AB VAT numarasi ile baslayin"}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsx)(e.Input,{placeholder:"Orn: SI12345678, ATU12345678, DE123456789",value:z,onChange:a=>A(a.target.value.toUpperCase())})}),(0,b.jsx)(d.Button,{onClick:aB,disabled:B||!z.trim(),className:"min-w-[160px]",children:B?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Dogrulaniyor..."]}):"VIES ile Dogrula"})]}),D&&(0,b.jsxs)("div",{className:`mt-3 p-3 rounded-lg flex items-start gap-2 ${D.valid?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[D.valid?(0,b.jsx)(p,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}):(0,b.jsx)(q.XCircle,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:D.message}),D.companyName&&(0,b.jsxs)("p",{className:"text-sm mt-1",children:["Sirket: ",D.companyName]}),D.companyAddress&&(0,b.jsxs)("p",{className:"text-sm",children:["Adres: ",D.companyAddress]})]})]})]}),(0,b.jsxs)(n.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,b.jsxs)(n.TabsList,{className:"grid w-full grid-cols-5 mb-4",children:[(0,b.jsx)(n.TabsTrigger,{value:"basic",children:"Temel Bilgiler"}),(0,b.jsx)(n.TabsTrigger,{value:"contact",children:"Iletisim"}),(0,b.jsx)(n.TabsTrigger,{value:"payment",children:"Odeme & Finans"}),(0,b.jsx)(n.TabsTrigger,{value:"shipping",children:"Nakliye"}),(0,b.jsx)(n.TabsTrigger,{value:"settings",children:"Ayarlar"})]}),(0,b.jsxs)(n.TabsContent,{value:"basic",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"name",children:"Tedarikci Adi *"}),(0,b.jsx)(e.Input,{id:"name",value:F,onChange:a=>G(a.target.value),placeholder:"Orn: ABC Trading GmbH"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"shortName",children:"Kisa Isim"}),(0,b.jsx)(e.Input,{id:"shortName",value:H,onChange:a=>I(a.target.value),placeholder:"Orn: ABC"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"country",children:"Ulke *"}),(0,b.jsxs)(f.Select,{value:J,onValueChange:K,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{placeholder:"Ulke secin"})}),(0,b.jsx)(f.SelectContent,{children:s.map(a=>(0,b.jsx)(f.SelectItem,{value:a.code,children:a.label},a.code))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"type",children:"Tip"}),(0,b.jsxs)(f.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{placeholder:"Tip secin"})}),(0,b.jsx)(f.SelectContent,{children:t.map(a=>(0,b.jsx)(f.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"taxId",children:"VAT/Vergi Numarasi"}),(0,b.jsx)(e.Input,{id:"taxId",value:R,onChange:a=>S(a.target.value.toUpperCase()),placeholder:"Orn: SI12345678"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"categories",children:"Kategoriler"}),(0,b.jsx)(e.Input,{id:"categories",value:P,onChange:a=>Q(a.target.value),placeholder:"Orn: Et, Tavuk, Sakatatlar (virgul ile)"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-6 pt-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"isActive",checked:N,onCheckedChange:a=>O(a)}),(0,b.jsx)(j.Label,{htmlFor:"isActive",className:"font-normal",children:"Aktif Tedarikci"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"reverseCharge",checked:T,onCheckedChange:a=>U(a)}),(0,b.jsx)(j.Label,{htmlFor:"reverseCharge",className:"font-normal",children:"Reverse Charge (AB Tedarikcisi)"})]})]})]}),(0,b.jsxs)(n.TabsContent,{value:"contact",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Adres Bilgileri"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"street",children:"Cadde/Sokak"}),(0,b.jsx)(e.Input,{id:"street",value:V,onChange:a=>W(a.target.value),placeholder:"Orn: Hauptstrasse 123"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"city",children:"Sehir"}),(0,b.jsx)(e.Input,{id:"city",value:X,onChange:a=>Y(a.target.value),placeholder:"Orn: Ljubljana"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"postalCode",children:"Posta Kodu"}),(0,b.jsx)(e.Input,{id:"postalCode",value:Z,onChange:a=>$(a.target.value),placeholder:"Orn: 1000"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Iletisim Bilgileri"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"phone",children:"Telefon"}),(0,b.jsx)(e.Input,{id:"phone",value:_,onChange:a=>aa(a.target.value),placeholder:"Orn: +386 1 234 5678"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(e.Input,{id:"email",type:"email",value:ab,onChange:a=>ac(a.target.value),placeholder:"Orn: info@tedarikci.com"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"contactPerson",children:"Irtibat Kisisi"}),(0,b.jsx)(e.Input,{id:"contactPerson",value:ad,onChange:a=>ae(a.target.value),placeholder:"Orn: Ahmet Yilmaz"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"contactPhone",children:"Irtibat Telefonu"}),(0,b.jsx)(e.Input,{id:"contactPhone",value:af,onChange:a=>ag(a.target.value),placeholder:"Orn: +386 40 123 456"})]})]})]})]}),(0,b.jsxs)(n.TabsContent,{value:"payment",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Odeme Bilgileri"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"paymentTermDays",children:"Odeme Vadesi (gun)"}),(0,b.jsx)(e.Input,{id:"paymentTermDays",type:"number",value:ah,onChange:a=>ai(a.target.value),min:"0",max:"365"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"currency",children:"Para Birimi"}),(0,b.jsxs)(f.Select,{value:aj,onValueChange:ak,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{placeholder:"Para birimi secin"})}),(0,b.jsx)(f.SelectContent,{children:u.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"bankName",children:"Banka Adi"}),(0,b.jsx)(e.Input,{id:"bankName",value:al,onChange:a=>am(a.target.value),placeholder:"Orn: Nova KBM"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"iban",children:"IBAN"}),(0,b.jsx)(e.Input,{id:"iban",value:an,onChange:a=>ao(a.target.value),placeholder:"Orn: SI56 0110 0100 0123 456"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"vatRate",children:"Varsayilan KDV Orani (%)"}),(0,b.jsxs)(f.Select,{value:ap,onValueChange:aq,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"KDV orani secin"})}),(0,b.jsx)(f.SelectContent,{children:v.map(a=>(0,b.jsxs)(f.SelectItem,{value:a,children:["%",a]},a))})]})]})]}),y&&h?.payment?.currentBalance!==void 0&&(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mt-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-700 mb-2",children:"Bakiye Durumu"}),(0,b.jsx)("p",{className:`text-2xl font-bold ${(h.payment.currentBalance||0)>0?"text-red-600":0>(h.payment.currentBalance||0)?"text-green-600":""}`,children:(h.payment.currentBalance||0).toLocaleString("tr-TR",{style:"currency",currency:aj})})]})]}),(0,b.jsx)(n.TabsContent,{value:"shipping",className:"space-y-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Nakliye Bilgileri"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"transportIncluded",checked:ar,onCheckedChange:a=>as(a)}),(0,b.jsx)(j.Label,{htmlFor:"transportIncluded",className:"font-normal",children:"Nakliye Ucreti Dahil"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"transportFee",children:"Nakliye Ucreti (EUR)"}),(0,b.jsx)(e.Input,{id:"transportFee",type:"number",step:"0.01",value:at,onChange:a=>au(a.target.value),disabled:ar,placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"minOrderAmount",children:"Minimum Siparis (EUR)"}),(0,b.jsx)(e.Input,{id:"minOrderAmount",type:"number",step:"0.01",value:av,onChange:a=>aw(a.target.value),placeholder:"0.00"})]})]})]})}),(0,b.jsx)(n.TabsContent,{value:"settings",className:"space-y-4",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-700 border-b pb-2",children:"Diger Ayarlar"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"notes",children:"Notlar"}),(0,b.jsx)(k.Textarea,{id:"notes",value:ax,onChange:a=>ay(a.target.value),placeholder:"Tedarikci hakkinda notlar...",rows:5})]})]})})]})]}),(0,b.jsxs)("div",{className:"border-t pt-4 flex justify-end gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),disabled:az,children:"Iptal"}),(0,b.jsx)(d.Button,{onClick:aC,disabled:az,children:az?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):"Tedarikciyi Kaydet"})]})]})})}var y=a.i(15618),z=a.i(69520),A=a.i(17755),B=a.i(99464),C=a.i(81560),D=a.i(77156),E=a.i(87532),F=a.i(67900);function G({isActive:a}){return(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${a?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:a?"Aktif":"Pasif"})}let H={SI:"ðŸ‡¸ðŸ‡®",AT:"ðŸ‡¦ðŸ‡¹",DE:"ðŸ‡©ðŸ‡ª",IT:"ðŸ‡®ðŸ‡¹",HR:"ðŸ‡­ðŸ‡·",HU:"ðŸ‡­ðŸ‡º",CZ:"ðŸ‡¨ðŸ‡¿",PL:"ðŸ‡µðŸ‡±",FR:"ðŸ‡«ðŸ‡·",NL:"ðŸ‡³ðŸ‡±",BE:"ðŸ‡§ðŸ‡ª"};function I(a,b,c,d){let e=a;for(let a of b)if(e&&"object"==typeof e&&a in e)e=e[a];else{e=void 0;break}if(null!=e)return e;let f=a[c];return null!=f?f:d}function J(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)("all"),[q,s]=(0,c.useState)("all"),[t,u]=(0,c.useState)("all"),[v,w]=(0,c.useState)(!1),[J,K]=(0,c.useState)(null);(0,c.useEffect)(()=>{l(!0);let a=(0,i.subscribeToRTDB)("partners",a=>{j(a||[]),l(!1)});return()=>a()},[]);let L=(0,c.useMemo)(()=>a.filter(a=>{let b=I(a,["basic","name"],"name",""),c=I(a,["contact","email"],"email",""),d=I(a,["contact","phone"],"phone",""),e=I(a,["tax","taxId"],"taxId",""),f=m.toLowerCase(),g=!m||b.toLowerCase().includes(f)||c.toLowerCase().includes(f)||d.toLowerCase().includes(f)||e.toLowerCase().includes(f),h=I(a,["basic","isActive"],"isActive",!0),i="all"===o||"active"===o&&h||"inactive"===o&&!h,j=I(a,["basic","country"],"country",""),k="all"===q||j===q,l=I(a,["basic","categories"],"categories",[]),n="all"===t||l.some(a=>a.toLowerCase()===t.toLowerCase());return g&&i&&k&&n}),[a,m,o,q,t]),M=(0,c.useMemo)(()=>{let b=a.length;return{total:b,active:a.filter(a=>I(a,["basic","isActive"],"isActive",!0)).length,totalBalance:a.reduce((a,b)=>a+I(b,["payment","currentBalance"],"currentBalance",0),0)}},[a]),N=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{let c=I(a,["basic","country"],"country","");c&&b.add(c)}),Array.from(b).sort()},[a]),O=(0,c.useMemo)(()=>{let b=new Set;return a.forEach(a=>{I(a,["basic","categories"],"categories",[]).forEach(a=>b.add(a))}),Array.from(b).sort()},[a]),P=async a=>{try{let b=!I(a,["basic","isActive"],"isActive",!0);a.basic?await (0,i.updateData)(`partners/${a.id}/basic`,{isActive:b}):await (0,i.updateData)(`partners/${a.id}`,{isActive:b,updatedAt:new Date().toISOString()})}catch(a){console.error("Status update error:",a),alert("Durum guncellenemedi: "+a.message)}},Q=async a=>{let b=I(a,["basic","name"],"name","Tedarikci");if(confirm(`"${b}" tedarikciyi silmek istediginize emin misiniz?`))try{await (0,i.removeData)(`partners/${a.id}`)}catch(a){console.error("Delete error:",a),alert("Silme hatasi: "+a.message)}};return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,b.jsxs)("div",{className:"bg-white border-b px-8 py-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Tedarikciler"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[M.total," tedarikci - ",M.active," aktif"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{l(!0),setTimeout(()=>l(!1),500)},disabled:k,children:[(0,b.jsx)(z.RefreshCw,{className:`h-4 w-4 mr-2 ${k?"animate-spin":""}`}),"Yenile"]}),(0,b.jsxs)(d.Button,{onClick:()=>{K(null),w(!0)},children:[(0,b.jsx)(y.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Tedarikci"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,b.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,b.jsx)(F.Building2,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:M.total})]})]})}),(0,b.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,b.jsx)(F.Building2,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Aktif"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:M.active})]})]})}),(0,b.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(r.Globe,{className:"h-5 w-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Ulkeler"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:N.length})]})]})}),(0,b.jsx)("div",{className:`${M.totalBalance>=0?"bg-red-50":"bg-green-50"} rounded-lg p-4`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`p-2 ${M.totalBalance>=0?"bg-red-100":"bg-green-100"} rounded-lg`,children:(0,b.jsx)(F.Building2,{className:`h-5 w-5 ${M.totalBalance>=0?"text-red-600":"text-green-600"}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam Bakiye"}),(0,b.jsxs)("p",{className:`text-xl font-semibold ${M.totalBalance>=0?"text-red-600":"text-green-600"}`,children:[M.totalBalance>=0?"-":"+","â‚¬",Math.abs(M.totalBalance).toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(E.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Tedarikci ara...",value:m,onChange:a=>n(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Select,{value:o,onValueChange:p,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[150px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Durum"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"Tum durumlar"}),(0,b.jsx)(f.SelectItem,{value:"active",children:"Aktif"}),(0,b.jsx)(f.SelectItem,{value:"inactive",children:"Pasif"})]})]}),(0,b.jsxs)(f.Select,{value:q,onValueChange:s,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[150px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Ulke"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"Tum ulkeler"}),N.map(a=>(0,b.jsxs)(f.SelectItem,{value:a,children:[H[a]||""," ",a]},a))]})]}),(0,b.jsxs)(f.Select,{value:t,onValueChange:u,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[150px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Kategori"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"Tum kategoriler"}),O.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))]})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{className:"w-[120px]",children:"Kod"}),(0,b.jsx)(g.TableHead,{children:"Tedarikci"}),(0,b.jsx)(g.TableHead,{children:"Tip"}),(0,b.jsx)(g.TableHead,{children:"Ulke"}),(0,b.jsx)(g.TableHead,{children:"Iletisim"}),(0,b.jsx)(g.TableHead,{children:"Telefon"}),(0,b.jsx)(g.TableHead,{children:"E-posta"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Borc"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Alacak"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Bakiye"}),(0,b.jsx)(g.TableHead,{children:"Durum"}),(0,b.jsx)(g.TableHead,{className:"w-[60px]"})]})}),(0,b.jsx)(g.TableBody,{children:k?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:12,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===L.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:12,className:"text-center py-8 text-gray-500",children:m||"all"!==o||"all"!==q||"all"!==t?"Filtrelere uygun tedarikci bulunamadi":"Henuz tedarikci eklenmemis"})}):L.map(a=>{let c=I(a,["tax","taxId"],"taxId","-"),e=I(a,["basic","name"],"name","Bilinmiyor"),f=I(a,["basic","type"],"type","wholesaler"),i=I(a,["basic","country"],"country","-"),j=I(a,["contact","contactPerson","name"],"contactPerson","-"),k=I(a,["contact","phone"],"phone","-"),l=I(a,["contact","email"],"email","-"),m=I(a,["basic","isActive"],"isActive",!0),n=I(a,["payment","currentBalance"],"currentBalance",0),o=n>=0?n:0,p=n<0?Math.abs(n):0;return(0,b.jsxs)(g.TableRow,{className:"hover:bg-gray-50",children:[(0,b.jsx)(g.TableCell,{className:"font-mono text-sm font-medium",children:c}),(0,b.jsx)(g.TableCell,{className:"font-medium",children:e}),(0,b.jsx)(g.TableCell,{className:"text-gray-600",children:{wholesaler:"Toptanci",manufacturer:"Uretici",distributor:"Distributor",ToptancÄ±:"Toptanci",Ãœretici:"Uretici",DistribÃ¼tÃ¶r:"Distributor"}[f]||f}),(0,b.jsxs)(g.TableCell,{children:[H[i]||""," ",i]}),(0,b.jsx)(g.TableCell,{className:"text-gray-600",children:j}),(0,b.jsx)(g.TableCell,{className:"text-gray-600",children:k}),(0,b.jsx)(g.TableCell,{className:"text-gray-600",children:l}),(0,b.jsxs)(g.TableCell,{className:`text-right ${o>0?"text-red-600 font-medium":""}`,children:["â‚¬",o.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,b.jsxs)(g.TableCell,{className:`text-right ${p>0?"text-green-600 font-medium":""}`,children:["â‚¬",p.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,b.jsxs)(g.TableCell,{className:`text-right font-medium ${n>0?"text-red-600":n<0?"text-green-600":""}`,children:["â‚¬",n.toLocaleString("tr-TR",{minimumFractionDigits:2})]}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(G,{isActive:m})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(A.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>{K(a),w(!0)},children:[(0,b.jsx)(D.Eye,{className:"h-4 w-4 mr-2"}),"Detaylari Goruntule"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>{K(a),w(!0)},children:[(0,b.jsx)(B.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsx)(h.DropdownMenuItem,{onClick:()=>P(a),children:m?"â¸ï¸ Pasif Yap":"â–¶ï¸ Aktif Yap"}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>Q(a),className:"text-red-600",children:[(0,b.jsx)(C.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]})]})})]},a.id)})})]})})}),(0,b.jsx)(x,{open:v,onOpenChange:w,supplier:J,onSave:()=>w(!1)})]})}a.s(["default",()=>J],45811)}];

//# sourceMappingURL=src_app_dashboard_suppliers_page_tsx_3ee7b153._.js.map