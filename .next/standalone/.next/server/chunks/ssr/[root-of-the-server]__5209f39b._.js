module.exports=[24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},73570,a=>{"use strict";let b=(0,a.i(70106).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>b],73570)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},13655,79808,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("fuel",[["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 4 0v-6.998a2 2 0 0 0-.59-1.42L18 5",key:"1wtuz0"}],["path",{d:"M14 21V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v16",key:"e09ifn"}],["path",{d:"M2 21h13",key:"1x0fut"}],["path",{d:"M3 9h11",key:"1p7c0w"}]]);a.s(["Fuel",()=>c],13655);let d=(0,b.default)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]]);a.s(["Wrench",()=>d],79808)},49846,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(1199),e=a.i(48464),f=a.i(38784),g=a.i(13655),h=a.i(79808),i=a.i(96221),j=a.i(73570),k=a.i(91119),l=a.i(68114),m=a.i(29258);function n(){let[a,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)({expenseCount:0,expenseTotal:0,vehicleCount:0,fuelTotal:0,maintenanceTotal:0,purchaseInvoiceCount:0,purchaseInvoiceTotal:0,unpaidInvoices:0}),[q,r]=(0,c.useState)([]),[s,t]=(0,c.useState)([]);return((0,c.useEffect)(()=>{let a=0,b=()=>{++a>=5&&n(!1)},c=(0,m.subscribeToData)("expenses",a=>{if(a){let b=Object.entries(a).map(([a,b])=>({id:a,...b})),c=b.reduce((a,b)=>a+(b.totalAmount||0),0);p(a=>({...a,expenseCount:b.length,expenseTotal:c})),r([...b].sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()).slice(0,5))}b()}),d=(0,m.subscribeToData)("vehicles",a=>{if(a){let b=Object.entries(a).map(([a,b])=>({id:a,...b}));p(a=>({...a,vehicleCount:b.length}));let c=[],d=new Date;b.forEach(a=>{if(a.insuranceExpiry){let b=new Date(a.insuranceExpiry);b.getTime()-d.getTime()<2592e6&&b.getTime()>d.getTime()&&c.push({plate:a.plate,type:"Sigorta",date:a.insuranceExpiry})}if(a.kaskoExpiry){let b=new Date(a.kaskoExpiry);b.getTime()-d.getTime()<2592e6&&b.getTime()>d.getTime()&&c.push({plate:a.plate,type:"Kasko",date:a.kaskoExpiry})}}),t(c)}b()}),e=(0,m.subscribeToData)("vehicle_fuel",a=>{if(a){let b=Object.values(a).reduce((a,b)=>a+(b.totalAmount||0),0);p(a=>({...a,fuelTotal:b}))}b()}),f=(0,m.subscribeToData)("vehicle_maintenance",a=>{if(a){let b=Object.values(a).reduce((a,b)=>a+(b.cost||0),0);p(a=>({...a,maintenanceTotal:b}))}b()}),g=(0,m.subscribeToData)("purchase_invoices",a=>{if(a){let b=Object.values(a),c=b.reduce((a,b)=>a+(b.total||0),0),d=b.filter(a=>"unpaid"===a.paymentStatus).length;p(a=>({...a,purchaseInvoiceCount:b.length,purchaseInvoiceTotal:c,unpaidInvoices:d}))}b()});return()=>{c(),d(),e(),f(),g()}},[]),a)?(0,b.jsxs)("div",{className:"flex items-center justify-center h-96",children:[(0,b.jsx)(i.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,b.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Veriler yükleniyor..."})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Dashboard"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Hoş geldiniz! İşte güncel özet."})]}),s.length>0&&(0,b.jsx)(k.Card,{className:"border-yellow-200 bg-yellow-50",children:(0,b.jsx)(k.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(j.AlertTriangle,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-yellow-800",children:"Yaklaşan Bitiş Tarihleri"}),(0,b.jsx)("ul",{className:"mt-1 text-sm text-yellow-700 space-y-1",children:s.map((a,c)=>(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-medium",children:a.plate})," - ",a.type,": ",(0,l.formatDate)(a.date)]},c))})]})]})})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Masraf Fişleri"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-orange-100",children:(0,b.jsx)(d.Receipt,{className:"h-4 w-4 text-orange-600"})})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:o.expenseCount}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Toplam: ",(0,l.formatCurrency)(o.expenseTotal)]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Araçlar"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-blue-100",children:(0,b.jsx)(e.Car,{className:"h-4 w-4 text-blue-600"})})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:o.vehicleCount}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Kayıtlı araç"})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Yakıt Gideri"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-amber-100",children:(0,b.jsx)(g.Fuel,{className:"h-4 w-4 text-amber-600"})})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:(0,l.formatCurrency)(o.fuelTotal)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Toplam yakıt"})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Bakım Gideri"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-purple-100",children:(0,b.jsx)(h.Wrench,{className:"h-4 w-4 text-purple-600"})})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:(0,l.formatCurrency)(o.maintenanceTotal)}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Toplam bakım"})]})]})]}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(k.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Alış Faturaları"}),(0,b.jsx)("div",{className:"p-2 rounded-lg bg-emerald-100",children:(0,b.jsx)(f.ShoppingCart,{className:"h-4 w-4 text-emerald-600"})})]}),(0,b.jsxs)(k.CardContent,{children:[(0,b.jsx)("div",{className:"text-2xl font-bold",children:o.purchaseInvoiceCount}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["Toplam: ",(0,l.formatCurrency)(o.purchaseInvoiceTotal)]}),o.unpaidInvoices>0&&(0,b.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[o.unpaidInvoices," adet ödenmemiş fatura"]})]})]}),(0,b.jsxs)(k.Card,{children:[(0,b.jsxs)(k.CardHeader,{children:[(0,b.jsx)(k.CardTitle,{children:"Son Masraflar"}),(0,b.jsx)(k.CardDescription,{children:"En son eklenen masraf fişleri"})]}),(0,b.jsx)(k.CardContent,{children:(0,b.jsx)("div",{className:"space-y-4",children:0===q.length?(0,b.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"Henüz masraf fişi yok"}):q.map(a=>(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:(0,b.jsx)(d.Receipt,{className:"h-4 w-4 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium",children:a.vendor||"Bilinmeyen"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:(0,l.formatDate)(a.date)})]})]}),(0,b.jsx)("span",{className:"font-semibold",children:(0,l.formatCurrency)(a.totalAmount||0)})]},a.id))})})]})]})]})}a.s(["default",()=>n])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__5209f39b._.js.map