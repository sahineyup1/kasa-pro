module.exports=[67960,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(80701),g=a.i(75083),h=a.i(6015),i=a.i(35732),j=a.i(29258),k=a.i(15618),l=a.i(69520),m=a.i(17755),n=a.i(87532),o=a.i(84505),p=a.i(77156),q=a.i(92759),r=a.i(81560),s=a.i(24569),t=a.i(70893),u=a.i(83497),v=a.i(73570),w=a.i(41710),x=a.i(38784),y=a.i(4720),z=a.i(16201),A=a.i(11300),B=a.i(70106);let C=(0,B.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var D=a.i(24669),E=a.i(10227),F=a.i(14574),G=a.i(29246),H=a.i(70430),I=a.i(96221),J=a.i(41675),K=a.i(46842);function L({status:a}){let c={pending:(0,b.jsx)(w.Clock,{className:"h-3 w-3 mr-1"}),sent:(0,b.jsx)(q.Send,{className:"h-3 w-3 mr-1"}),processing:(0,b.jsx)(I.Loader2,{className:"h-3 w-3 mr-1 animate-spin"}),completed:(0,b.jsx)(z.CheckCircle,{className:"h-3 w-3 mr-1"})};return(0,b.jsxs)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",sent:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800"}[a]||"bg-gray-100 text-gray-600"}`,children:[c[a],{pending:"Bekliyor",sent:"Gonderildi",processing:"Isleniyor",completed:"Tamamlandi"}[a]||a]})}function M({open:a,onOpenChange:c,list:e}){return e?(0,b.jsx)(F.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.ClipboardList,{className:"h-5 w-5"}),"Eksik Listesi Detayi"]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Liste No"}),(0,b.jsx)("p",{className:"font-mono font-medium",children:e.listNo||"-"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Durum"}),(0,b.jsx)("div",{children:(0,b.jsx)(L,{status:e.status||"pending"})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Olusturma Tarihi"}),(0,b.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(J.Calendar,{className:"h-4 w-4 text-gray-400"}),e.createdAt?new Date(e.createdAt).toLocaleString("tr-TR"):"-"]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Olusturan"}),(0,b.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(K.User,{className:"h-4 w-4 text-gray-400"}),e.createdBy||"-"]})]}),e.sentAt&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Gonderim Tarihi"}),(0,b.jsx)("p",{className:"text-sm",children:new Date(e.sentAt).toLocaleString("tr-TR")})]}),e.completedAt&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Tamamlanma Tarihi"}),(0,b.jsx)("p",{className:"text-sm",children:new Date(e.completedAt).toLocaleString("tr-TR")})]}),e.transferNumber&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Transfer No"}),(0,b.jsx)("p",{className:"font-mono text-sm",children:e.transferNumber})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(H.Label,{className:"text-sm font-medium mb-2 block",children:["Urunler (",e.items?.length||0,")"]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Urun Adi"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(h.TableHead,{children:"Birim"})]})}),(0,b.jsx)(h.TableBody,{children:e.items&&e.items.length>0?e.items.map((a,c)=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.productName}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.quantity}),(0,b.jsx)(h.TableCell,{children:a.unit||"Adet"})]},c)):(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:3,className:"text-center text-gray-500 py-4",children:"Urun bulunmuyor"})})})]})})]}),e.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{className:"text-sm font-medium mb-2 block",children:"Notlar"}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:e.notes})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>c(!1),children:"Kapat"})})]})]})}):null}function N({open:a,onOpenChange:g,onSuccess:i}){let[l,m]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,s]=(0,c.useState)(""),[t,v]=(0,c.useState)(!1),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(1),[J,K]=(0,c.useState)("Adet");(0,c.useEffect)(()=>{if(!a)return;let b=(0,j.subscribeToRTDB)("products",a=>{m(a||[]),v(!1)});return()=>b()},[a]),(0,c.useEffect)(()=>{a||(p([]),s(""),z(""),C(null),E(1),K("Adet"))},[a]);let L=l.filter(a=>{if(!y)return!1;let b=a.basic?.name||a.name||"",c=a.barcodes?.mainBarcode||a.barcode||"",d=y.toLowerCase();return b.toLowerCase().includes(d)||c.includes(d)}).slice(0,10),M=async()=>{if(0===o.length)return void alert("En az bir urun eklemelisiniz");x(!0);try{let a=new Date,b=`EKS-${a.getFullYear()}${String(a.getMonth()+1).padStart(2,"0")}${String(a.getDate()).padStart(2,"0")}-${String(a.getHours()).padStart(2,"0")}${String(a.getMinutes()).padStart(2,"0")}${String(a.getSeconds()).padStart(2,"0")}`;await (0,j.pushData)("missing_lists",{listNo:b,branchId:"default",status:"pending",items:o,notes:q,createdAt:a.toISOString(),createdBy:"admin"}),g(!1),i?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{x(!1)}};return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(A.ClipboardList,{className:"h-5 w-5"}),"Yeni Eksik Listesi"]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(H.Label,{children:"Urun Ekle"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Urun adi veya barkod ile ara...",value:y,onChange:a=>{z(a.target.value),C(null)},className:"pl-10"}),L.length>0&&!B&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:L.map(a=>(0,b.jsxs)("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 flex items-center gap-2",onClick:()=>{C(a),z(a.basic?.name||a.name||"")},children:[(0,b.jsx)(u.Package,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"font-medium",children:a.basic?.name||a.name}),(0,b.jsx)("span",{className:"text-xs text-gray-500 ml-auto",children:a.barcodes?.mainBarcode||a.barcode})]},a.id))})]}),(0,b.jsx)(e.Input,{type:"number",placeholder:"Miktar",value:D,onChange:a=>E(Number(a.target.value)),className:"w-24",min:1}),(0,b.jsxs)(f.Select,{value:J,onValueChange:K,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-24",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"Adet",children:"Adet"}),(0,b.jsx)(f.SelectItem,{value:"Kg",children:"Kg"}),(0,b.jsx)(f.SelectItem,{value:"Lt",children:"Lt"}),(0,b.jsx)(f.SelectItem,{value:"Paket",children:"Paket"}),(0,b.jsx)(f.SelectItem,{value:"Koli",children:"Koli"})]})]}),(0,b.jsx)(d.Button,{onClick:()=>{if(!B||D<=0)return;let a=B.basic?.name||B.name||"",b=o.findIndex(a=>a.productId===B.id);if(b>=0){let a=[...o];a[b].quantity=(a[b].quantity||0)+D,p(a)}else p([...o,{productId:B.id,productName:a,quantity:D,unit:J}]);z(""),C(null),E(1)},disabled:!B,children:(0,b.jsx)(k.Plus,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(H.Label,{className:"mb-2 block",children:["Eklenen Urunler (",o.length,")"]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Urun Adi"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(h.TableHead,{children:"Birim"}),(0,b.jsx)(h.TableHead,{className:"w-12"})]})}),(0,b.jsx)(h.TableBody,{children:0===o.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:4,className:"text-center text-gray-500 py-8",children:"Henuz urun eklenmedi"})}):o.map((a,c)=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.productName}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.quantity}),(0,b.jsx)(h.TableCell,{children:a.unit}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{p(o.filter((a,b)=>b!==c))},children:(0,b.jsx)(r.Trash2,{className:"h-4 w-4"})})})]},c))})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"notes",children:"Notlar"}),(0,b.jsx)(G.Textarea,{id:"notes",placeholder:"Opsiyonel notlar...",value:q,onChange:a=>s(a.target.value),rows:3})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),children:"Iptal"}),(0,b.jsxs)(d.Button,{onClick:M,disabled:w||0===o.length,children:[w&&(0,b.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydet"]})]})]})]})})}var O=a.i(11156);let P=(0,B.default)("banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]);var Q=a.i(67900);let R=(0,B.default)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),S=(0,B.default)("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);var T=a.i(336);function U({status:a}){return(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",approved:"bg-blue-100 text-blue-800",invoiced:"bg-purple-100 text-purple-800",shipped:"bg-cyan-100 text-cyan-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-600"}`,children:{pending:"Bekliyor",approved:"Onaylandi",invoiced:"Faturalandi",shipped:"Sevk Edildi",completed:"Tamamlandi",rejected:"Reddedildi"}[a]||a})}function V({open:a,onOpenChange:c,order:e}){if(!e)return null;let f=e.total||e.items?.reduce((a,b)=>a+(b.quantity||0)*(b.price||0),0)||0;return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:c,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x.ShoppingCart,{className:"h-5 w-5"}),"Siparis Detayi"]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Siparis No"}),(0,b.jsx)("p",{className:"font-mono font-medium",children:e.orderNo||"-"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Durum"}),(0,b.jsx)("div",{children:(0,b.jsx)(U,{status:e.status||"pending"})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Musteri"}),(0,b.jsx)("p",{className:"font-medium",children:e.customerName||"-"})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Kaynak"}),(0,b.jsx)("p",{className:"flex items-center gap-1 text-sm",children:"mobile"===e.source?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R,{className:"h-4 w-4 text-blue-500"})," Mobil"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(S,{className:"h-4 w-4 text-gray-500"})," Desktop"]})})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Siparis Tarihi"}),(0,b.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(J.Calendar,{className:"h-4 w-4 text-gray-400"}),e.createdAt?new Date(e.createdAt).toLocaleString("tr-TR"):"-"]})]}),(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Olusturan"}),(0,b.jsxs)("p",{className:"flex items-center gap-1 text-sm",children:[(0,b.jsx)(K.User,{className:"h-4 w-4 text-gray-400"}),e.createdBy||"-"]})]}),e.approvedAt&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Onay Tarihi"}),(0,b.jsx)("p",{className:"text-sm",children:new Date(e.approvedAt).toLocaleString("tr-TR")})]}),e.invoiceId&&(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)(H.Label,{className:"text-xs text-gray-500",children:"Fatura No"}),(0,b.jsx)("p",{className:"font-mono text-sm",children:e.invoiceId})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(H.Label,{className:"text-sm font-medium mb-2 block",children:["Urunler (",e.items?.length||0,")"]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Urun Adi"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(h.TableHead,{children:"Birim"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Fiyat"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,b.jsx)(h.TableBody,{children:e.items&&e.items.length>0?(0,b.jsxs)(b.Fragment,{children:[e.items.map((a,c)=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.productName}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.quantity}),(0,b.jsx)(h.TableCell,{children:a.unit||"Adet"}),(0,b.jsxs)(h.TableCell,{className:"text-right",children:["€",(a.price||0).toFixed(2)]}),(0,b.jsxs)(h.TableCell,{className:"text-right font-medium",children:["€",((a.quantity||0)*(a.price||0)).toFixed(2)]})]},c)),(0,b.jsxs)(h.TableRow,{className:"bg-gray-50",children:[(0,b.jsx)(h.TableCell,{colSpan:4,className:"text-right font-semibold",children:"Toplam:"}),(0,b.jsxs)(h.TableCell,{className:"text-right font-bold text-lg",children:["€",f.toFixed(2)]})]})]}):(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:5,className:"text-center text-gray-500 py-4",children:"Urun bulunmuyor"})})})]})})]}),e.notes&&(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{className:"text-sm font-medium mb-2 block",children:"Notlar"}),(0,b.jsx)("div",{className:"p-3 bg-gray-50 rounded-lg text-sm",children:e.notes})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>c(!1),children:"Kapat"})})]})]})})}function W({open:a,onOpenChange:g,onSuccess:i}){let[l,m]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,s]=(0,c.useState)([]),[t,v]=(0,c.useState)(""),[w,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(null),[J,K]=(0,c.useState)(1),[L,M]=(0,c.useState)("Adet"),[N,O]=(0,c.useState)(0);(0,c.useEffect)(()=>{if(!a)return;let b=(0,j.subscribeToRTDB)("products",a=>{m(a||[])}),c=(0,j.subscribeToRTDB)("customers",a=>{p(a||[])});return()=>{b(),c()}},[a]),(0,c.useEffect)(()=>{a||(s([]),v(""),y(""),C(""),E(null),K(1),M("Adet"),O(0))},[a]);let P=l.filter(a=>{if(!B)return!1;let b=a.basic?.name||a.name||"",c=a.barcodes?.mainBarcode||a.barcode||"",d=B.toLowerCase();return b.toLowerCase().includes(d)||c.includes(d)}).slice(0,10),Q=q.reduce((a,b)=>a+(b.quantity||0)*(b.price||0),0),R=async()=>{if(0===q.length)return void alert("En az bir urun eklemelisiniz");if(!w.trim())return void alert("Musteri adi giriniz");A(!0);try{let a=new Date,b=`SIP-${a.getFullYear()}${String(a.getMonth()+1).padStart(2,"0")}${String(a.getDate()).padStart(2,"0")}-${String(a.getHours()).padStart(2,"0")}${String(a.getMinutes()).padStart(2,"0")}${String(a.getSeconds()).padStart(2,"0")}`;await (0,j.pushData)("orders",{orderNo:b,branchId:"default",source:"desktop",status:"pending",customerName:w,items:q,total:Q,notes:t,createdAt:a.toISOString(),createdBy:"admin"}),g(!1),i?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{A(!1)}};return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x.ShoppingCart,{className:"h-5 w-5"}),"Yeni Siparis"]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"customer",children:"Musteri *"}),(0,b.jsx)(e.Input,{id:"customer",placeholder:"Musteri adi...",value:w,onChange:a=>y(a.target.value),list:"customers-list"}),(0,b.jsx)("datalist",{id:"customers-list",children:o.map(a=>(0,b.jsx)("option",{value:a.name||a.companyName||""},a.id))})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(H.Label,{children:"Urun Ekle"}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Urun ara...",value:B,onChange:a=>{C(a.target.value),E(null)},className:"pl-10"}),P.length>0&&!D&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:P.map(a=>(0,b.jsxs)("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 flex items-center gap-2",onClick:()=>{E(a),C(a.basic?.name||a.name||""),O(a.pricing?.sellPrice||a.price||0)},children:[(0,b.jsx)(u.Package,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"font-medium",children:a.basic?.name||a.name}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 ml-auto",children:["€",(a.pricing?.sellPrice||a.price||0).toFixed(2)]})]},a.id))})]}),(0,b.jsx)(e.Input,{type:"number",placeholder:"Miktar",value:J,onChange:a=>K(Number(a.target.value)),className:"w-20",min:1}),(0,b.jsxs)(f.Select,{value:L,onValueChange:M,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-24",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"Adet",children:"Adet"}),(0,b.jsx)(f.SelectItem,{value:"Kg",children:"Kg"}),(0,b.jsx)(f.SelectItem,{value:"Lt",children:"Lt"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(T.Euro,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{type:"number",placeholder:"Fiyat",value:N,onChange:a=>O(Number(a.target.value)),className:"w-24",min:0,step:.01})]}),(0,b.jsx)(d.Button,{onClick:()=>{if(!D||J<=0)return;let a=D.basic?.name||D.name||"";s([...q,{productId:D.id,productName:a,quantity:J,unit:L,price:N}]),C(""),E(null),K(1),O(0)},disabled:!D,children:(0,b.jsx)(k.Plus,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(H.Label,{className:"mb-2 block",children:["Siparis Kalemleri (",q.length,")"]}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Urun"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(h.TableHead,{children:"Birim"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Fiyat"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Toplam"}),(0,b.jsx)(h.TableHead,{className:"w-12"})]})}),(0,b.jsx)(h.TableBody,{children:0===q.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center text-gray-500 py-8",children:"Henuz urun eklenmedi"})}):(0,b.jsxs)(b.Fragment,{children:[q.map((a,c)=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.productName}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.quantity}),(0,b.jsx)(h.TableCell,{children:a.unit}),(0,b.jsxs)(h.TableCell,{className:"text-right",children:["€",(a.price||0).toFixed(2)]}),(0,b.jsxs)(h.TableCell,{className:"text-right font-medium",children:["€",((a.quantity||0)*(a.price||0)).toFixed(2)]}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>{s(q.filter((a,b)=>b!==c))},children:(0,b.jsx)(r.Trash2,{className:"h-4 w-4"})})})]},c)),(0,b.jsxs)(h.TableRow,{className:"bg-gray-50",children:[(0,b.jsx)(h.TableCell,{colSpan:4,className:"text-right font-semibold",children:"Toplam:"}),(0,b.jsxs)(h.TableCell,{className:"text-right font-bold text-lg",children:["€",Q.toFixed(2)]}),(0,b.jsx)(h.TableCell,{})]})]})})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"notes",children:"Notlar"}),(0,b.jsx)(G.Textarea,{id:"notes",placeholder:"Opsiyonel notlar...",value:t,onChange:a=>v(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),children:"Iptal"}),(0,b.jsxs)(d.Button,{onClick:R,disabled:z||0===q.length,children:[z&&(0,b.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydet"]})]})]})]})})}function X({open:a,onOpenChange:g,order:h,onSuccess:i}){let[k,l]=(0,c.useState)(""),[m,n]=(0,c.useState)(""),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)("cash"),[s,t]=(0,c.useState)(0),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1);if((0,c.useEffect)(()=>{a&&h&&(l(h.customerName||""),v(h.notes||""))},[a,h]),!h)return null;let z=h.items?.reduce((a,b)=>a+(b.quantity||0)*(b.price||0),0)||0,A=s/100*z,B=z-A,C=async()=>{x(!0);try{let a=new Date,b=`FTR-${a.getFullYear()}${String(a.getMonth()+1).padStart(2,"0")}${String(a.getDate()).padStart(2,"0")}-${String(a.getHours()).padStart(2,"0")}${String(a.getMinutes()).padStart(2,"0")}${String(a.getSeconds()).padStart(2,"0")}`;await (0,j.pushData)("sale_invoices",{invoiceNo:b,orderId:h.id,orderNo:h.orderNo,customerName:k,taxId:m,address:o,paymentMethod:q,items:h.items,subtotal:z,discount:s,discountAmount:A,total:B,notes:u,branchId:h.branchId,createdAt:a.toISOString(),createdBy:"admin"}),await (0,j.updateData)(`orders/${h.id}`,{status:"invoiced",invoiceId:b,invoicedAt:a.toISOString(),invoicedBy:"admin"}),g(!1),i?.()}catch(a){console.error("Invoice error:",a),alert("Fatura olusturma hatasi: "+a.message)}finally{x(!1)}};return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(y.FileText,{className:"h-5 w-5"}),"Faturaya Cevir - ",h.orderNo]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"invoiceCustomer",children:"Musteri Adi"}),(0,b.jsx)(e.Input,{id:"invoiceCustomer",value:k,onChange:a=>l(a.target.value)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"taxId",children:"Vergi No"}),(0,b.jsx)(e.Input,{id:"taxId",value:m,onChange:a=>n(a.target.value),placeholder:"Opsiyonel"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsx)(H.Label,{htmlFor:"address",children:"Adres"}),(0,b.jsx)(e.Input,{id:"address",value:o,onChange:a=>p(a.target.value),placeholder:"Opsiyonel"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{children:"Odeme Yontemi"}),(0,b.jsxs)(f.Select,{value:q,onValueChange:r,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"cash",children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(P,{className:"h-4 w-4"})," Nakit"]})}),(0,b.jsx)(f.SelectItem,{value:"credit_card",children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(O.CreditCard,{className:"h-4 w-4"})," Kredi Karti"]})}),(0,b.jsx)(f.SelectItem,{value:"bank_transfer",children:(0,b.jsxs)("span",{className:"flex items-center gap-2",children:[(0,b.jsx)(Q.Building2,{className:"h-4 w-4"})," Havale/EFT"]})})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"discount",children:"Iskonto (%)"}),(0,b.jsx)(e.Input,{id:"discount",type:"number",value:s,onChange:a=>t(Number(a.target.value)),min:0,max:100})]})]}),(0,b.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Ara Toplam:"}),(0,b.jsxs)("span",{children:["€",z.toFixed(2)]})]}),s>0&&(0,b.jsxs)("div",{className:"flex justify-between text-sm text-green-600",children:[(0,b.jsxs)("span",{children:["Iskonto (",s,"%):"]}),(0,b.jsxs)("span",{children:["-€",A.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t pt-2",children:[(0,b.jsx)("span",{children:"Toplam:"}),(0,b.jsxs)("span",{children:["€",B.toFixed(2)]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"invoiceNotes",children:"Fatura Notlari"}),(0,b.jsx)(G.Textarea,{id:"invoiceNotes",value:u,onChange:a=>v(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),children:"Iptal"}),(0,b.jsxs)(d.Button,{onClick:C,disabled:w,children:[w&&(0,b.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Fatura Olustur"]})]})]})]})})}function Y({open:a,onOpenChange:f,order:g,onSuccess:i}){let[l,m]=(0,c.useState)([]),[o,p]=(0,c.useState)([]),[q,s]=(0,c.useState)(""),[t,v]=(0,c.useState)(""),[w,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(null),[D,E]=(0,c.useState)(1),[J,K]=(0,c.useState)("Adet"),[L,M]=(0,c.useState)(0);if((0,c.useEffect)(()=>{if(!a)return;let b=(0,j.subscribeToRTDB)("products",a=>{m(a||[])});return()=>b()},[a]),(0,c.useEffect)(()=>{a&&g&&(p(g.items||[]),s(g.notes||""),v(g.customerName||""))},[a,g]),!g)return null;let N=l.filter(a=>{if(!z)return!1;let b=a.basic?.name||a.name||"",c=a.barcodes?.mainBarcode||a.barcode||"",d=z.toLowerCase();return b.toLowerCase().includes(d)||c.includes(d)}).slice(0,10),O=o.reduce((a,b)=>a+(b.quantity||0)*(b.price||0),0),P=async()=>{if(0===o.length)return void alert("En az bir urun olmalidir");y(!0);try{await (0,j.updateData)(`orders/${g.id}`,{customerName:t,items:o,total:O,notes:q,updatedAt:new Date().toISOString()}),f(!1),i?.()}catch(a){console.error("Update error:",a),alert("Guncelleme hatasi: "+a.message)}finally{y(!1)}};return(0,b.jsx)(F.Dialog,{open:a,onOpenChange:f,children:(0,b.jsxs)(F.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(F.DialogHeader,{children:(0,b.jsxs)(F.DialogTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(x.ShoppingCart,{className:"h-5 w-5"}),"Siparis Duzenle - ",g.orderNo]})}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"editCustomer",children:"Musteri"}),(0,b.jsx)(e.Input,{id:"editCustomer",value:t,onChange:a=>v(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(H.Label,{children:"Urun Ekle"}),(0,b.jsxs)("div",{className:"flex gap-2 flex-wrap",children:[(0,b.jsxs)("div",{className:"relative flex-1 min-w-[200px]",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Urun ara...",value:z,onChange:a=>{A(a.target.value),C(null)},className:"pl-10"}),N.length>0&&!B&&(0,b.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-48 overflow-y-auto",children:N.map(a=>(0,b.jsxs)("button",{className:"w-full px-3 py-2 text-left hover:bg-gray-100 flex items-center gap-2",onClick:()=>{C(a),A(a.basic?.name||a.name||""),M(a.pricing?.sellPrice||a.price||0)},children:[(0,b.jsx)(u.Package,{className:"h-4 w-4 text-gray-400"}),(0,b.jsx)("span",{className:"font-medium",children:a.basic?.name||a.name})]},a.id))})]}),(0,b.jsx)(e.Input,{type:"number",value:D,onChange:a=>E(Number(a.target.value)),className:"w-20",min:1}),(0,b.jsx)(e.Input,{type:"number",value:L,onChange:a=>M(Number(a.target.value)),className:"w-24",min:0,step:.01}),(0,b.jsx)(d.Button,{onClick:()=>{if(!B||D<=0)return;let a=B.basic?.name||B.name||"";p([...o,{productId:B.id,productName:a,quantity:D,unit:J,price:L}]),A(""),C(null),E(1),M(0)},disabled:!B,children:(0,b.jsx)(k.Plus,{className:"h-4 w-4"})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{className:"mb-2 block",children:"Siparis Kalemleri"}),(0,b.jsx)("div",{className:"border rounded-lg",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Urun"}),(0,b.jsx)(h.TableHead,{className:"text-right w-24",children:"Miktar"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Fiyat"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Toplam"}),(0,b.jsx)(h.TableHead,{className:"w-12"})]})}),(0,b.jsxs)(h.TableBody,{children:[o.map((a,c)=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.productName}),(0,b.jsx)(h.TableCell,{className:"text-right",children:(0,b.jsx)(e.Input,{type:"number",value:a.quantity,onChange:a=>{var b;let d;return b=Number(a.target.value),void((d=[...o])[c].quantity=b,p(d))},className:"w-20 h-8 text-right",min:1})}),(0,b.jsxs)(h.TableCell,{className:"text-right",children:["€",(a.price||0).toFixed(2)]}),(0,b.jsxs)(h.TableCell,{className:"text-right font-medium",children:["€",((a.quantity||0)*(a.price||0)).toFixed(2)]}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-red-600",onClick:()=>{p(o.filter((a,b)=>b!==c))},children:(0,b.jsx)(r.Trash2,{className:"h-4 w-4"})})})]},c)),(0,b.jsxs)(h.TableRow,{className:"bg-gray-50",children:[(0,b.jsx)(h.TableCell,{colSpan:3,className:"text-right font-semibold",children:"Toplam:"}),(0,b.jsxs)(h.TableCell,{className:"text-right font-bold text-lg",children:["€",O.toFixed(2)]}),(0,b.jsx)(h.TableCell,{})]})]})]})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(H.Label,{htmlFor:"editNotes",children:"Notlar"}),(0,b.jsx)(G.Textarea,{id:"editNotes",value:q,onChange:a=>s(a.target.value),rows:2})]}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>f(!1),children:"Iptal"}),(0,b.jsxs)(d.Button,{onClick:P,disabled:w,children:[w&&(0,b.jsx)(I.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydet"]})]})]})]})})}function Z({status:a}){return(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",approved:"bg-blue-100 text-blue-800",invoiced:"bg-purple-100 text-purple-800",shipped:"bg-cyan-100 text-cyan-800",completed:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"}[a]||"bg-gray-100 text-gray-600"}`,children:{pending:"Bekliyor",approved:"Onaylandi",invoiced:"Faturalandi",shipped:"Sevk Edildi",completed:"Tamamlandi",rejected:"Reddedildi"}[a]||a})}function $({status:a}){return(0,b.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{pending:"bg-amber-100 text-amber-800",sent:"bg-blue-100 text-blue-800",processing:"bg-purple-100 text-purple-800",completed:"bg-green-100 text-green-800"}[a]||"bg-gray-100 text-gray-600"}`,children:{pending:"Bekliyor",sent:"Gonderildi",processing:"Isleniyor",completed:"Tamamlandi"}[a]||a})}function _({stock:a,minStock:c}){return a<=0?(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,b.jsx)(v.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Stok Yok"]}):a<c?(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:"Dusuk"}):(0,b.jsx)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Normal"})}function aa({icon:a,title:c,value:d,color:e="gray"}){return(0,b.jsx)("div",{className:`rounded-lg p-4 ${{blue:"bg-blue-50",green:"bg-green-50",red:"bg-red-50",amber:"bg-amber-50",purple:"bg-purple-50",gray:"bg-gray-50"}[e]}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:`p-2 rounded-lg ${{blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",amber:"bg-amber-100 text-amber-600",purple:"bg-purple-100 text-purple-600",gray:"bg-gray-100 text-gray-600"}[e]}`,children:a}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:c}),(0,b.jsx)("p",{className:`text-xl font-semibold ${{blue:"text-blue-600",green:"text-green-600",red:"text-red-600",amber:"text-amber-600",purple:"text-purple-600",gray:"text-gray-900"}[e]}`,children:d})]})]})})}function ab(){let[a,B]=(0,c.useState)("dashboard"),[F,G]=(0,c.useState)([]),[H,I]=(0,c.useState)([]),[J,K]=(0,c.useState)([]),[L,O]=(0,c.useState)([]),[P,Q]=(0,c.useState)([]),[R,S]=(0,c.useState)(!0),[T,U]=(0,c.useState)(""),[ab,ac]=(0,c.useState)("all"),[ad,ae]=(0,c.useState)("all"),[af,ag]=(0,c.useState)(!1),[ah,ai]=(0,c.useState)(!1),[aj,ak]=(0,c.useState)(null),[al,am]=(0,c.useState)(!1),[an,ao]=(0,c.useState)(!1),[ap,aq]=(0,c.useState)(!1),[ar,as]=(0,c.useState)(!1),[at,au]=(0,c.useState)(null);(0,c.useEffect)(()=>{S(!0);let a=(0,j.subscribeToRTDB)("products",a=>{G(a||[])}),b=(0,j.subscribeToRTDB)("missing_lists",a=>{I(a||[])}),c=(0,j.subscribeToRTDB)("inventory_counts",a=>{K(a||[])}),d=(0,j.subscribeToRTDB)("lot_tracking",a=>{O(a||[])}),e=(0,j.subscribeToRTDB)("orders",a=>{Q(a||[]),S(!1)});return()=>{a(),b(),c(),d(),e()}},[]);let av=(0,c.useMemo)(()=>{let a=F.length,b=F.filter(a=>{let b=a.stock?.totalStock??a.stock_qty??0;return b<(a.stock?.minStock??10)&&b>0}).length,c=F.filter(a=>(a.stock?.totalStock??a.stock_qty??0)<=0).length,d=P.filter(a=>"pending"===a.status).length;return{totalProducts:a,lowStock:b,outOfStock:c,pendingOrders:d,completedOrders:P.filter(a=>"completed"===a.status).length,missingItems:H.filter(a=>"pending"===a.status).length}},[F,P,H]),aw=(0,c.useMemo)(()=>{let a=H.length,b=H.filter(a=>"pending"===a.status).length;return{total:a,pending:b,sent:H.filter(a=>"sent"===a.status).length,completed:H.filter(a=>"completed"===a.status).length}},[H]),ax=(0,c.useMemo)(()=>{let a=P.length,b=P.filter(a=>"pending"===a.status).length,c=P.filter(a=>"approved"===a.status).length;return{total:a,pending:b,approved:c,invoiced:P.filter(a=>"invoiced"===a.status).length,completed:P.filter(a=>"completed"===a.status).length}},[P]),ay=(0,c.useMemo)(()=>{let a=new Date,b=new Date(a.getFullYear(),a.getMonth()+1,0),c=new Date(a.getFullYear(),a.getMonth()+2,0),d=0,e=0,f=0;return L.forEach(g=>{let h;if(!g.expiryDate)return;if(g.expiryDate.includes(".")){let a=g.expiryDate.split(".");h=new Date(parseInt(a[2]),parseInt(a[1])-1,parseInt(a[0]))}else h=new Date(g.expiryDate);let i=g.quantity||0;f+=i,h<=b&&h>=a?d++:h<=c&&h>b&&e++}),{total:L.length,expiringThisMonth:d,expiringNextMonth:e,totalQuantity:f}},[L]),az=(0,c.useMemo)(()=>H.filter(a=>{let b=!T||a.listNo?.toLowerCase().includes(T.toLowerCase()),c="all"===ab||a.status===ab;return b&&c}).sort((a,b)=>new Date(b.createdAt||"").getTime()-new Date(a.createdAt||"").getTime()),[H,T,ab]),aA=(0,c.useMemo)(()=>P.filter(a=>{let b=!T||a.orderNo?.toLowerCase().includes(T.toLowerCase())||a.customerName?.toLowerCase().includes(T.toLowerCase()),c="all"===ab||a.status===ab;return b&&c}).sort((a,b)=>new Date(b.createdAt||"").getTime()-new Date(a.createdAt||"").getTime()),[P,T,ab]),aB=(0,c.useMemo)(()=>J.filter(a=>{let b=!T||a.barcode?.toLowerCase().includes(T.toLowerCase())||a.name?.toLowerCase().includes(T.toLowerCase()),c="all"===ad||a.branch===ad;return b&&c}).sort((a,b)=>new Date(b.updatedAt||"").getTime()-new Date(a.updatedAt||"").getTime()),[J,T,ad]),aC=()=>{S(!0),setTimeout(()=>S(!1),500)},aD=a=>{alert(`${a} Excel export - Yakin zamanda`)},aE=async a=>{if(confirm(`"${a.listNo}" listesini depoya gondermek istediginize emin misiniz?`))try{await (0,j.updateData)(`missing_lists/${a.id}`,{status:"sent",sentAt:new Date().toISOString(),sentBy:"admin"})}catch(a){console.error("Send error:",a),alert("Gonderme hatasi: "+a.message)}},aF=async a=>{if(confirm(`"${a.listNo}" listesini silmek istediginize emin misiniz?`))try{await (0,j.removeData)(`missing_lists/${a.id}`)}catch(a){console.error("Delete error:",a),alert("Silme hatasi: "+a.message)}},aG=async a=>{if(confirm(`"${a.listNo}" listesini tamamlandi olarak isaretlemek istediginize emin misiniz?`))try{await (0,j.updateData)(`missing_lists/${a.id}`,{status:"completed",completedAt:new Date().toISOString(),completedBy:"admin"})}catch(a){console.error("Complete error:",a),alert("Tamamlama hatasi: "+a.message)}},aH=async a=>{if(confirm(`"${a.orderNo}" siparisini onaylamak istediginize emin misiniz?`))try{await (0,j.updateData)(`orders/${a.id}`,{status:"approved",approvedAt:new Date().toISOString(),approvedBy:"admin"})}catch(a){console.error("Approve error:",a),alert("Onaylama hatasi: "+a.message)}},aI=async a=>{if(confirm(`"${a.orderNo}" siparisini reddetmek istediginize emin misiniz?`))try{await (0,j.updateData)(`orders/${a.id}`,{status:"rejected",rejectedAt:new Date().toISOString(),rejectedBy:"admin"})}catch(a){console.error("Reject error:",a),alert("Reddetme hatasi: "+a.message)}},aJ=async a=>{if(confirm(`"${a.orderNo}" siparisini tamamlamak istediginize emin misiniz?`))try{await (0,j.updateData)(`orders/${a.id}`,{status:"completed",completedAt:new Date().toISOString(),completedBy:"admin"})}catch(a){console.error("Complete error:",a),alert("Tamamlama hatasi: "+a.message)}};return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,b.jsx)("div",{className:"bg-white border-b px-4 lg:px-8 py-4 lg:py-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-xl lg:text-2xl font-semibold text-gray-900",children:"Depo Yonetimi"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Stok takibi, eksik listesi, envanter ve siparis islemleri"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:aC,disabled:R,children:[(0,b.jsx)(l.RefreshCw,{className:`h-4 w-4 mr-2 ${R?"animate-spin":""}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Yenile"})]})})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-4 lg:p-8",children:(0,b.jsxs)(g.Tabs,{value:a,onValueChange:B,className:"w-full",children:[(0,b.jsxs)(g.TabsList,{className:"grid w-full grid-cols-5 mb-6",children:[(0,b.jsxs)(g.TabsTrigger,{value:"dashboard",className:"text-xs sm:text-sm",children:[(0,b.jsx)(t.Warehouse,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Depo"})," Ozeti"]}),(0,b.jsxs)(g.TabsTrigger,{value:"missing",className:"text-xs sm:text-sm",children:[(0,b.jsx)(A.ClipboardList,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Eksik"})," Liste"]}),(0,b.jsxs)(g.TabsTrigger,{value:"inventory",className:"text-xs sm:text-sm",children:[(0,b.jsx)(u.Package,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Envanter"})," Sayim"]}),(0,b.jsxs)(g.TabsTrigger,{value:"lots",className:"text-xs sm:text-sm",children:[(0,b.jsx)(C,{className:"h-4 w-4 mr-1 sm:mr-2"}),"Lot/SKT"]}),(0,b.jsxs)(g.TabsTrigger,{value:"orders",className:"text-xs sm:text-sm",children:[(0,b.jsx)(x.ShoppingCart,{className:"h-4 w-4 mr-1 sm:mr-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Satis"})," Siparis"]})]}),(0,b.jsxs)(g.TabsContent,{value:"dashboard",className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stok Durumu"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(aa,{icon:(0,b.jsx)(u.Package,{className:"h-5 w-5"}),title:"Toplam Urun",value:av.totalProducts,color:"blue"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(v.AlertTriangle,{className:"h-5 w-5"}),title:"Dusuk Stok",value:av.lowStock,color:"amber"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(u.Package,{className:"h-5 w-5"}),title:"Tukenen Urunler",value:av.outOfStock,color:"red"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Islemler"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(aa,{icon:(0,b.jsx)(x.ShoppingCart,{className:"h-5 w-5"}),title:"Bekleyen Siparisler",value:av.pendingOrders,color:"purple"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(A.ClipboardList,{className:"h-5 w-5"}),title:"Eksik Urunler",value:av.missingItems,color:"amber"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(z.CheckCircle,{className:"h-5 w-5"}),title:"Tamamlanan Siparisler",value:av.completedOrders,color:"green"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dusuk Stoklu Urunler"}),(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Urun Adi"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Mevcut"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Minimum"}),(0,b.jsx)(h.TableHead,{children:"Durum"})]})}),(0,b.jsxs)(h.TableBody,{children:[F.filter(a=>(a.stock?.totalStock??a.stock_qty??0)<(a.stock?.minStock??10)).slice(0,10).map(a=>{let c=a.stock?.totalStock??a.stock_qty??0,d=a.stock?.minStock??10;return(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.basic?.name||a.name||"-"}),(0,b.jsx)(h.TableCell,{className:`text-right font-medium ${c<=0?"text-red-600":"text-amber-600"}`,children:c}),(0,b.jsx)(h.TableCell,{className:"text-right text-gray-600",children:d}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(_,{stock:c,minStock:d})})]},a.id)}),0===F.filter(a=>(a.stock?.totalStock??a.stock_qty??0)<(a.stock?.minStock??10)).length&&(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:4,className:"text-center py-8 text-gray-500",children:"Dusuk stoklu urun yok"})})]})]})})]})]}),(0,b.jsxs)(g.TabsContent,{value:"missing",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(aa,{icon:(0,b.jsx)(y.FileText,{className:"h-5 w-5"}),title:"Toplam Liste",value:aw.total,color:"blue"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(w.Clock,{className:"h-5 w-5"}),title:"Bekleyen",value:aw.pending,color:"amber"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(q.Send,{className:"h-5 w-5"}),title:"Gonderilmis",value:aw.sent,color:"purple"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(z.CheckCircle,{className:"h-5 w-5"}),title:"Tamamlanan",value:aw.completed,color:"green"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Liste no ara...",value:T,onChange:a=>U(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Select,{value:ab,onValueChange:ac,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Durum"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"Tum durumlar"}),(0,b.jsx)(f.SelectItem,{value:"pending",children:"Bekleyen"}),(0,b.jsx)(f.SelectItem,{value:"sent",children:"Gonderilmis"}),(0,b.jsx)(f.SelectItem,{value:"completed",children:"Tamamlanan"})]})]})]}),(0,b.jsxs)(d.Button,{onClick:()=>ai(!0),children:[(0,b.jsx)(k.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Liste"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Liste No"}),(0,b.jsx)(h.TableHead,{children:"Tarih"}),(0,b.jsx)(h.TableHead,{children:"Durum"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Urun Sayisi"}),(0,b.jsx)(h.TableHead,{className:"hidden lg:table-cell",children:"Not"}),(0,b.jsx)(h.TableHead,{className:"w-[60px]"})]})}),(0,b.jsx)(h.TableBody,{children:R?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===az.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Eksik listesi bulunamadi"})}):az.slice(0,50).map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-mono font-medium",children:a.listNo||"-"}),(0,b.jsx)(h.TableCell,{children:a.createdAt?.split("T")[0]||"-"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)($,{status:a.status||"pending"})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.items?.length||0}),(0,b.jsx)(h.TableCell,{className:"hidden lg:table-cell text-gray-600 text-sm truncate max-w-[200px]",children:a.notes||"-"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>{ak(a),ag(!0)},children:[(0,b.jsx)(p.Eye,{className:"h-4 w-4 mr-2"}),"Goruntule"]}),"pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>aE(a),children:[(0,b.jsx)(q.Send,{className:"h-4 w-4 mr-2"}),"Depoya Gonder"]}),(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{className:"text-red-600",onClick:()=>aF(a),children:[(0,b.jsx)(r.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]}),"sent"===a.status&&(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>aG(a),children:[(0,b.jsx)(z.CheckCircle,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})})]},a.id))})]})})]}),(0,b.jsxs)(g.TabsContent,{value:"inventory",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(aa,{icon:(0,b.jsx)(y.FileText,{className:"h-5 w-5"}),title:"Toplam Kayit",value:J.length,color:"blue"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(t.Warehouse,{className:"h-5 w-5"}),title:"Subeler",value:new Set(J.map(a=>a.branch)).size,color:"purple"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(u.Package,{className:"h-5 w-5"}),title:"Farkli Urun",value:new Set(J.map(a=>a.barcode)).size,color:"green"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(D.TrendingUp,{className:"h-5 w-5"}),title:"Toplam Miktar",value:J.reduce((a,b)=>a+(b.qty||0),0),color:"amber"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:max-w-md",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Barkod veya urun ara...",value:T,onChange:a=>U(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Select,{value:ad,onValueChange:ae,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full sm:w-[180px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Sube"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"Tum subeler"}),(0,b.jsx)(f.SelectItem,{value:"merkez",children:"Merkez Depo"}),(0,b.jsx)(f.SelectItem,{value:"atlas",children:"Atlas Mesnica"}),(0,b.jsx)(f.SelectItem,{value:"desetka",children:"Desetka Market"})]})]}),(0,b.jsxs)(d.Button,{variant:"outline",onClick:()=>aD("inventory"),children:[(0,b.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Excel"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Sube"}),(0,b.jsx)(h.TableHead,{children:"Barkod"}),(0,b.jsx)(h.TableHead,{children:"Urun Adi"}),(0,b.jsx)(h.TableHead,{children:"SKT"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(h.TableHead,{className:"hidden lg:table-cell",children:"Son Guncelleme"})]})}),(0,b.jsx)(h.TableBody,{children:R?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===aB.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Envanter kaydi bulunamadi"})}):aB.slice(0,100).map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{children:a.branch||"-"}),(0,b.jsx)(h.TableCell,{className:"font-mono text-sm",children:a.barcode||"-"}),(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.name||"-"}),(0,b.jsx)(h.TableCell,{children:a.skt||"-"}),(0,b.jsx)(h.TableCell,{className:"text-right font-medium",children:a.qty||0}),(0,b.jsx)(h.TableCell,{className:"hidden lg:table-cell text-gray-600 text-sm",children:a.updatedAt?.split("T")[0]||"-"})]},a.id))})]})})]}),(0,b.jsxs)(g.TabsContent,{value:"lots",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsx)(aa,{icon:(0,b.jsx)(u.Package,{className:"h-5 w-5"}),title:"Toplam Lot",value:ay.total,color:"blue"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(v.AlertTriangle,{className:"h-5 w-5"}),title:"Bu Ay Dolacak",value:ay.expiringThisMonth,color:"red"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(w.Clock,{className:"h-5 w-5"}),title:"Gelecek Ay",value:ay.expiringNextMonth,color:"amber"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(D.TrendingUp,{className:"h-5 w-5"}),title:"Toplam Miktar",value:ay.totalQuantity,color:"green"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:max-w-md",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Barkod veya urun ara...",value:T,onChange:a=>U(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(d.Button,{variant:"outline",onClick:()=>aD("lots"),children:[(0,b.jsx)(o.Download,{className:"h-4 w-4 mr-2"}),"Excel"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Barkod"}),(0,b.jsx)(h.TableHead,{children:"Urun Adi"}),(0,b.jsx)(h.TableHead,{children:"Lot ID"}),(0,b.jsx)(h.TableHead,{children:"SKT"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Kalan Gun"})]})}),(0,b.jsx)(h.TableBody,{children:R?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===L.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:6,className:"text-center py-8 text-gray-500",children:"Lot kaydi bulunamadi"})}):L.filter(a=>{if(!T)return!0;let b=T.toLowerCase();return a.barcode?.toLowerCase().includes(b)||a.productName?.toLowerCase().includes(b)}).slice(0,100).map(a=>{let c=0;if(a.expiryDate){let b;if(a.expiryDate.includes(".")){let c=a.expiryDate.split(".");b=new Date(parseInt(c[2]),parseInt(c[1])-1,parseInt(c[0]))}else b=new Date(a.expiryDate);c=Math.ceil((b.getTime()-Date.now())/864e5)}return(0,b.jsxs)(h.TableRow,{className:c<7?"bg-red-50":c<15?"bg-amber-50":"",children:[(0,b.jsx)(h.TableCell,{className:"font-mono text-sm",children:a.barcode||"-"}),(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.productName||"-"}),(0,b.jsx)(h.TableCell,{className:"font-mono text-sm",children:a.lotId||"-"}),(0,b.jsx)(h.TableCell,{children:a.expiryDate||"-"}),(0,b.jsx)(h.TableCell,{className:"text-right font-medium",children:a.quantity||0}),(0,b.jsxs)(h.TableCell,{className:`text-right font-medium ${c<7?"text-red-600":c<15?"text-amber-600":"text-green-600"}`,children:[c," gun"]})]},a.id)})})]})})]}),(0,b.jsxs)(g.TabsContent,{value:"orders",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,b.jsx)(aa,{icon:(0,b.jsx)(x.ShoppingCart,{className:"h-5 w-5"}),title:"Toplam Siparis",value:ax.total,color:"blue"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(w.Clock,{className:"h-5 w-5"}),title:"Bekleyen",value:ax.pending,color:"amber"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(z.CheckCircle,{className:"h-5 w-5"}),title:"Onaylanan",value:ax.approved,color:"green"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(y.FileText,{className:"h-5 w-5"}),title:"Faturalanan",value:ax.invoiced,color:"purple"}),(0,b.jsx)(aa,{icon:(0,b.jsx)(u.Package,{className:"h-5 w-5"}),title:"Tamamlanan",value:ax.completed,color:"gray"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full sm:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,b.jsx)(n.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Siparis no veya musteri ara...",value:T,onChange:a=>U(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Select,{value:ab,onValueChange:ac,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-full sm:w-[150px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Durum"})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"all",children:"Tum durumlar"}),(0,b.jsx)(f.SelectItem,{value:"pending",children:"Bekleyen"}),(0,b.jsx)(f.SelectItem,{value:"approved",children:"Onaylanan"}),(0,b.jsx)(f.SelectItem,{value:"invoiced",children:"Faturalanan"}),(0,b.jsx)(f.SelectItem,{value:"completed",children:"Tamamlanan"}),(0,b.jsx)(f.SelectItem,{value:"rejected",children:"Reddedilen"})]})]})]}),(0,b.jsxs)(d.Button,{onClick:()=>ao(!0),children:[(0,b.jsx)(k.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Siparis"]})]}),(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(h.Table,{children:[(0,b.jsx)(h.TableHeader,{children:(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableHead,{children:"Siparis No"}),(0,b.jsx)(h.TableHead,{children:"Tarih"}),(0,b.jsx)(h.TableHead,{children:"Musteri"}),(0,b.jsx)(h.TableHead,{children:"Durum"}),(0,b.jsx)(h.TableHead,{className:"hidden lg:table-cell",children:"Kaynak"}),(0,b.jsx)(h.TableHead,{className:"text-right",children:"Urun"}),(0,b.jsx)(h.TableHead,{className:"text-right hidden sm:table-cell",children:"Toplam"}),(0,b.jsx)(h.TableHead,{className:"w-[60px]"})]})}),(0,b.jsx)(h.TableBody,{children:R?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===aA.length?(0,b.jsx)(h.TableRow,{children:(0,b.jsx)(h.TableCell,{colSpan:8,className:"text-center py-8 text-gray-500",children:"Siparis bulunamadi"})}):aA.slice(0,50).map(a=>(0,b.jsxs)(h.TableRow,{children:[(0,b.jsx)(h.TableCell,{className:"font-mono font-medium",children:a.orderNo||"-"}),(0,b.jsx)(h.TableCell,{children:a.createdAt?.split("T")[0]||"-"}),(0,b.jsx)(h.TableCell,{className:"font-medium",children:a.customerName||"-"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsx)(Z,{status:a.status||"pending"})}),(0,b.jsx)(h.TableCell,{className:"hidden lg:table-cell",children:"mobile"===a.source?(0,b.jsx)("span",{className:"text-blue-600",children:"Mobil"}):(0,b.jsx)("span",{className:"text-gray-600",children:"Desktop"})}),(0,b.jsx)(h.TableCell,{className:"text-right",children:a.items?.length||0}),(0,b.jsx)(h.TableCell,{className:"text-right font-medium hidden sm:table-cell",children:a.total?`€${a.total.toFixed(2)}`:"-"}),(0,b.jsx)(h.TableCell,{children:(0,b.jsxs)(i.DropdownMenu,{children:[(0,b.jsx)(i.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(m.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(i.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>{au(a),am(!0)},children:[(0,b.jsx)(p.Eye,{className:"h-4 w-4 mr-2"}),"Goruntule"]}),"pending"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>{au(a),aq(!0)},children:[(0,b.jsx)(s.Edit,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>aH(a),children:[(0,b.jsx)(z.CheckCircle,{className:"h-4 w-4 mr-2"}),"Onayla"]}),(0,b.jsx)(i.DropdownMenuSeparator,{}),(0,b.jsxs)(i.DropdownMenuItem,{className:"text-red-600",onClick:()=>aI(a),children:[(0,b.jsx)(r.Trash2,{className:"h-4 w-4 mr-2"}),"Reddet"]})]}),"approved"===a.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>{au(a),as(!0)},children:[(0,b.jsx)(y.FileText,{className:"h-4 w-4 mr-2"}),"Faturala"]}),(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>aJ(a),children:[(0,b.jsx)(E.Truck,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]}),"invoiced"===a.status&&(0,b.jsxs)(i.DropdownMenuItem,{onClick:()=>aJ(a),children:[(0,b.jsx)(z.CheckCircle,{className:"h-4 w-4 mr-2"}),"Tamamla"]})]})]})})]},a.id))})]})})]})]})}),(0,b.jsx)(M,{open:af,onOpenChange:ag,list:aj}),(0,b.jsx)(N,{open:ah,onOpenChange:ai,onSuccess:aC}),(0,b.jsx)(V,{open:al,onOpenChange:am,order:at}),(0,b.jsx)(W,{open:an,onOpenChange:ao,onSuccess:aC}),(0,b.jsx)(Y,{open:ap,onOpenChange:aq,order:at,onSuccess:aC}),(0,b.jsx)(X,{open:ar,onOpenChange:as,order:at,onSuccess:aC})]})}a.s(["default",()=>ab],67960)}];

//# sourceMappingURL=src_app_dashboard_warehouse_page_tsx_5284f8ad._.js.map