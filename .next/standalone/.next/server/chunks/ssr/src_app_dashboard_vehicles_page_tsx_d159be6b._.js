module.exports=[29708,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(87532),f=a.i(48464),g=a.i(13655),h=a.i(79808),i=a.i(24569),j=a.i(81560),k=a.i(77156),l=a.i(96221),m=a.i(73570),n=a.i(91119),o=a.i(99570),p=a.i(66718),q=a.i(6015),r=a.i(68114),s=a.i(29258),t=a.i(70430),u=a.i(80701),v=a.i(29246),w=a.i(14574);let x=[{value:"car",label:"Binek"},{value:"truck",label:"Kamyon"},{value:"van",label:"Van/Minibus"},{value:"motorcycle",label:"Motosiklet"}],y=[{value:"gasoline",label:"Benzin"},{value:"diesel",label:"Dizel"},{value:"lpg",label:"LPG"},{value:"electric",label:"Elektrik"},{value:"hybrid",label:"Hibrit"}],z=[{value:"active",label:"Aktif"},{value:"maintenance",label:"Bakimda"},{value:"inactive",label:"Pasif"}];function A({open:a,onOpenChange:d,vehicle:e,onSave:f}){let g=!!e,[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,q]=(0,c.useState)(""),[r,A]=(0,c.useState)("car"),[B,C]=(0,c.useState)("diesel"),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)("active"),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(""),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(!1);(0,c.useEffect)(()=>{a&&(e?(i(e.plate||""),k(e.brand||""),m(e.model||""),q(String(e.year||"")),A(e.type||"car"),C(e.fuelType||"diesel"),E(String(e.km||"")),G(e.status||"active"),I(e.insuranceExpiry||""),K(e.kaskoExpiry||""),M(e.inspectionExpiry||""),O(e.assignedTo||""),Q(e.notes||"")):(i(""),k(""),m(""),q(String(new Date().getFullYear())),A("car"),C("diesel"),E(""),G("active"),I(""),K(""),M(""),O(""),Q("")))},[a,e]);let T=async()=>{if(!h.trim())return void alert("Lutfen plaka girin!");if(!j.trim())return void alert("Lutfen marka girin!");S(!0);try{let a={plate:h.trim().toUpperCase(),brand:j.trim(),model:l.trim(),year:parseInt(n)||new Date().getFullYear(),type:r,fuelType:B,km:parseInt(D)||0,status:F,insuranceExpiry:H||null,kaskoExpiry:J||null,inspectionExpiry:L||null,assignedTo:N.trim()||null,notes:P.trim(),updatedAt:new Date().toISOString()};g&&e?.id?await (0,s.updateData)(`vehicles/${e.id}`,a):(a.createdAt=new Date().toISOString(),await (0,s.pushData)("vehicles",a)),d(!1),f?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{S(!1)}};return(0,b.jsx)(w.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-xl font-semibold",children:g?"Arac Duzenle":"Yeni Arac"})}),(0,b.jsxs)("div",{className:"grid gap-6 py-4",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Arac Bilgileri"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"plate",children:"Plaka *"}),(0,b.jsx)(p.Input,{id:"plate",value:h,onChange:a=>i(a.target.value.toUpperCase()),placeholder:"Orn: LJ-123-AB"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"status",children:"Durum"}),(0,b.jsxs)(u.Select,{value:F,onValueChange:G,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Durum secin"})}),(0,b.jsx)(u.SelectContent,{children:z.map(a=>(0,b.jsx)(u.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"brand",children:"Marka *"}),(0,b.jsx)(p.Input,{id:"brand",value:j,onChange:a=>k(a.target.value),placeholder:"Orn: Volkswagen"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"model",children:"Model"}),(0,b.jsx)(p.Input,{id:"model",value:l,onChange:a=>m(a.target.value),placeholder:"Orn: Passat"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"year",children:"Yil"}),(0,b.jsx)(p.Input,{id:"year",type:"number",value:n,onChange:a=>q(a.target.value),min:"1990",max:new Date().getFullYear()+1})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"km",children:"Kilometre"}),(0,b.jsx)(p.Input,{id:"km",type:"number",value:D,onChange:a=>E(a.target.value),placeholder:"0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"type",children:"Arac Tipi"}),(0,b.jsxs)(u.Select,{value:r,onValueChange:A,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Arac tipi secin"})}),(0,b.jsx)(u.SelectContent,{children:x.map(a=>(0,b.jsx)(u.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"fuelType",children:"Yakit Tipi"}),(0,b.jsxs)(u.Select,{value:B,onValueChange:C,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Yakit tipi secin"})}),(0,b.jsx)(u.SelectContent,{children:y.map(a=>(0,b.jsx)(u.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Bitis Tarihleri"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"insuranceExpiry",children:"Sigorta Bitis"}),(0,b.jsx)(p.Input,{id:"insuranceExpiry",type:"date",value:H,onChange:a=>I(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"kaskoExpiry",children:"Kasko Bitis"}),(0,b.jsx)(p.Input,{id:"kaskoExpiry",type:"date",value:J,onChange:a=>K(a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"inspectionExpiry",children:"Muayene Bitis"}),(0,b.jsx)(p.Input,{id:"inspectionExpiry",type:"date",value:L,onChange:a=>M(a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"assignedTo",children:"Atanan Kisi"}),(0,b.jsx)(p.Input,{id:"assignedTo",value:N,onChange:a=>O(a.target.value),placeholder:"Surucunun adi"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"notes",children:"Notlar"}),(0,b.jsx)(v.Textarea,{id:"notes",value:P,onChange:a=>Q(a.target.value),placeholder:"Ek notlar...",rows:2})]})]})]}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>d(!1),disabled:R,children:"Iptal"}),(0,b.jsx)(o.Button,{onClick:T,disabled:R,children:R?"Kaydediliyor...":"Kaydet"})]})]})})}function B({open:a,onOpenChange:d,fuelRecord:e,onSave:f}){let g=!!e,[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)(""),[n,q]=(0,c.useState)(""),[r,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)("diesel"),[E,F]=(0,c.useState)("cash"),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)([]);(0,c.useEffect)(()=>{let a=(0,s.subscribeToData)("vehicles",a=>{if(a){let b=Object.entries(a).map(([a,b])=>({id:a,plate:b.plate||"",km:b.km||0}));b.sort((a,b)=>a.plate.localeCompare(b.plate)),L(b)}});return()=>a()},[]),(0,c.useEffect)(()=>{if(a){let a=new Date().toISOString().split("T")[0];e?(i(e.vehicleId||""),k(e.date||a),m(String(e.liters||"")),q(String(e.pricePerLiter||"")),x(String(e.totalAmount||"")),z(String(e.km||"")),B(e.station||""),D(e.fuelType||"diesel"),F(e.paymentMethod||"cash"),H(e.notes||"")):(i(""),k(a),m(""),q(""),x(""),z(""),B(""),D("diesel"),F("cash"),H(""))}},[a,e]),(0,c.useEffect)(()=>{if(h&&!g){let a=K.find(a=>a.id===h);a?.km&&z(String(a.km))}},[h,K,g]),(0,c.useEffect)(()=>{let a=parseFloat(l)||0,b=parseFloat(n)||0;a>0&&b>0&&x((a*b).toFixed(2))},[l,n]);let M=async()=>{if(!h)return void alert("Lutfen arac secin!");if(!l||0>=parseFloat(l))return void alert("Lutfen gecerli litre miktari girin!");if(!r||0>=parseFloat(r))return void alert("Lutfen gecerli tutar girin!");J(!0);try{let a=K.find(a=>a.id===h),b={vehicleId:h,vehiclePlate:a?.plate||"",date:j,liters:parseFloat(l)||0,pricePerLiter:parseFloat(n)||0,totalAmount:parseFloat(r)||0,km:parseInt(y)||0,station:A.trim(),fuelType:C,paymentMethod:E,notes:G.trim(),updatedAt:new Date().toISOString()};g&&e?.id?await (0,s.updateData)(`vehicle_fuel/${e.id}`,b):(b.createdAt=new Date().toISOString(),await (0,s.pushData)("vehicle_fuel",b),a&&parseInt(y)>(a.km||0)&&await (0,s.updateData)(`vehicles/${h}`,{km:parseInt(y)})),d(!1),f?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{J(!1)}};return(0,b.jsx)(w.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-lg max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-xl font-semibold",children:g?"Yakit Kaydi Duzenle":"Yakit Ekle"})}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"vehicle",children:"Arac *"}),(0,b.jsxs)(u.Select,{value:h,onValueChange:i,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Arac secin"})}),(0,b.jsx)(u.SelectContent,{children:K.map(a=>(0,b.jsx)(u.SelectItem,{value:a.id,children:a.plate},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"date",children:"Tarih *"}),(0,b.jsx)(p.Input,{id:"date",type:"date",value:j,onChange:a=>k(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"liters",children:"Litre *"}),(0,b.jsx)(p.Input,{id:"liters",type:"number",step:"0.01",value:l,onChange:a=>m(a.target.value),placeholder:"0.00"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"pricePerLiter",children:"Birim Fiyat"}),(0,b.jsx)(p.Input,{id:"pricePerLiter",type:"number",step:"0.001",value:n,onChange:a=>q(a.target.value),placeholder:"0.000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"totalAmount",children:"Toplam *"}),(0,b.jsx)(p.Input,{id:"totalAmount",type:"number",step:"0.01",value:r,onChange:a=>x(a.target.value),placeholder:"0.00",className:"font-semibold"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"km",children:"Kilometre"}),(0,b.jsx)(p.Input,{id:"km",type:"number",value:y,onChange:a=>z(a.target.value),placeholder:"0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"station",children:"Istasyon"}),(0,b.jsx)(p.Input,{id:"station",value:A,onChange:a=>B(a.target.value),placeholder:"Orn: Petrol Ofisi"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"fuelType",children:"Yakit Tipi"}),(0,b.jsxs)(u.Select,{value:C,onValueChange:D,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Yakit tipi secin"})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"diesel",children:"Dizel"}),(0,b.jsx)(u.SelectItem,{value:"gasoline",children:"Benzin"}),(0,b.jsx)(u.SelectItem,{value:"lpg",children:"LPG"}),(0,b.jsx)(u.SelectItem,{value:"electric",children:"Elektrik"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"paymentMethod",children:"Odeme"}),(0,b.jsxs)(u.Select,{value:E,onValueChange:F,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Odeme yontemi secin"})}),(0,b.jsxs)(u.SelectContent,{children:[(0,b.jsx)(u.SelectItem,{value:"cash",children:"Nakit"}),(0,b.jsx)(u.SelectItem,{value:"card",children:"Kart"}),(0,b.jsx)(u.SelectItem,{value:"company_card",children:"Firma Karti"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"notes",children:"Notlar"}),(0,b.jsx)(v.Textarea,{id:"notes",value:G,onChange:a=>H(a.target.value),placeholder:"Ek notlar...",rows:2})]})]}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>d(!1),disabled:I,children:"Iptal"}),(0,b.jsx)(o.Button,{onClick:M,disabled:I,children:I?"Kaydediliyor...":"Kaydet"})]})]})})}let C=[{value:"oil_change",label:"Yag Degisimi"},{value:"tire_change",label:"Lastik Degisimi"},{value:"brake",label:"Fren Bakimi"},{value:"filter",label:"Filtre Degisimi"},{value:"battery",label:"Aku"},{value:"timing_belt",label:"Triger Kayisi"},{value:"clutch",label:"Debriyaj"},{value:"suspension",label:"Suspensiyon"},{value:"air_conditioning",label:"Klima"},{value:"electrical",label:"Elektrik"},{value:"body_repair",label:"Kaporta"},{value:"paint",label:"Boya"},{value:"inspection",label:"Muayene"},{value:"other",label:"Diger"}];function D({open:a,onOpenChange:d,maintenanceRecord:e,onSave:f}){let g=!!e,[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)(""),[l,m]=(0,c.useState)("oil_change"),[n,q]=(0,c.useState)(""),[r,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)(""),[D,E]=(0,c.useState)(""),[F,G]=(0,c.useState)(""),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)(""),[L,M]=(0,c.useState)(!1),[N,O]=(0,c.useState)([]);(0,c.useEffect)(()=>{let a=(0,s.subscribeToData)("vehicles",a=>{if(a){let b=Object.entries(a).map(([a,b])=>({id:a,plate:b.plate||"",km:b.km||0}));b.sort((a,b)=>a.plate.localeCompare(b.plate)),O(b)}});return()=>a()},[]),(0,c.useEffect)(()=>{if(a){let a=new Date().toISOString().split("T")[0];e?(i(e.vehicleId||""),k(e.date||a),m(e.type||"oil_change"),q(e.description||""),x(String(e.cost||"")),z(String(e.km||"")),B(e.vendor||""),E(e.invoiceNo||""),G(String(e.nextServiceKm||"")),I(e.nextServiceDate||""),K(e.notes||"")):(i(""),k(a),m("oil_change"),q(""),x(""),z(""),B(""),E(""),G(""),I(""),K(""))}},[a,e]),(0,c.useEffect)(()=>{if(h&&!g){let a=N.find(a=>a.id===h);a?.km&&z(String(a.km))}},[h,N,g]);let P=async()=>{if(!h)return void alert("Lutfen arac secin!");if(!n.trim())return void alert("Lutfen aciklama girin!");if(!r||0>=parseFloat(r))return void alert("Lutfen gecerli tutar girin!");M(!0);try{let a=N.find(a=>a.id===h),b=C.find(a=>a.value===l)?.label||l,c={vehicleId:h,vehiclePlate:a?.plate||"",date:j,type:l,typeLabel:b,description:n.trim(),cost:parseFloat(r)||0,km:parseInt(y)||0,vendor:A.trim(),invoiceNo:D.trim(),nextServiceKm:parseInt(F)||null,nextServiceDate:H||null,notes:J.trim(),updatedAt:new Date().toISOString()};g&&e?.id?await (0,s.updateData)(`vehicle_maintenance/${e.id}`,c):(c.createdAt=new Date().toISOString(),await (0,s.pushData)("vehicle_maintenance",c),a&&parseInt(y)>(a.km||0)&&await (0,s.updateData)(`vehicles/${h}`,{km:parseInt(y)})),d(!1),f?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{M(!1)}};return(0,b.jsx)(w.Dialog,{open:a,onOpenChange:d,children:(0,b.jsxs)(w.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(w.DialogHeader,{children:(0,b.jsx)(w.DialogTitle,{className:"text-xl font-semibold",children:g?"Bakim Kaydi Duzenle":"Bakim Ekle"})}),(0,b.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"vehicle",children:"Arac *"}),(0,b.jsxs)(u.Select,{value:h,onValueChange:i,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Arac secin"})}),(0,b.jsx)(u.SelectContent,{children:N.map(a=>(0,b.jsx)(u.SelectItem,{value:a.id,children:a.plate},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"date",children:"Tarih *"}),(0,b.jsx)(p.Input,{id:"date",type:"date",value:j,onChange:a=>k(a.target.value)})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"type",children:"Bakim Tipi *"}),(0,b.jsxs)(u.Select,{value:l,onValueChange:m,children:[(0,b.jsx)(u.SelectTrigger,{children:(0,b.jsx)(u.SelectValue,{placeholder:"Bakim tipi secin"})}),(0,b.jsx)(u.SelectContent,{children:C.map(a=>(0,b.jsx)(u.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"cost",children:"Tutar *"}),(0,b.jsx)(p.Input,{id:"cost",type:"number",step:"0.01",value:r,onChange:a=>x(a.target.value),placeholder:"0.00",className:"font-semibold"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"description",children:"Aciklama *"}),(0,b.jsx)(p.Input,{id:"description",value:n,onChange:a=>q(a.target.value),placeholder:"Yapilan islem aciklamasi..."})]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"km",children:"Kilometre"}),(0,b.jsx)(p.Input,{id:"km",type:"number",value:y,onChange:a=>z(a.target.value),placeholder:"0"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"vendor",children:"Servis/Ustahane"}),(0,b.jsx)(p.Input,{id:"vendor",value:A,onChange:a=>B(a.target.value),placeholder:"Servis adi"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"invoiceNo",children:"Fatura No"}),(0,b.jsx)(p.Input,{id:"invoiceNo",value:D,onChange:a=>E(a.target.value),placeholder:"Fatura numarasi"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-medium text-muted-foreground border-b pb-2",children:"Sonraki Servis (Opsiyonel)"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"nextServiceKm",children:"Sonraki Servis KM"}),(0,b.jsx)(p.Input,{id:"nextServiceKm",type:"number",value:F,onChange:a=>G(a.target.value),placeholder:"Orn: 150000"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"nextServiceDate",children:"Sonraki Servis Tarihi"}),(0,b.jsx)(p.Input,{id:"nextServiceDate",type:"date",value:H,onChange:a=>I(a.target.value)})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(t.Label,{htmlFor:"notes",children:"Notlar"}),(0,b.jsx)(v.Textarea,{id:"notes",value:J,onChange:a=>K(a.target.value),placeholder:"Ek notlar, parcalar, garantiler...",rows:2})]})]}),(0,b.jsxs)(w.DialogFooter,{children:[(0,b.jsx)(o.Button,{variant:"outline",onClick:()=>d(!1),disabled:L,children:"Iptal"}),(0,b.jsx)(o.Button,{onClick:P,disabled:L,children:L?"Kaydediliyor...":"Kaydet"})]})]})})}let E={car:"Binek",truck:"Kamyon",van:"Van/Minibüs",motorcycle:"Motosiklet"},F={gasoline:"Benzin",diesel:"Dizel",lpg:"LPG",electric:"Elektrik",hybrid:"Hibrit"},G={active:{label:"Aktif",color:"bg-emerald-100 text-emerald-700"},maintenance:{label:"Bakımda",color:"bg-yellow-100 text-yellow-700"},inactive:{label:"Pasif",color:"bg-gray-100 text-gray-700"}};function H(){let a,t,[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[C,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)("vehicles"),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(!1),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(null),[W,X]=(0,c.useState)(null);(0,c.useEffect)(()=>{let a=0,b=()=>{++a>=3&&H(!1)},c=(0,s.subscribeToData)("vehicles",a=>{a?v(Object.entries(a).map(([a,b])=>({id:a,...b}))):v([]),b()}),d=(0,s.subscribeToData)("vehicle_fuel",a=>{if(a){let b=Object.entries(a).map(([a,b])=>({id:a,...b}));b.sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()),x(b)}else x([]);b()}),e=(0,s.subscribeToData)("vehicle_maintenance",a=>{if(a){let b=Object.entries(a).map(([a,b])=>({id:a,...b}));b.sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()),z(b)}else z([]);b()});return()=>{c(),d(),e()}},[]);let Y=u.filter(a=>a.plate?.toLowerCase().includes(I.toLowerCase())||a.brand?.toLowerCase().includes(I.toLowerCase())||a.model?.toLowerCase().includes(I.toLowerCase())),Z=a=>{let b=u.find(b=>b.id===a);return b?.plate||"-"},$=(a=[],t=new Date,u.forEach(b=>{b.insuranceExpiry&&new Date(b.insuranceExpiry).getTime()-t.getTime()<2592e6&&a.push({vehicle:b,type:"Sigorta",date:b.insuranceExpiry}),b.kaskoExpiry&&new Date(b.kaskoExpiry).getTime()-t.getTime()<2592e6&&a.push({vehicle:b,type:"Kasko",date:b.kaskoExpiry}),b.inspectionExpiry&&new Date(b.inspectionExpiry).getTime()-t.getTime()<2592e6&&a.push({vehicle:b,type:"Muayene",date:b.inspectionExpiry})}),a),_={total:u.length,active:u.filter(a=>"active"===a.status).length,totalFuel:w.reduce((a,b)=>a+(b.totalAmount||0),0),totalMaintenance:y.reduce((a,b)=>a+(b.cost||0),0)},aa=a=>{T(a),N(!0)},ab=async a=>{if(confirm(`"${a.plate}" aracini silmek istediginize emin misiniz?`))try{await (0,s.removeData)(`vehicles/${a.id}`)}catch(a){alert("Silme hatasi: "+a.message)}},ac=async a=>{if(confirm("Bu yakit kaydini silmek istediginize emin misiniz?"))try{await (0,s.removeData)(`vehicle_fuel/${a.id}`)}catch(a){alert("Silme hatasi: "+a.message)}},ad=async a=>{if(confirm("Bu bakim kaydini silmek istediginize emin misiniz?"))try{await (0,s.removeData)(`vehicle_maintenance/${a.id}`)}catch(a){alert("Silme hatasi: "+a.message)}};return C?(0,b.jsxs)("div",{className:"flex items-center justify-center h-96",children:[(0,b.jsx)(l.Loader2,{className:"h-8 w-8 animate-spin text-primary"}),(0,b.jsx)("span",{className:"ml-2 text-muted-foreground",children:"Yükleniyor..."})]}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Araçlar"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Araç, yakıt ve bakım yönetimi"})]}),(0,b.jsx)("div",{className:"flex items-center gap-2",children:(0,b.jsxs)(o.Button,{size:"sm",onClick:()=>{"vehicles"===K?(T(null),N(!0)):"fuel"===K?(V(null),P(!0)):(X(null),R(!0))},children:[(0,b.jsx)(d.Plus,{className:"h-4 w-4 mr-2"}),"vehicles"===K&&"Yeni Arac","fuel"===K&&"Yakit Ekle","maintenance"===K&&"Bakim Ekle"]})})]}),$.length>0&&(0,b.jsx)(n.Card,{className:"border-yellow-200 bg-yellow-50",children:(0,b.jsx)(n.CardContent,{className:"pt-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(m.AlertTriangle,{className:"h-5 w-5 text-yellow-600 mt-0.5"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-yellow-800",children:"Yaklaşan Bitiş Tarihleri"}),(0,b.jsx)("ul",{className:"mt-1 text-sm text-yellow-700",children:$.map((a,c)=>(0,b.jsxs)("li",{children:[a.vehicle.plate," - ",a.type,": ",(0,r.formatDate)(a.date)]},c))})]})]})})}),(0,b.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Toplam Araç"}),(0,b.jsx)(f.Car,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold",children:_.total})})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Aktif Araç"}),(0,b.jsx)("div",{className:"h-2 w-2 rounded-full bg-emerald-500"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:_.active})})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Toplam Yakıt"}),(0,b.jsx)(g.Fuel,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(0,r.formatCurrency)(_.totalFuel)})})]}),(0,b.jsxs)(n.Card,{children:[(0,b.jsxs)(n.CardHeader,{className:"flex flex-row items-center justify-between pb-2",children:[(0,b.jsx)(n.CardTitle,{className:"text-sm font-medium text-muted-foreground",children:"Toplam Bakım"}),(0,b.jsx)(h.Wrench,{className:"h-4 w-4 text-muted-foreground"})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(0,r.formatCurrency)(_.totalMaintenance)})})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(o.Button,{variant:"vehicles"===K?"default":"outline",onClick:()=>L("vehicles"),children:[(0,b.jsx)(f.Car,{className:"h-4 w-4 mr-2"}),"Araçlar"]}),(0,b.jsxs)(o.Button,{variant:"fuel"===K?"default":"outline",onClick:()=>L("fuel"),children:[(0,b.jsx)(g.Fuel,{className:"h-4 w-4 mr-2"}),"Yakıt"]}),(0,b.jsxs)(o.Button,{variant:"maintenance"===K?"default":"outline",onClick:()=>L("maintenance"),children:[(0,b.jsx)(h.Wrench,{className:"h-4 w-4 mr-2"}),"Bakım"]})]}),(0,b.jsx)(n.Card,{children:(0,b.jsx)(n.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"relative max-w-sm",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,b.jsx)(p.Input,{type:"search",placeholder:"Plaka veya marka ara...",value:I,onChange:a=>J(a.target.value),className:"pl-9"})]})})}),(0,b.jsx)(n.Card,{children:(0,b.jsxs)(n.CardContent,{className:"pt-6",children:["vehicles"===K&&(0,b.jsxs)(q.Table,{children:[(0,b.jsx)(q.TableHeader,{children:(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableHead,{children:"Plaka"}),(0,b.jsx)(q.TableHead,{children:"Marka/Model"}),(0,b.jsx)(q.TableHead,{children:"Yıl"}),(0,b.jsx)(q.TableHead,{children:"Tip"}),(0,b.jsx)(q.TableHead,{children:"Yakıt"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"KM"}),(0,b.jsx)(q.TableHead,{children:"Durum"}),(0,b.jsx)(q.TableHead,{className:"w-[100px]",children:"İşlem"})]})}),(0,b.jsx)(q.TableBody,{children:0===Y.length?(0,b.jsx)(q.TableRow,{children:(0,b.jsxs)(q.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,b.jsx)(f.Car,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Araç bulunamadı"})]})}):Y.map(a=>(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableCell,{className:"font-medium",children:a.plate}),(0,b.jsxs)(q.TableCell,{children:[a.brand," ",a.model]}),(0,b.jsx)(q.TableCell,{children:a.year}),(0,b.jsx)(q.TableCell,{children:E[a.type]||a.type}),(0,b.jsx)(q.TableCell,{children:F[a.fuelType]||a.fuelType}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono",children:a.km?.toLocaleString()||"-"}),(0,b.jsx)(q.TableCell,{children:(0,b.jsx)("span",{className:`inline-flex items-center rounded-full px-2 py-1 text-xs font-medium ${G[a.status]?.color||"bg-gray-100"}`,children:G[a.status]?.label||a.status})}),(0,b.jsx)(q.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>aa(a),children:(0,b.jsx)(k.Eye,{className:"h-4 w-4"})}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>aa(a),children:(0,b.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>ab(a),children:(0,b.jsx)(j.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]}),"fuel"===K&&(0,b.jsxs)(q.Table,{children:[(0,b.jsx)(q.TableHeader,{children:(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableHead,{children:"Tarih"}),(0,b.jsx)(q.TableHead,{children:"Plaka"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"Litre"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"Birim Fiyat"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"Toplam"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"KM"}),(0,b.jsx)(q.TableHead,{children:"Istasyon"}),(0,b.jsx)(q.TableHead,{className:"w-[100px]",children:"Islem"})]})}),(0,b.jsx)(q.TableBody,{children:0===w.length?(0,b.jsx)(q.TableRow,{children:(0,b.jsxs)(q.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,b.jsx)(g.Fuel,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Yakit kaydi bulunamadi"})]})}):w.map(a=>(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableCell,{children:(0,r.formatDate)(a.date)}),(0,b.jsx)(q.TableCell,{className:"font-medium",children:Z(a.vehicleId)}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono",children:a.liters?.toFixed(2)}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono",children:(0,r.formatCurrency)(a.pricePerLiter||0)}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono font-medium",children:(0,r.formatCurrency)(a.totalAmount||0)}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono",children:a.km?.toLocaleString()}),(0,b.jsx)(q.TableCell,{children:a.station||"-"}),(0,b.jsx)(q.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{V(a),P(!0)},children:(0,b.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>ac(a),children:(0,b.jsx)(j.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]}),"maintenance"===K&&(0,b.jsxs)(q.Table,{children:[(0,b.jsx)(q.TableHeader,{children:(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableHead,{children:"Tarih"}),(0,b.jsx)(q.TableHead,{children:"Plaka"}),(0,b.jsx)(q.TableHead,{children:"Tip"}),(0,b.jsx)(q.TableHead,{children:"Aciklama"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"Tutar"}),(0,b.jsx)(q.TableHead,{className:"text-right",children:"KM"}),(0,b.jsx)(q.TableHead,{children:"Servis"}),(0,b.jsx)(q.TableHead,{className:"w-[100px]",children:"Islem"})]})}),(0,b.jsx)(q.TableBody,{children:0===y.length?(0,b.jsx)(q.TableRow,{children:(0,b.jsxs)(q.TableCell,{colSpan:8,className:"text-center py-12",children:[(0,b.jsx)(h.Wrench,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium",children:"Bakim kaydi bulunamadi"})]})}):y.map(a=>(0,b.jsxs)(q.TableRow,{children:[(0,b.jsx)(q.TableCell,{children:(0,r.formatDate)(a.date)}),(0,b.jsx)(q.TableCell,{className:"font-medium",children:Z(a.vehicleId)}),(0,b.jsx)(q.TableCell,{children:a.type}),(0,b.jsx)(q.TableCell,{className:"max-w-[200px] truncate",children:a.description||"-"}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono font-medium",children:(0,r.formatCurrency)(a.cost||0)}),(0,b.jsx)(q.TableCell,{className:"text-right font-mono",children:a.km?.toLocaleString()}),(0,b.jsx)(q.TableCell,{children:a.vendor||"-"}),(0,b.jsx)(q.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{X(a),R(!0)},children:(0,b.jsx)(i.Edit,{className:"h-4 w-4"})}),(0,b.jsx)(o.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive",onClick:()=>ad(a),children:(0,b.jsx)(j.Trash2,{className:"h-4 w-4"})})]})})]},a.id))})]})]})}),(0,b.jsx)(A,{open:M,onOpenChange:N,vehicle:S}),(0,b.jsx)(B,{open:O,onOpenChange:P,fuelRecord:U}),(0,b.jsx)(D,{open:Q,onOpenChange:R,maintenanceRecord:W})]})}a.s(["default",()=>H],29708)}];

//# sourceMappingURL=src_app_dashboard_vehicles_page_tsx_d159be6b._.js.map