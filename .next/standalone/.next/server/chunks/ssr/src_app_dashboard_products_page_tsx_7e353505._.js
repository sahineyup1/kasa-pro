module.exports=[46120,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(99570),e=a.i(66718),f=a.i(80701),g=a.i(6015),h=a.i(35732),i=a.i(29258),j=a.i(70430),k=a.i(29246),l=a.i(15055),m=a.i(14574),n=a.i(75083),o=a.i(96221),p=a.i(15618),q=a.i(81560),r=a.i(83497),s=a.i(73237),t=a.i(73570),u=a.i(16201);let v={"Et ve Et Urunleri":{rate:9.5,description:"Dana, kuzu, sigir, tavuk vb. et urunleri"},Sarkuteri:{rate:9.5,description:"Sosis, sucuk, salam, jambon vb."},"Sut Urunleri":{rate:9.5,description:"Sut, peynir, yogurt, tereyagi vb."},"Ekmek ve Firin Urunleri":{rate:9.5,description:"Ekmek, pasta, kek, unlu mamuller"},"Meyve ve Sebze":{rate:9.5,description:"Taze, dondurulmus, konserve meyve/sebze"},"Baklagiller ve Tahillar":{rate:9.5,description:"Mercimek, nohut, pirinc, bulgur vb."},"Yaglar ve Soslar":{rate:9.5,description:"Zeytinyagi, aycicek yagi, sos, ketcap vb."},"Sekersiz Icecekler":{rate:9.5,description:"Su, mineralli su, meyve suyu (sekersiz)"},"Tarimsal Urunler":{rate:9.5,description:"Tohum, gubre, tarim ekipmanlari"},"Hasta Mamasi ve Diyet Urunleri":{rate:9.5,description:"Bebek mamasi, tibbi gidalar"},"Temel Gidalar":{rate:9.5,description:"Temel gida maddeleri, un, seker"},"Alkollu Icecekler":{rate:22,description:"Bira, sarap, votka, raki vb."},"Sekerli Icecekler":{rate:22,description:"Kola, gazoz, enerji icecegi"},"Temizlik Urunleri":{rate:22,description:"Deterjan, sabun, sampuan"},Kirtasiye:{rate:22,description:"Defter, kalem, dosya, ofis malzemeleri"},Elektronik:{rate:22,description:"Telefon, bilgisayar, TV, beyaz esya"},Giyim:{rate:22,description:"Kiyafet, ayakkabi, aksesuar"},"Ev Esyalari":{rate:22,description:"Mobilya, dekorasyon, mutfak esyalari"},Kozmetik:{rate:22,description:"Makyaj malzemeleri, parfum"},"Oyuncak ve Hobiler":{rate:22,description:"Oyuncaklar, spor malzemeleri"},Diger:{rate:22,description:"Diger standart DDV'ye tabi urunler"},"Kitap ve Yayinlar":{rate:5,description:"Basili kitaplar, e-kitaplar, gazeteler"},"Egitim Materyalleri":{rate:5,description:"Ders kitaplari, egitim yazilimlari"},"Ilac ve Tibbi Malzemeler":{rate:0,description:"Receteli ilaclar, tibbi cihazlar"},"Ihracat ve AB Ici Tedarik":{rate:0,description:"Disa satis, AB ici ticaret"}},w=[{value:"adet",label:"Adet"},{value:"kg",label:"Kilogram (kg)"},{value:"g",label:"Gram (g)"},{value:"lt",label:"Litre (lt)"},{value:"ml",label:"Mililitre (ml)"},{value:"paket",label:"Paket"},{value:"kutu",label:"Kutu"},{value:"m",label:"Metre (m)"}],x=[{value:"both",label:"Her Ikisi"},{value:"market",label:"Market"},{value:"kasap",label:"Kasap"}];function y(a,b,c,d){if(!a)return d;let e=a;for(let a of b)if(e&&"object"==typeof e&&a in e)e=e[a];else{e=void 0;break}if(null!=e)return e;let f=a[c];return null!=f?f:d}function z({errors:a,warnings:c}){return 0===a.length&&0===c.length?(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-green-50 border border-green-200 rounded-lg",children:[(0,b.jsx)(u.CheckCircle,{className:"h-4 w-4 text-green-600"}),(0,b.jsx)("span",{className:"text-sm text-green-700",children:"Hazir"})]}):(0,b.jsxs)("div",{className:"space-y-2",children:[a.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 border border-red-200 rounded-lg",children:[(0,b.jsx)(t.AlertTriangle,{className:"h-4 w-4 text-red-600"}),(0,b.jsx)("span",{className:"text-sm text-red-700",children:a})]},`err-${c}`)),c.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-amber-50 border border-amber-200 rounded-lg",children:[(0,b.jsx)(t.AlertTriangle,{className:"h-4 w-4 text-amber-600"}),(0,b.jsx)("span",{className:"text-sm text-amber-700",children:a})]},`warn-${c}`))]})}function A({open:a,onOpenChange:g,product:h,onSave:t}){let u=!!h,[A,B]=(0,c.useState)(""),[C,D]=(0,c.useState)(""),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)("both"),[M,N]=(0,c.useState)(""),[O,P]=(0,c.useState)(""),[Q,R]=(0,c.useState)(!0),[S,T]=(0,c.useState)(""),[U,V]=(0,c.useState)({}),[W,X]=(0,c.useState)(""),[Y,Z]=(0,c.useState)("alternative"),[$,_]=(0,c.useState)(!1),[aa,ab]=(0,c.useState)(""),[ac,ad]=(0,c.useState)("12"),[ae,af]=(0,c.useState)(""),[ag,ah]=(0,c.useState)("9.5"),[ai,aj]=(0,c.useState)("EUR"),[ak,al]=(0,c.useState)(40),[am,an]=(0,c.useState)({}),[ao,ap]=(0,c.useState)("adet"),[aq,ar]=(0,c.useState)({}),[as,at]=(0,c.useState)(""),[au,av]=(0,c.useState)(""),[aw,ax]=(0,c.useState)(""),[ay,az]=(0,c.useState)("2"),[aA,aB]=(0,c.useState)("10"),[aC,aD]=(0,c.useState)(!1),[aE,aF]=(0,c.useState)(!1),[aG,aH]=(0,c.useState)("Slovenia"),[aI,aJ]=(0,c.useState)(""),[aK,aL]=(0,c.useState)(""),[aM,aN]=(0,c.useState)(""),[aO,aP]=(0,c.useState)(""),[aQ,aR]=(0,c.useState)(!1),[aS,aT]=(0,c.useState)(!1),[aU,aV]=(0,c.useState)(!1),[aW,aX]=(0,c.useState)([]),[aY,aZ]=(0,c.useState)([]),[a$,a_]=(0,c.useState)([]),[a0,a1]=(0,c.useState)(!1),[a2,a3]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let a=(0,i.subscribeToFirestore)("suppliers",a=>{aX(a||[])}),b=(0,i.subscribeToFirestore)("branches",a=>{aZ(a||[])}),c=(0,i.subscribeToFirestore)("subcategories",a=>{if(G&&a){let b=a.find(a=>a.id===G||a.categoryName===G);b?.subcategories?a_(b.subcategories):a_([])}});return()=>{a(),b(),c()}},[G]),(0,c.useEffect)(()=>{if(aY.length>0&&0===Object.keys(am).length){let a={},b={};aY.forEach(c=>{"warehouse"!==c.type&&(a[c.id]={unitPrice:"",casePrice:""}),b[c.id]={currentStock:"0",minStock:"10",location:""}}),an(a),ar(b)}},[aY]),(0,c.useEffect)(()=>{G&&v[G]&&ah(v[G].rate.toString())},[G]);let a4=(0,c.useMemo)(()=>{let a=[],b=[];return A.trim()||a.push("Urun adi zorunlu"),G||a.push("Kategori secilmeli"),S.trim()||a.push("Ana barkod zorunlu"),(!ae||0>=parseFloat(ae))&&a.push("Maliyet fiyati 0'dan buyuk olmali"),["Et ve Et Urunleri","Sarkuteri"].includes(G)&&(aG.trim()||b.push("Et urunleri icin mensei onerilir"),aC||b.push("Helal sertifikasi onerilir")),{errors:a,warnings:b,isValid:0===a.length}},[A,G,S,ae,aG,aC]),a5=(0,c.useMemo)(()=>{let a=parseFloat(ae)||0;return a<=0?0:a/(1-ak/100)},[ae,ak]),a6=(0,c.useMemo)(()=>a5-(parseFloat(ae)||0),[a5,ae]);(0,c.useEffect)(()=>{if(a)if(h){B(y(h,["basic","name"],"name","")),D(y(h,["basic","sku"],"sku","")),F(y(h,["basic","description"],"description","")),H(y(h,["basic","category"],"category","")),J(y(h,["basic","subcategory"],"subcategory","")),L(y(h,["basic","targetCustomer"],"targetCustomer","both")),N(y(h,["basic","brand"],"brand","")),P(y(h,["basic","manufacturer"],"manufacturer","")),R(y(h,["audit","isActive"],"isActive",!0)),T(y(h,["barcodes","mainBarcode"],"barcode","")),V(y(h,["barcodes","alternativeBarcodes"],"alternativeBarcodes",{}));let a=y(h,["barcodes","caseBarcode"],"caseBarcode",{enabled:!1});_(a?.enabled||!1),ab(a?.barcode||""),ad(String(a?.caseQuantity||12)),af(String(y(h,["pricing","baseCost"],"cost","")||"")),ah(String(y(h,["pricing","vatRate"],"vatRate",9.5))),aj(y(h,["pricing","currency"],"currency","EUR")),ap(y(h,["stock","unit"],"unit","adet")),at(y(h,["supplier","supplierId"],"supplierId","")),av(y(h,["supplier","supplierName"],"supplierName","")),ax(y(h,["supplier","supplierSKU"],"supplierSKU","")),az(String(y(h,["supplier","leadTime"],"leadTime",2))),aB(String(y(h,["supplier","minOrderQty"],"minOrderQty",10))),aD(y(h,["compliance","halalCertified"],"halalCertified",!1)),aF(y(h,["compliance","animalWelfare"],"animalWelfare",!1)),aH(y(h,["compliance","origin"],"origin","Slovenia")),aJ(y(h,["compliance","slaughterhouseId"],"slaughterhouseId","")),aL(y(h,["compliance","veterinaryCertificate"],"veterinaryCertificate","")),aN(y(h,["declaration","si"],"declarationSI","")),aP(y(h,["declaration","en"],"declarationEN","")),aR(y(h,["tracking","allowNegativeStock"],"allowNegativeStock",!1)),aT(y(h,["tracking","trackLots"],"trackLots",!1)),aV(y(h,["tracking","trackExpiry"],"trackExpiry",!1));let b=y(h,["pricing","branchPricing"],"branchPricing",{}),c=y(h,["stock","branchStock"],"branchStock",{}),d={},e={};Object.entries(b).forEach(([a,b])=>{d[a]={unitPrice:String(b?.unitPrice||""),casePrice:String(b?.casePrice||"")}}),Object.entries(c).forEach(([a,b])=>{e[a]={currentStock:String(b?.currentStock||0),minStock:String(b?.minStock||10),location:b?.location||""}}),Object.keys(d).length>0&&an(d),Object.keys(e).length>0&&ar(e)}else B(""),D(""),F(""),H(""),J(""),L("both"),N(""),P(""),R(!0),T(""),V({}),X(""),_(!1),ab(""),ad("12"),af(""),ah("9.5"),aj("EUR"),al(40),an({}),ap("adet"),ar({}),at(""),av(""),ax(""),az("2"),aB("10"),aD(!1),aF(!1),aH("Slovenia"),aJ(""),aL(""),aN(""),aP(""),aR(!1),aT(!1),aV(!1),a3(!1)},[a,h]);let a7=async()=>{if(!a4.isValid)return void alert("Lutfen tum zorunlu alanlari doldurun!");a1(!0);try{let a={};Object.entries(am).forEach(([b,c])=>{let d=parseFloat(c.unitPrice)||0,e=parseFloat(c.casePrice)||0,f=parseFloat(ae)||0;a[b]={unitPrice:d,casePrice:e,markup:parseFloat((f>0?d/f:1).toFixed(2)),promotionPrice:null,promotionActive:!1}});let b={},c=0;Object.entries(aq).forEach(([a,d])=>{let e=parseFloat(d.currentStock)||0,f=parseFloat(d.minStock)||10;c+=e,b[a]={currentStock:e,minStock:f,maxStock:10*f,location:d.location,lastUpdate:new Date().toISOString(),reorderPoint:f,reorderQty:2*f}});let d={basic:{name:A.trim(),sku:C.trim()||S.trim(),description:E.trim(),category:G,subcategory:I,targetCustomer:K,brand:M.trim(),manufacturer:O.trim()},barcodes:{mainBarcode:S.trim(),alternativeBarcodes:U,caseBarcode:$?{barcode:aa.trim(),caseQuantity:parseInt(ac)||12,enabled:!0}:{enabled:!1}},pricing:{baseCost:parseFloat(ae)||0,vatRate:parseFloat(ag)||9.5,currency:ai,branchPricing:a},stock:{unit:ao,totalStock:c,branchStock:b},supplier:{supplierId:as,supplierName:au.trim(),supplierSKU:aw.trim(),leadTime:parseInt(ay)||2,minOrderQty:parseInt(aA)||10,lastPurchasePrice:parseFloat(ae)||0,lastPurchaseDate:new Date().toISOString(),preferredSupplier:!0},compliance:{halalCertified:aC,animalWelfare:aE,origin:aG.trim(),slaughterhouseId:aI.trim(),veterinaryCertificate:aK.trim(),allergens:[]},declaration:{si:aM.trim(),en:aO.trim()},tracking:{trackInventory:!0,batchTracking:aS,expiryTracking:aU,serialTracking:!1,allowNegativeStock:aQ,allowBackorder:!1},audit:{isActive:Q,updatedAt:new Date().toISOString()}};u&&h?.id?await (0,i.updateFirestoreData)("products",h.id,d):await (0,i.addFirestoreData)("products",{...d,audit:{...d.audit,createdAt:new Date().toISOString()}}),g(!1),t?.()}catch(a){console.error("Save error:",a),alert("Kaydetme hatasi: "+a.message)}finally{a1(!1)}},a8=Object.keys(v),a9=aY.find(a=>"warehouse"===a.type),ba=aY.filter(a=>"warehouse"!==a.type);return(0,b.jsx)(m.Dialog,{open:a,onOpenChange:g,children:(0,b.jsxs)(m.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsxs)(m.DialogHeader,{className:"border-b pb-4",children:[(0,b.jsx)(m.DialogTitle,{className:"text-xl font-semibold",children:u?"Urun Duzenle":"Yeni Urun Ekle"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:u?"Urun bilgilerini guncelleyin":"Yeni urun eklemek icin formu doldurun"})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,b.jsxs)(n.Tabs,{defaultValue:"basic",className:"w-full",children:[(0,b.jsxs)(n.TabsList,{className:"grid w-full grid-cols-4 mb-4",children:[(0,b.jsx)(n.TabsTrigger,{value:"basic",children:"Temel Bilgiler"}),(0,b.jsx)(n.TabsTrigger,{value:"pricing",children:"Fiyat & Stok"}),(0,b.jsx)(n.TabsTrigger,{value:"supplier",children:"Tedarik & Barkod"}),(0,b.jsx)(n.TabsTrigger,{value:"compliance",children:"Uyumluluk"})]}),(0,b.jsx)(n.TabsContent,{value:"basic",className:"space-y-4",children:(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"name",children:"Urun Adi *"}),(0,b.jsx)(e.Input,{id:"name",value:A,onChange:a=>B(a.target.value),placeholder:"Orn: Kuzu Kiyma",className:A.trim()?"":"border-red-300"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"category",children:"Ust Kategori *"}),(0,b.jsxs)(f.Select,{value:G,onValueChange:H,children:[(0,b.jsx)(f.SelectTrigger,{className:G?"":"border-red-300",children:(0,b.jsx)(f.SelectValue,{placeholder:"Kategori secin"})}),(0,b.jsx)(f.SelectContent,{className:"max-h-[300px]",children:a8.map(a=>{let c=v[a];return(0,b.jsx)(f.SelectItem,{value:a,children:(0,b.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,b.jsx)("span",{children:a}),(0,b.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["%",c.rate]})]})},a)})})]}),G&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["DDV: %",v[G]?.rate," - ",v[G]?.description]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"subcategory",children:"Alt Kategori"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(f.Select,{value:I,onValueChange:J,disabled:!G,children:[(0,b.jsx)(f.SelectTrigger,{className:"flex-1",children:(0,b.jsx)(f.SelectValue,{placeholder:"Alt kategori secin"})}),(0,b.jsx)(f.SelectContent,{children:a$.map(a=>(0,b.jsx)(f.SelectItem,{value:a,children:a},a))})]}),(0,b.jsx)(d.Button,{variant:"outline",size:"icon",disabled:!G,children:(0,b.jsx)(p.Plus,{className:"h-4 w-4"})})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Hedef Musteri"}),(0,b.jsx)("div",{className:"flex gap-2",children:x.map(a=>(0,b.jsxs)(d.Button,{type:"button",variant:K===a.value?"default":"outline",size:"sm",onClick:()=>L(a.value),className:"flex-1",children:["market"===a.value&&"ðŸª ","kasap"===a.value&&"ðŸ¥© ","both"===a.value&&"ðŸ”„ ",a.label]},a.value))})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"sku",children:"SKU / Stok Kodu"}),(0,b.jsx)(e.Input,{id:"sku",value:C,onChange:a=>D(a.target.value),placeholder:"Orn: KM-001"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"brand",children:"Marka"}),(0,b.jsx)(e.Input,{id:"brand",value:M,onChange:a=>N(a.target.value),placeholder:"Marka adi"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"manufacturer",children:"Uretici"}),(0,b.jsx)(e.Input,{id:"manufacturer",value:O,onChange:a=>P(a.target.value),placeholder:"Uretici firma"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"description",children:"Aciklama"}),(0,b.jsx)(k.Textarea,{id:"description",value:E,onChange:a=>F(a.target.value),placeholder:"Urun hakkinda ek bilgiler...",rows:3})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 pt-2",children:[(0,b.jsx)(l.Checkbox,{id:"isActive",checked:Q,onCheckedChange:a=>R(a)}),(0,b.jsx)(j.Label,{htmlFor:"isActive",className:"font-normal",children:"Aktif Urun"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)(j.Label,{children:"Urun Fotografi"}),(0,b.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center",children:[(0,b.jsx)(r.Package,{className:"h-16 w-16 mx-auto text-gray-400 mb-4"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"Foto yukleme icin tiklayiniz"}),(0,b.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"PNG, JPG (max 2MB)"})]})]})]})}),(0,b.jsxs)(n.TabsContent,{value:"pricing",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ’°"})," Fiyatlandirma"]}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"baseCost",children:"Maliyet Fiyati (EUR) *"}),(0,b.jsx)(e.Input,{id:"baseCost",type:"number",step:"0.01",value:ae,onChange:a=>af(a.target.value),placeholder:"0.00",className:!ae||0>=parseFloat(ae)?"border-red-300":""})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"vatRate",children:"DDV Orani"}),(0,b.jsxs)(f.Select,{value:ag,onValueChange:ah,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"0",children:"%0 (Muaf)"}),(0,b.jsx)(f.SelectItem,{value:"5",children:"%5 (Super Indirimli)"}),(0,b.jsx)(f.SelectItem,{value:"9.5",children:"%9.5 (Indirimli)"}),(0,b.jsx)(f.SelectItem,{value:"22",children:"%22 (Standart)"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"currency",children:"Para Birimi"}),(0,b.jsxs)(f.Select,{value:ai,onValueChange:aj,children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"EUR",children:"EUR (â‚¬)"}),(0,b.jsx)(f.SelectItem,{value:"USD",children:"USD ($)"}),(0,b.jsx)(f.SelectItem,{value:"TRY",children:"TRY (â‚º)"})]})]})]})]}),(0,b.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,b.jsxs)("h5",{className:"font-medium text-blue-800 flex items-center gap-2",children:[(0,b.jsx)(s.Calculator,{className:"h-4 w-4"}),"Akilli Fiyat Hesaplayici"]}),(0,b.jsx)(d.Button,{variant:"outline",size:"sm",onClick:()=>a3(!a2),children:a2?"Gizle":"Goster"})]}),a2&&(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"flex items-center justify-between",children:(0,b.jsxs)(j.Label,{children:["Kar Marji: %",ak]})}),(0,b.jsx)("input",{type:"range",min:"10",max:"100",value:ak,onChange:a=>al(parseInt(a.target.value)),className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-gray-500",children:[(0,b.jsx)("span",{children:"%10 (Dusuk)"}),(0,b.jsx)("span",{children:"%40 (Orta)"}),(0,b.jsx)("span",{children:"%100 (Yuksek)"})]})]}),parseFloat(ae)>0&&(0,b.jsxs)("div",{className:"bg-white rounded-lg p-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsx)("span",{children:"Maliyet:"}),(0,b.jsxs)("span",{children:["â‚¬",parseFloat(ae).toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,b.jsxs)("span",{children:["Kar Marji (",ak,"%):"]}),(0,b.jsxs)("span",{className:"text-green-600",children:["â‚¬",a6.toFixed(2)]})]}),(0,b.jsxs)("div",{className:"border-t pt-2 flex justify-between font-semibold",children:[(0,b.jsx)("span",{children:"Onerilen Satis Fiyati:"}),(0,b.jsxs)("span",{className:"text-blue-600 text-lg",children:["â‚¬",a5.toFixed(2)]})]}),(0,b.jsx)(d.Button,{className:"w-full mt-2",onClick:()=>{let a={...am};Object.keys(a).forEach(b=>{a[b].unitPrice=a5.toFixed(2)}),an(a),a3(!1)},disabled:0===ba.length,children:"Tum Subelere Uygula"})]})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(j.Label,{children:"Sube Fiyatlari"}),ba.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 rounded-lg p-3",children:[(0,b.jsxs)("span",{className:"font-medium w-40",children:["butcher"===a.type?"ðŸ¥©":"ðŸª"," ",a.name]}),(0,b.jsxs)("div",{className:"flex-1 flex gap-3",children:[(0,b.jsx)(e.Input,{type:"number",step:"0.01",placeholder:"Birim fiyat",value:am[a.id]?.unitPrice||"",onChange:b=>an({...am,[a.id]:{...am[a.id],unitPrice:b.target.value}}),className:"flex-1"}),(0,b.jsx)(e.Input,{type:"number",step:"0.01",placeholder:"Kutu fiyat",value:am[a.id]?.casePrice||"",onChange:b=>an({...am,[a.id]:{...am[a.id],casePrice:b.target.value}}),className:"flex-1"})]})]},a.id))]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ“¦"})," Stok Ayarlari"]}),(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,b.jsx)("strong",{children:"Bilgi:"})," Urun stoku sadece Merkez Depo'ya girilebilir. Subelere dagitim transfer sistemi ile yapilir."]})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"unit",children:"Birim"}),(0,b.jsxs)(f.Select,{value:ao,onValueChange:ap,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[200px]",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsx)(f.SelectContent,{children:w.map(a=>(0,b.jsx)(f.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),a9&&(0,b.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-3",children:[(0,b.jsx)(j.Label,{className:"text-green-800 font-semibold",children:"ðŸ­ Merkez Depo Stoku"}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(e.Input,{type:"number",step:"0.1",placeholder:"Mevcut stok",value:aq[a9.id]?.currentStock||"0",onChange:a=>ar({...aq,[a9.id]:{...aq[a9.id],currentStock:a.target.value}}),className:"flex-1"}),(0,b.jsx)(e.Input,{type:"number",step:"0.1",placeholder:"Min stok",value:aq[a9.id]?.minStock||"10",onChange:a=>ar({...aq,[a9.id]:{...aq[a9.id],minStock:a.target.value}}),className:"flex-1"}),(0,b.jsx)(e.Input,{placeholder:"Konum/Raf",value:aq[a9.id]?.location||"",onChange:a=>ar({...aq,[a9.id]:{...aq[a9.id],location:a.target.value}}),className:"flex-1"})]})]}),ba.length>0&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{className:"text-gray-600",children:"Sube Stoklari (Sadece Goruntuleme)"}),ba.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 rounded-lg p-3",children:[(0,b.jsxs)("span",{className:"font-medium w-40 text-gray-600",children:["butcher"===a.type?"ðŸ¥©":"ðŸª"," ",a.name]}),(0,b.jsx)(e.Input,{type:"number",placeholder:"Stok",value:aq[a.id]?.currentStock||"0",disabled:!u,className:"flex-1 bg-gray-100"}),(0,b.jsx)(e.Input,{type:"number",placeholder:"Min",value:aq[a.id]?.minStock||"10",onChange:b=>ar({...aq,[a.id]:{...aq[a.id],minStock:b.target.value}}),className:"flex-1"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 italic",children:"Transfer ile"})]},a.id))]}),(0,b.jsxs)("div",{className:"space-y-3 pt-4",children:[(0,b.jsx)(j.Label,{children:"Stok Izleme Secenekleri"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"allowNegativeStock",checked:aQ,onCheckedChange:a=>aR(a)}),(0,b.jsx)(j.Label,{htmlFor:"allowNegativeStock",className:"font-normal",children:"Negatif stoka izin ver"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"trackLots",checked:aS,onCheckedChange:a=>aT(a)}),(0,b.jsx)(j.Label,{htmlFor:"trackLots",className:"font-normal",children:"Lot/Parti numarasi takibi"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"trackExpiry",checked:aU,onCheckedChange:a=>aV(a)}),(0,b.jsx)(j.Label,{htmlFor:"trackExpiry",className:"font-normal",children:"Son kullanma tarihi takibi"})]})]})]})]})]}),(0,b.jsxs)(n.TabsContent,{value:"supplier",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ”¢"})," Barkod Bilgileri"]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"mainBarcode",children:"Ana Barkod *"}),(0,b.jsx)(e.Input,{id:"mainBarcode",value:S,onChange:a=>T(a.target.value),placeholder:"8, 12, 13 veya 14 haneli barkod",className:`font-mono ${!S.trim()?"border-red-300":""}`}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Standart: EAN-13 (13 hane), EAN-8 (8 hane), UPC (12 hane)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{children:"Alternatif Barkodlar"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Input,{value:W,onChange:a=>X(a.target.value),placeholder:"Alternatif barkod",className:"flex-1 font-mono"}),(0,b.jsxs)(f.Select,{value:Y,onValueChange:Z,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[140px]",children:(0,b.jsx)(f.SelectValue,{})}),(0,b.jsxs)(f.SelectContent,{children:[(0,b.jsx)(f.SelectItem,{value:"alternative",children:"Alternatif"}),(0,b.jsx)(f.SelectItem,{value:"supplier",children:"Tedarikci"}),(0,b.jsx)(f.SelectItem,{value:"internal",children:"Dahili"})]})]}),(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{if(W.trim()){if(U[W])return void alert("Bu barkod zaten ekli!");V({...U,[W]:{type:Y,enabled:!0}}),X("")}},children:(0,b.jsx)(p.Plus,{className:"h-4 w-4"})})]}),Object.entries(U).length>0&&(0,b.jsx)("div",{className:"space-y-1 mt-2",children:Object.entries(U).map(([a,c])=>(0,b.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 rounded px-3 py-2",children:[(0,b.jsx)("span",{className:"font-mono flex-1",children:a}),(0,b.jsxs)("span",{className:"text-xs text-gray-500",children:["(",c.type,")"]}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{let b;return b={...U},void(delete b[a],V(b))},children:(0,b.jsx)(q.Trash2,{className:"h-3 w-3 text-red-500"})})]},a))})]}),(0,b.jsxs)("div",{className:"space-y-3 border rounded-lg p-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"caseEnabled",checked:$,onCheckedChange:a=>_(a)}),(0,b.jsx)(j.Label,{htmlFor:"caseEnabled",className:"font-medium",children:"ðŸ“¦ Kutu barkodu kullan"})]}),$&&(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4 pt-2",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"caseBarcode",children:"Kutu Barkodu"}),(0,b.jsx)(e.Input,{id:"caseBarcode",value:aa,onChange:a=>ab(a.target.value),placeholder:"Kutu barkodu",className:"font-mono"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"caseQuantity",children:"Kutu Icindeki Adet"}),(0,b.jsx)(e.Input,{id:"caseQuantity",type:"number",value:ac,onChange:a=>ad(a.target.value),min:"1"})]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ­"})," Tedarikci Bilgileri"]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"supplier",children:"Tedarikci"}),(0,b.jsxs)(f.Select,{value:as,onValueChange:a=>{at(a);let b=aW.find(b=>b.id===a);b&&av(b.basic?.name||b.name||"")},children:[(0,b.jsx)(f.SelectTrigger,{children:(0,b.jsx)(f.SelectValue,{placeholder:"Tedarikci secin"})}),(0,b.jsx)(f.SelectContent,{children:aW.map(a=>(0,b.jsx)(f.SelectItem,{value:a.id,children:a.basic?.name||a.name||a.id},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"supplierSKU",children:"Tedarikci Stok Kodu"}),(0,b.jsx)(e.Input,{id:"supplierSKU",value:aw,onChange:a=>ax(a.target.value),placeholder:"Tedarikcinin verdigi kod"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"leadTime",children:"Teslimat Suresi"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(e.Input,{id:"leadTime",type:"number",value:ay,onChange:a=>az(a.target.value),min:"0",className:"flex-1"}),(0,b.jsx)("span",{className:"flex items-center text-gray-500",children:"gun"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"minOrderQty",children:"Min. Siparis Miktari"}),(0,b.jsx)(e.Input,{id:"minOrderQty",type:"number",value:aA,onChange:a=>aB(a.target.value),min:"1"})]})]})]})]}),(0,b.jsxs)(n.TabsContent,{value:"compliance",className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ¥©"})," Et Urunleri Uyumlulugu"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"halalCertified",checked:aC,onCheckedChange:a=>aD(a)}),(0,b.jsx)(j.Label,{htmlFor:"halalCertified",className:"font-normal",children:"âœ… Helal Sertifikali"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(l.Checkbox,{id:"animalWelfare",checked:aE,onCheckedChange:a=>aF(a)}),(0,b.jsx)(j.Label,{htmlFor:"animalWelfare",className:"font-normal",children:"ðŸ„ Hayvan Refahi Standartlarina Uygun"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"origin",children:"Mensei *"}),(0,b.jsx)(e.Input,{id:"origin",value:aG,onChange:a=>aH(a.target.value),placeholder:"Orn: Slovenia, Turkey, Germany"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"slaughterhouseId",children:"Kesimhane ID"}),(0,b.jsx)(e.Input,{id:"slaughterhouseId",value:aI,onChange:a=>aJ(a.target.value),placeholder:"Kesimhane kimlik no"})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"vetCertificate",children:"Veteriner Sertifika No"}),(0,b.jsx)(e.Input,{id:"vetCertificate",value:aK,onChange:a=>aL(a.target.value),placeholder:"Sertifika numarasi"})]}),(0,b.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,b.jsxs)("p",{className:"text-sm text-blue-800",children:["ðŸ’¡ Et urunleri icin mensei ve helal sertifikasi onerilir.",(0,b.jsx)("br",{}),"ðŸ‡ªðŸ‡º AB standartlarina uygunluk zorunludur."]})})]}),(0,b.jsxs)("div",{className:"space-y-4 border-t pt-6",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-lg",children:"ðŸ“œ"})," Deklarasyon"]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"declarationSI",children:"ðŸ‡¸ðŸ‡® Slovence Deklarasyon"}),(0,b.jsx)(k.Textarea,{id:"declarationSI",value:aM,onChange:a=>aN(a.target.value),placeholder:"Sveze mlet ovcje meso. Hraniti pri 0-4Â°C. Uporabiti v 5 dneh.",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(j.Label,{htmlFor:"declarationEN",children:"ðŸ‡¬ðŸ‡§ English Declaration (Optional)"}),(0,b.jsx)(k.Textarea,{id:"declarationEN",value:aO,onChange:a=>aP(a.target.value),placeholder:"Fresh minced lamb. Store at 0-4Â°C. Use within 5 days.",rows:3})]})]})]})]})]})}),(0,b.jsxs)("div",{className:"border-t pt-4 space-y-3",children:[(0,b.jsx)(z,{errors:a4.errors,warnings:a4.warnings}),(0,b.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>g(!1),disabled:a0,children:"Iptal"}),(0,b.jsx)(d.Button,{onClick:a7,disabled:a0||!a4.isValid,children:a0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Kaydediliyor..."]}):"Urunu Kaydet"})]})]})]})})}var B=a.i(90166),C=a.i(70106);let D=(0,C.default)("percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),E=(0,C.default)("barcode",[["path",{d:"M3 5v14",key:"1nt18q"}],["path",{d:"M8 5v14",key:"1ybrkv"}],["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"M17 5v14",key:"ycjyhj"}],["path",{d:"M21 5v14",key:"nzette"}]]);var F=a.i(10227),G=a.i(38784),H=a.i(24669),I=a.i(53277),J=a.i(99464),K=a.i(33508),L=a.i(41710);function M({icon:a,title:c,value:d,color:e="gray"}){return(0,b.jsxs)("div",{className:`rounded-lg border p-4 ${{blue:"bg-blue-50 border-blue-200",green:"bg-green-50 border-green-200",purple:"bg-purple-50 border-purple-200",amber:"bg-amber-50 border-amber-200",gray:"bg-gray-50 border-gray-200"}[e]}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-gray-600 text-sm mb-1",children:[a,(0,b.jsx)("span",{children:c})]}),(0,b.jsx)("div",{className:"text-lg font-semibold text-gray-900",children:d})]})}function N({current:a,min:c}){return a<=0?(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,b.jsx)(K.X,{className:"h-3 w-3 mr-1"}),"Stok Yok"]}):a<c?(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:[(0,b.jsx)(t.AlertTriangle,{className:"h-3 w-3 mr-1"}),"Dusuk"]}):(0,b.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,b.jsx)(u.CheckCircle,{className:"h-3 w-3 mr-1"}),"Normal"]})}function O({open:a,onOpenChange:e,product:f,onEdit:h}){let j,k,[l,p]=(0,c.useState)([]),[q,s]=(0,c.useState)([]),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)("info");(0,c.useEffect)(()=>{if(!a||!f)return;w(!0);let b=(0,i.subscribeToRTDB)("branches",a=>{console.log("ProductCardDialog: branches loaded",a.length),p(a||[])}),c=(0,i.subscribeToRTDB)("sale_invoices",a=>{console.log("ProductCardDialog: sale_invoices loaded",a.length),s(a||[])}),d=(0,i.subscribeToRTDB)("purchases",a=>{console.log("ProductCardDialog: purchases loaded",a.length),u(a||[]),w(!1)});return()=>{b(),c(),d()}},[a,f]);let z=()=>f?.basic?.name||f?.name||"-",A=()=>f?.basic?.category||"-",C=()=>f?.basic?.brand||"-",K=()=>f?.basic?.sku||"-",O=()=>f?.barcodes?.mainBarcode||f?.barcode||"-",P=()=>f?.pricing?.baseCost||f?.cost||0,Q=()=>f?.pricing?.sellPrice||f?.price||0,R=()=>f?.pricing?.vatRate||0,S=()=>f?.stock?.totalStock||f?.stock_qty||0,T=(0,c.useMemo)(()=>f?.stock?.branchStock?Object.entries(f.stock.branchStock).map(([a,b])=>{let c=l.find(b=>b.id===a);return{branchId:a,branchName:c?.name||a,currentStock:b?.currentStock||0,minStock:b?.minStock||10,maxStock:b?.maxStock||100}}):[],[f,l]),U=(0,c.useMemo)(()=>{if(!f)return[];let a=[];return q.forEach(b=>{(b.items||[]).forEach(c=>{c.productId===f.id&&a.push({date:(b.date||b.createdAt||"-").substring(0,10),invoiceNo:b.invoiceNo||"-",quantity:c.quantity||0,unitPrice:c.unitPrice||0,total:c.total||0})})}),a.sort((a,b)=>b.date.localeCompare(a.date)).slice(0,20)},[f,q]),V=(0,c.useMemo)(()=>{if(!f)return[];let a=[];return t.forEach(b=>{(b.items||[]).forEach(c=>{c.productId===f.id&&a.push({date:(b.date||b.createdAt||"-").substring(0,10),supplierName:b.supplierName||"-",quantity:c.quantity||0,unitPrice:c.unitPrice||0,total:c.total||0})})}),a.sort((a,b)=>b.date.localeCompare(a.date)).slice(0,20)},[f,t]),W=f?.barcodes?.caseBarcode,X=W?.enabled&&W?.barcode,Y=f?.supplier,Z=Y?.supplierName&&Y?.supplierSKU;return f?(0,b.jsx)(m.Dialog,{open:a,onOpenChange:e,children:(0,b.jsxs)(m.DialogContent,{className:"max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[(0,b.jsx)(m.DialogHeader,{className:"border-b pb-4",children:(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(m.DialogTitle,{className:"text-xl font-semibold text-gray-900",children:z()}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[A()," - ",C()," - SKU: ",K()]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:["â‚¬",Q().toFixed(2)]}),(0,b.jsxs)("div",{className:"text-sm text-gray-500",children:["Maliyet: â‚¬",P().toFixed(2)," - Kar: %",(j=Q(),k=P(),j<=0?0:(j-k)/j*100).toFixed(1)]})]})]})}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:v?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(o.Loader2,{className:"h-8 w-8 animate-spin text-blue-600"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,b.jsx)(M,{icon:(0,b.jsx)(r.Package,{className:"h-4 w-4"}),title:"Toplam Stok",value:S().toFixed(0),color:"blue"}),(0,b.jsx)(M,{icon:(0,b.jsx)(B.DollarSign,{className:"h-4 w-4"}),title:"Stok Degeri",value:`â‚¬${(S()*P()).toFixed(2)}`,color:"green"}),(0,b.jsx)(M,{icon:(0,b.jsx)(D,{className:"h-4 w-4"}),title:"KDV Orani",value:`%${R().toFixed(1)}`,color:"purple"}),(0,b.jsx)(M,{icon:(0,b.jsx)(E,{className:"h-4 w-4"}),title:"Barkod",value:O(),color:"gray"})]}),(0,b.jsxs)(n.Tabs,{value:x,onValueChange:y,className:"w-full",children:[(0,b.jsxs)(n.TabsList,{className:"grid w-full grid-cols-5 mb-4",children:[(0,b.jsx)(n.TabsTrigger,{value:"info",children:"Genel Bilgiler"}),(0,b.jsx)(n.TabsTrigger,{value:"stock",children:"Stok Durumu"}),(0,b.jsx)(n.TabsTrigger,{value:"purchases",children:"Alis Gecmisi"}),(0,b.jsx)(n.TabsTrigger,{value:"sales",children:"Satis Gecmisi"}),(0,b.jsx)(n.TabsTrigger,{value:"movements",children:"Stok Hareketleri"})]}),(0,b.jsxs)(n.TabsContent,{value:"info",className:"space-y-4",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,b.jsx)("h4",{className:"font-semibold text-gray-900 mb-4",children:"Temel Bilgiler"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Urun Adi:"}),(0,b.jsx)("span",{className:"font-medium",children:z()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Kategori:"}),(0,b.jsx)("span",{className:"font-medium",children:A()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Marka:"}),(0,b.jsx)("span",{className:"font-medium",children:C()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"SKU:"}),(0,b.jsx)("span",{className:"font-medium",children:K()})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Ana Barkod:"}),(0,b.jsx)("span",{className:"font-mono font-medium",children:O()})]})]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Maliyet:"}),(0,b.jsxs)("span",{className:"font-medium",children:["â‚¬",P().toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Satis Fiyati:"}),(0,b.jsxs)("span",{className:"font-medium",children:["â‚¬",Q().toFixed(2)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"KDV Orani:"}),(0,b.jsxs)("span",{className:"font-medium",children:["%",R().toFixed(1)]})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Olusturulma:"}),(0,b.jsx)("span",{className:"font-medium",children:f.audit?.createdAt?.substring(0,10)||"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("span",{className:"text-gray-500",children:"Son Guncelleme:"}),(0,b.jsx)("span",{className:"font-medium",children:f.audit?.updatedAt?.substring(0,10)||"-"})]})]})]})]}),(0,b.jsx)("div",{className:`rounded-lg border-2 p-4 ${X?"bg-amber-50 border-amber-300":"bg-gray-50 border-gray-200"}`,children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(r.Package,{className:`h-5 w-5 ${X?"text-amber-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:`font-semibold ${X?"text-amber-800":"text-gray-500"}`,children:"Kutu Barkodu:"}),X?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"font-mono font-bold bg-white px-3 py-1 rounded border border-amber-200",children:W?.barcode}),(0,b.jsxs)("span",{className:"text-amber-700",children:["Adet: ",W?.caseQuantity||0]})]}):(0,b.jsx)("span",{className:"text-gray-400 italic",children:"Tanimli degil"})]})}),(0,b.jsxs)("div",{className:`rounded-lg border-2 p-4 ${Z?"bg-purple-50 border-purple-300":"bg-gray-50 border-gray-200"}`,children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)(F.Truck,{className:`h-5 w-5 ${Z?"text-purple-600":"text-gray-400"}`}),(0,b.jsx)("span",{className:`font-semibold ${Z?"text-purple-800":"text-gray-500"}`,children:"Tedarikci Stok Kodu:"})]}),Z?(0,b.jsx)("div",{className:"flex items-center gap-4 ml-8",children:(0,b.jsxs)("div",{className:"bg-white rounded border border-purple-200 px-3 py-2",children:[(0,b.jsx)("div",{className:"text-xs text-purple-600",children:Y?.supplierName}),(0,b.jsx)("div",{className:"font-mono font-bold text-purple-800",children:Y?.supplierSKU}),Y?.lastPurchasePrice&&(0,b.jsxs)("div",{className:"text-xs text-purple-500",children:["Son: â‚¬",Y.lastPurchasePrice.toFixed(2)]})]})}):(0,b.jsx)("span",{className:"text-gray-400 italic ml-8",children:"Tedarikci stok kodu tanimli degil"})]})]}),(0,b.jsx)(n.TabsContent,{value:"stock",className:"space-y-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg border p-4",children:[(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(r.Package,{className:"h-5 w-5 text-blue-600"}),"Toplam Stok: ",S().toFixed(0)]}),T.length>0?(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Sube"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Mevcut"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Minimum"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Maksimum"}),(0,b.jsx)(g.TableHead,{children:"Durum"})]})}),(0,b.jsx)(g.TableBody,{children:T.map(a=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{className:"font-medium",children:a.branchName}),(0,b.jsx)(g.TableCell,{className:`text-right font-semibold ${a.currentStock<=0?"text-red-600":a.currentStock<a.minStock?"text-amber-600":""}`,children:a.currentStock.toFixed(0)}),(0,b.jsx)(g.TableCell,{className:"text-right",children:a.minStock}),(0,b.jsx)(g.TableCell,{className:"text-right",children:a.maxStock}),(0,b.jsx)(g.TableCell,{children:(0,b.jsx)(N,{current:a.currentStock,min:a.minStock})})]},a.branchId))})]}):(0,b.jsx)("p",{className:"text-gray-500 italic",children:"Sube bazli stok bilgisi yok"})]})}),(0,b.jsx)(n.TabsContent,{value:"purchases",className:"space-y-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(G.ShoppingCart,{className:"h-5 w-5 text-blue-600"}),"Alis Gecmisi"]})}),(0,b.jsx)("div",{className:"max-h-[300px] overflow-auto",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Tarih"}),(0,b.jsx)(g.TableHead,{children:"Tedarikci"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Birim Fiyat"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,b.jsx)(g.TableBody,{children:0===V.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Alis gecmisi bulunamadi"})}):V.map((a,c)=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:a.date}),(0,b.jsx)(g.TableCell,{children:a.supplierName}),(0,b.jsx)(g.TableCell,{className:"text-right",children:a.quantity.toFixed(0)}),(0,b.jsxs)(g.TableCell,{className:"text-right",children:["â‚¬",a.unitPrice.toFixed(2)]}),(0,b.jsxs)(g.TableCell,{className:"text-right font-semibold",children:["â‚¬",a.total.toFixed(2)]})]},c))})]})})]})}),(0,b.jsx)(n.TabsContent,{value:"sales",className:"space-y-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(H.TrendingUp,{className:"h-5 w-5 text-green-600"}),"Satis Gecmisi"]})}),(0,b.jsx)("div",{className:"max-h-[300px] overflow-auto",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{children:"Tarih"}),(0,b.jsx)(g.TableHead,{children:"Fatura No"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Miktar"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Birim Fiyat"}),(0,b.jsx)(g.TableHead,{className:"text-right",children:"Toplam"})]})}),(0,b.jsx)(g.TableBody,{children:0===U.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:5,className:"text-center py-8 text-gray-500",children:"Satis gecmisi bulunamadi"})}):U.map((a,c)=>(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableCell,{children:a.date}),(0,b.jsx)(g.TableCell,{className:"font-mono",children:a.invoiceNo}),(0,b.jsx)(g.TableCell,{className:"text-right",children:a.quantity.toFixed(0)}),(0,b.jsxs)(g.TableCell,{className:"text-right",children:["â‚¬",a.unitPrice.toFixed(2)]}),(0,b.jsxs)(g.TableCell,{className:"text-right font-semibold text-green-600",children:["â‚¬",a.total.toFixed(2)]})]},c))})]})})]})}),(0,b.jsx)(n.TabsContent,{value:"movements",className:"space-y-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg border",children:[(0,b.jsx)("div",{className:"p-4 border-b",children:(0,b.jsxs)("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[(0,b.jsx)(I.TrendingDown,{className:"h-5 w-5 text-purple-600"}),"Stok Hareketleri"]})}),(0,b.jsxs)("div",{className:"p-8 text-center text-gray-500",children:[(0,b.jsx)(L.Clock,{className:"h-12 w-12 mx-auto mb-3 text-gray-300"}),(0,b.jsx)("p",{children:"Stok hareketleri yakinda..."})]})]})})]})]})}),(0,b.jsxs)("div",{className:"border-t pt-4 flex justify-between",children:[(0,b.jsxs)(d.Button,{variant:"outline",onClick:()=>{h&&f&&(h(f.id),e(!1))},children:[(0,b.jsx)(J.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>e(!1),children:"Kapat"})]})]})}):null}var P=a.i(69167),Q=a.i(69520),R=a.i(17755),S=a.i(77156),T=a.i(87532);let U=(0,C.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var V=a.i(50522);let W=(0,C.default)("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),X=(0,C.default)("chevrons-right",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);var Y=a.i(39761);let Z={MEAT:{name:"Et Urunleri",icon:"ðŸ¥©",subcategories:{BEEF:"Dana",LAMB:"Kuzu",CHICKEN:"Tavuk",OTHER:"Diger"}},DAIRY:{name:"Sut Urunleri",icon:"ðŸ§€",subcategories:{MILK:"Sut",CHEESE:"Peynir",YOGURT:"Yogurt"}},GROCERY:{name:"Bakkaliye",icon:"ðŸ›’",subcategories:{DRY_GOODS:"Kuru Gida",CANNED:"Konserve",SPICES:"Baharat"}},BEVERAGES:{name:"Icecekler",icon:"ðŸ¥¤",subcategories:{WATER:"Su",JUICE:"Meyve Suyu",SOFT_DRINKS:"Gazli Icecek"}},PRODUCE:{name:"Meyve & Sebze",icon:"ðŸ¥¬",subcategories:{FRUITS:"Meyveler",VEGETABLES:"Sebzeler"}},BAKERY:{name:"Firindan",icon:"ðŸ¥–",subcategories:{BREAD:"Ekmek",PASTRY:"Pasta"}}};function $({isActive:a}){return(0,b.jsx)("span",{className:`inline-flex items-center justify-center w-3 h-3 rounded-full ${a?"bg-green-500":"bg-red-500"}`})}function _({stock:a}){return a<=0?(0,b.jsx)("span",{className:"text-red-600 font-medium",children:a}):a<10?(0,b.jsx)("span",{className:"text-amber-600 font-medium",children:a}):(0,b.jsx)("span",{className:"text-gray-900",children:a})}function aa(a,b,c,d){let e=a;for(let a of b)if(e&&"object"==typeof e&&a in e)e=e[a];else{e=void 0;break}if(null!=e)return e;let f=a[c];return null!=f?f:d}function ab(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!0),[m,n]=(0,c.useState)(""),[o,s]=(0,c.useState)("all"),[u,v]=(0,c.useState)(0),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(null),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,I]=(0,c.useState)(!1);(0,c.useEffect)(()=>{l(!0);let a=(0,i.subscribeToRTDB)("products",a=>{j(a||[]),l(!1)});return()=>a()},[]);let K=(0,c.useMemo)(()=>a.filter(a=>{aa(a,["audit","isActive"],"isActive",!0);let b=aa(a,["basic","name"],"name",""),c=aa(a,["barcodes","mainBarcode"],"barcode",""),d=aa(a,["basic","sku"],"sku",""),e=m.toLowerCase(),f=!m||b.toLowerCase().includes(e)||c.toLowerCase().includes(e)||d.toLowerCase().includes(e),g=aa(a,["basic","category"],"category",""),h="all"===o||g.startsWith(o)||g===o;return f&&h}),[a,m,o]),L=Math.max(1,Math.ceil(K.length/100)),M=(0,c.useMemo)(()=>{let a=100*u;return K.slice(a,a+100)},[K,u]);(0,c.useEffect)(()=>{v(0)},[m,o]);let N=(0,c.useMemo)(()=>{let b=a.length,c=a.filter(a=>aa(a,["audit","isActive"],"isActive",!0)).length;return{total:b,active:c,lowStock:a.filter(a=>{let b=aa(a,["stock","totalStock"],"stock_qty",0);return b<10&&b>=0}).length,totalValue:a.reduce((a,b)=>a+aa(b,["stock","totalStock"],"stock_qty",0)*aa(b,["pricing","baseCost"],"cost",0),0)}},[a]),ab=(0,c.useMemo)(()=>{let a=[{value:"all",label:"Tum Kategoriler"}];return Object.entries(Z).forEach(([b,c])=>{a.push({value:b,label:`${c.icon} ${c.name}`}),Object.entries(c.subcategories).forEach(([c,d])=>{a.push({value:`${b}.${c}`,label:`   â”œâ”€ ${d}`})})}),a},[]),ac=a=>{F(a),D(!0)},ad=async a=>{try{let b=!aa(a,["audit","isActive"],"isActive",!0);a.audit?await (0,i.updateData)(`products/${a.id}/audit`,{isActive:b,updatedAt:new Date().toISOString()}):await (0,i.updateData)(`products/${a.id}`,{isActive:b,updatedAt:new Date().toISOString()})}catch(a){console.error("Status update error:",a),alert("Durum guncellenemedi: "+a.message)}},ae=async a=>{let b=aa(a,["basic","name"],"name","Urun");if(confirm(`"${b}" urununu silmek istediginize emin misiniz?`))try{await (0,i.removeData)(`products/${a.id}`)}catch(a){console.error("Delete error:",a),alert("Silme hatasi: "+a.message)}};return(0,b.jsxs)("div",{className:"h-full flex flex-col bg-gray-50",children:[(0,b.jsxs)("div",{className:"bg-white border-b px-8 py-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Urunler"}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:[N.total," urun - ",N.active," aktif"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{l(!0),setTimeout(()=>l(!1),500)},disabled:k,children:[(0,b.jsx)(Q.RefreshCw,{className:`h-4 w-4 mr-2 ${k?"animate-spin":""}`}),"Yenile"]}),(0,b.jsxs)(d.Button,{variant:"outline",size:"sm",onClick:()=>{I(!0)},children:[(0,b.jsx)(Y.BarChart3,{className:"h-4 w-4 mr-2"}),"Rapor"]}),(0,b.jsxs)(d.Button,{onClick:()=>{z(null),x(!0)},children:[(0,b.jsx)(p.Plus,{className:"h-4 w-4 mr-2"}),"Yeni Urun"]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[(0,b.jsx)("div",{className:"bg-blue-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,b.jsx)(r.Package,{className:"h-5 w-5 text-blue-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Toplam"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:N.total})]})]})}),(0,b.jsx)("div",{className:"bg-green-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,b.jsx)(H.TrendingUp,{className:"h-5 w-5 text-green-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Aktif"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:N.active})]})]})}),(0,b.jsx)("div",{className:"bg-amber-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-amber-100 rounded-lg",children:(0,b.jsx)(t.AlertTriangle,{className:"h-5 w-5 text-amber-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Dusuk Stok"}),(0,b.jsx)("p",{className:"text-xl font-semibold text-gray-900",children:N.lowStock})]})]})}),(0,b.jsx)("div",{className:"bg-purple-50 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,b.jsx)(B.DollarSign,{className:"h-5 w-5 text-purple-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Stok Degeri"}),(0,b.jsxs)("p",{className:"text-xl font-semibold text-gray-900",children:["â‚¬",N.totalValue.toLocaleString("tr-TR",{minimumFractionDigits:2})]})]})]})})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(T.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,b.jsx)(e.Input,{placeholder:"Urun ara (isim, barkod, SKU)...",value:m,onChange:a=>n(a.target.value),className:"pl-10"})]}),(0,b.jsxs)(f.Select,{value:o,onValueChange:s,children:[(0,b.jsx)(f.SelectTrigger,{className:"w-[220px]",children:(0,b.jsx)(f.SelectValue,{placeholder:"Kategori"})}),(0,b.jsx)(f.SelectContent,{children:ab.map(a=>(0,b.jsx)(f.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsx)("div",{className:"flex-1 overflow-auto p-8",children:(0,b.jsx)("div",{className:"bg-white rounded-lg border",children:(0,b.jsxs)(g.Table,{children:[(0,b.jsx)(g.TableHeader,{children:(0,b.jsxs)(g.TableRow,{children:[(0,b.jsx)(g.TableHead,{className:"w-[130px]",children:"Barkod"}),(0,b.jsx)(g.TableHead,{children:"Urun Adi"}),(0,b.jsx)(g.TableHead,{className:"w-[160px]",children:"Kategori"}),(0,b.jsx)(g.TableHead,{className:"w-[100px] text-right",children:"Fiyat"}),(0,b.jsx)(g.TableHead,{className:"w-[80px] text-right",children:"Stok"}),(0,b.jsx)(g.TableHead,{className:"w-[60px] text-center",children:"Durum"}),(0,b.jsx)(g.TableHead,{className:"w-[60px]"})]})}),(0,b.jsx)(g.TableBody,{children:k?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:7,className:"text-center py-8 text-gray-500",children:"Yukleniyor..."})}):0===M.length?(0,b.jsx)(g.TableRow,{children:(0,b.jsx)(g.TableCell,{colSpan:7,className:"text-center py-8 text-gray-500",children:m||"all"!==o?"Filtrelere uygun urun bulunamadi":"Henuz urun eklenmemis"})}):M.map(a=>{let c=aa(a,["barcodes","mainBarcode"],"barcode","-"),e=aa(a,["basic","name"],"name","Bilinmiyor"),f=aa(a,["basic","category"],"category","-"),i=aa(a,["pricing","sellPrice"],"price",0),j=aa(a,["stock","totalStock"],"stock_qty",0),k=aa(a,["audit","isActive"],"isActive",!0);return(0,b.jsxs)(g.TableRow,{className:"hover:bg-gray-50 cursor-pointer",onDoubleClick:()=>ac(a),children:[(0,b.jsx)(g.TableCell,{className:"font-mono text-sm",children:c}),(0,b.jsx)(g.TableCell,{className:"font-medium",children:e}),(0,b.jsx)(g.TableCell,{className:"text-gray-600 text-sm",children:function(a){if(!a)return"-";let b=a.split("."),c=Z[b[0]];if(!c)return a;if(1===b.length)return`${c.icon} ${c.name}`;let d=c.subcategories[b[1]];return d?`${c.icon} ${d}`:a}(f)}),(0,b.jsxs)(g.TableCell,{className:"text-right font-medium",children:["â‚¬",i.toFixed(2)]}),(0,b.jsx)(g.TableCell,{className:"text-right",children:(0,b.jsx)(_,{stock:j})}),(0,b.jsx)(g.TableCell,{className:"text-center",children:(0,b.jsx)($,{isActive:k})}),(0,b.jsx)(g.TableCell,{children:(0,b.jsxs)(h.DropdownMenu,{children:[(0,b.jsx)(h.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",children:(0,b.jsx)(R.MoreHorizontal,{className:"h-4 w-4"})})}),(0,b.jsxs)(h.DropdownMenuContent,{align:"end",children:[(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>ac(a),children:[(0,b.jsx)(S.Eye,{className:"h-4 w-4 mr-2"}),"Urun Karti"]}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>{z(a),x(!0)},children:[(0,b.jsx)(J.Pencil,{className:"h-4 w-4 mr-2"}),"Duzenle"]}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsx)(h.DropdownMenuItem,{onClick:()=>ad(a),children:k?"ðŸ”´ Pasif Yap":"ðŸŸ¢ Aktif Yap"}),(0,b.jsx)(h.DropdownMenuSeparator,{}),(0,b.jsxs)(h.DropdownMenuItem,{onClick:()=>ae(a),className:"text-red-600",children:[(0,b.jsx)(q.Trash2,{className:"h-4 w-4 mr-2"}),"Sil"]})]})]})})]},a.id)})})]})})}),(0,b.jsxs)("div",{className:"bg-white border-t px-8 py-3 flex items-center justify-between",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,b.jsxs)("span",{children:["ðŸ“¦ Toplam: ",N.total]}),(0,b.jsxs)("span",{children:["âœ… Aktif: ",N.active]}),(0,b.jsxs)("span",{children:["âš ï¸ Dusuk Stok: ",N.lowStock]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(d.Button,{variant:"outline",size:"icon",className:"h-8 w-8",disabled:0===u,onClick:()=>v(0),children:(0,b.jsx)(W,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"outline",size:"icon",className:"h-8 w-8",disabled:0===u,onClick:()=>v(a=>Math.max(0,a-1)),children:(0,b.jsx)(U,{className:"h-4 w-4"})}),(0,b.jsxs)("span",{className:"px-3 text-sm font-medium text-gray-700",children:[u+1," / ",L," (",K.length,")"]}),(0,b.jsx)(d.Button,{variant:"outline",size:"icon",className:"h-8 w-8",disabled:u>=L-1,onClick:()=>v(a=>Math.min(L-1,a+1)),children:(0,b.jsx)(V.ChevronRight,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"outline",size:"icon",className:"h-8 w-8",disabled:u>=L-1,onClick:()=>v(L-1),children:(0,b.jsx)(X,{className:"h-4 w-4"})})]})]}),(0,b.jsx)(A,{open:w,onOpenChange:x,product:y,onSave:()=>x(!1)}),(0,b.jsx)(O,{open:C,onOpenChange:D,product:E,onEdit:b=>{let c=a.find(a=>a.id===b);c&&(z(c),x(!0))}}),(0,b.jsx)(P.ReportDialog,{open:G,onOpenChange:I,reportType:"stock"})]})}a.s(["default",()=>ab],46120)}];

//# sourceMappingURL=src_app_dashboard_products_page_tsx_7e353505._.js.map